# Comparing `tmp/pybase16384-0.3.6-pp39-pypy39_pp73-win_amd64.whl.zip` & `tmp/pybase16384-0.3.7-pp39-pypy39_pp73-win_amd64.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 281812 bytes, number of entries: 16
--rw-rw-rw-  2.0 fat     3062 b- defN 24-Apr-04 07:46 pybase16384/__init__.py
--rw-rw-rw-  2.0 fat       56 b- defN 24-Apr-04 07:46 pybase16384/backends/__init__.py
--rw-rw-rw-  2.0 fat     9774 b- defN 24-Apr-04 07:46 pybase16384/backends/cffi/__init__.py
--rw-rw-rw-  2.0 fat    22016 b- defN 24-Apr-04 07:53 pybase16384/backends/cffi/_core.pypy39-pp73-win_amd64.pyd
--rw-rw-rw-  2.0 fat     4539 b- defN 24-Apr-04 07:46 pybase16384/backends/cffi/build.py
--rw-rw-rw-  2.0 fat      578 b- defN 24-Apr-04 07:46 pybase16384/backends/cython/__init__.py
--rw-rw-rw-  2.0 fat  1393181 b- defN 24-Apr-04 07:53 pybase16384/backends/cython/_core.c
--rw-rw-rw-  2.0 fat      542 b- defN 24-Apr-04 07:46 pybase16384/backends/cython/_core.pxi
--rw-rw-rw-  2.0 fat   182784 b- defN 24-Apr-04 07:53 pybase16384/backends/cython/_core.pypy39-pp73-win_amd64.pyd
--rw-rw-rw-  2.0 fat    15765 b- defN 24-Apr-04 07:46 pybase16384/backends/cython/_core.pyx
--rw-rw-rw-  2.0 fat     4749 b- defN 24-Apr-04 07:46 pybase16384/backends/cython/base16384.pxd
--rw-rw-rw-  2.0 fat    35821 b- defN 24-Apr-04 07:53 pybase16384-0.3.6.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     5539 b- defN 24-Apr-04 07:53 pybase16384-0.3.6.dist-info/METADATA
--rw-rw-rw-  2.0 fat      107 b- defN 24-Apr-04 07:53 pybase16384-0.3.6.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       12 b- defN 24-Apr-04 07:53 pybase16384-0.3.6.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1469 b- defN 24-Apr-04 07:53 pybase16384-0.3.6.dist-info/RECORD
-16 files, 1679994 bytes uncompressed, 279354 bytes compressed:  83.4%
+Zip file size: 301425 bytes, number of entries: 16
+-rw-rw-rw-  2.0 fat     4970 b- defN 24-Apr-05 10:41 pybase16384/__init__.py
+-rw-rw-rw-  2.0 fat       56 b- defN 24-Apr-05 10:41 pybase16384/backends/__init__.py
+-rw-rw-rw-  2.0 fat    14451 b- defN 24-Apr-05 10:41 pybase16384/backends/cffi/__init__.py
+-rw-rw-rw-  2.0 fat    25088 b- defN 24-Apr-05 10:49 pybase16384/backends/cffi/_core.pypy39-pp73-win_amd64.pyd
+-rw-rw-rw-  2.0 fat     4693 b- defN 24-Apr-05 10:41 pybase16384/backends/cffi/build.py
+-rw-rw-rw-  2.0 fat      714 b- defN 24-Apr-05 10:41 pybase16384/backends/cython/__init__.py
+-rw-rw-rw-  2.0 fat  1538911 b- defN 24-Apr-05 10:49 pybase16384/backends/cython/_core.c
+-rw-rw-rw-  2.0 fat      542 b- defN 24-Apr-05 10:41 pybase16384/backends/cython/_core.pxi
+-rw-rw-rw-  2.0 fat   206336 b- defN 24-Apr-05 10:49 pybase16384/backends/cython/_core.pypy39-pp73-win_amd64.pyd
+-rw-rw-rw-  2.0 fat    22414 b- defN 24-Apr-05 10:41 pybase16384/backends/cython/_core.pyx
+-rw-rw-rw-  2.0 fat     4941 b- defN 24-Apr-05 10:41 pybase16384/backends/cython/base16384.pxd
+-rw-rw-rw-  2.0 fat    35821 b- defN 24-Apr-05 10:49 pybase16384-0.3.7.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     6699 b- defN 24-Apr-05 10:49 pybase16384-0.3.7.dist-info/METADATA
+-rw-rw-rw-  2.0 fat      107 b- defN 24-Apr-05 10:49 pybase16384-0.3.7.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       12 b- defN 24-Apr-05 10:49 pybase16384-0.3.7.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1470 b- defN 24-Apr-05 10:49 pybase16384-0.3.7.dist-info/RECORD
+16 files, 1867225 bytes uncompressed, 298967 bytes compressed:  84.0%
```

## zipnote {}

```diff
@@ -27,23 +27,23 @@
 
 Filename: pybase16384/backends/cython/_core.pyx
 Comment: 
 
 Filename: pybase16384/backends/cython/base16384.pxd
 Comment: 
 
-Filename: pybase16384-0.3.6.dist-info/LICENSE
+Filename: pybase16384-0.3.7.dist-info/LICENSE
 Comment: 
 
-Filename: pybase16384-0.3.6.dist-info/METADATA
+Filename: pybase16384-0.3.7.dist-info/METADATA
 Comment: 
 
-Filename: pybase16384-0.3.6.dist-info/WHEEL
+Filename: pybase16384-0.3.7.dist-info/WHEEL
 Comment: 
 
-Filename: pybase16384-0.3.6.dist-info/top_level.txt
+Filename: pybase16384-0.3.7.dist-info/top_level.txt
 Comment: 
 
-Filename: pybase16384-0.3.6.dist-info/RECORD
+Filename: pybase16384-0.3.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pybase16384/__init__.py

```diff
@@ -15,115 +15,187 @@
         return True
 
 
 if not _should_use_cffi():
     from pybase16384.backends.cython import (
         DECBUFSZ,
         ENCBUFSZ,
+        FLAG_DO_SUM_CHECK_FORCELY,
         FLAG_NOHEADER,
         FLAG_SUM_CHECK_ON_REMAIN,
-        SIMPLE_SUM_INIT_VALUE,
         _decode,
         _decode_into,
+        _decode_into_safe,
+        _decode_safe,
         _encode,
         _encode_into,
+        _encode_into_safe,
+        _encode_safe,
         decode_fd,
         decode_fd_detailed,
         decode_file,
+        decode_file_safe,
         decode_len,
         decode_local_file,
         decode_local_file_detailed,
         encode_fd,
         encode_fd_detailed,
         encode_file,
+        encode_file_safe,
         encode_len,
         encode_local_file,
         encode_local_file_detailed,
         is_64bits,
     )
 else:
     from pybase16384.backends.cffi import (
         DECBUFSZ,
         ENCBUFSZ,
+        FLAG_DO_SUM_CHECK_FORCELY,
         FLAG_NOHEADER,
         FLAG_SUM_CHECK_ON_REMAIN,
-        SIMPLE_SUM_INIT_VALUE,
         _decode,
         _decode_into,
+        _decode_into_safe,
+        _decode_safe,
         _encode,
         _encode_into,
+        _encode_into_safe,
+        _encode_safe,
         decode_fd,
         decode_fd_detailed,
         decode_file,
+        decode_file_safe,
         decode_len,
         decode_local_file,
         decode_local_file_detailed,
         encode_fd,
         encode_fd_detailed,
         encode_file,
+        encode_file_safe,
         encode_len,
         encode_local_file,
         encode_local_file_detailed,
         is_64bits,
     )
 
-__version__ = "0.3.6"
+__version__ = "0.3.7"
 
 
 def encode(data: bytes) -> bytes:
     inp = BytesIO(data)
     out = BytesIO()
     encode_file(inp, out, False, len(data) // 7)
     return out.getvalue()
 
 
+def encode_safe(data: bytes) -> bytes:
+    inp = BytesIO(data)
+    out = BytesIO()
+    encode_file_safe(inp, out, False, len(data) // 7)
+    return out.getvalue()
+
+
 def decode(data: bytes) -> bytes:
     inp = BytesIO(data)
     out = BytesIO()
     decode_file(inp, out, len(data) // 8)
     return out.getvalue()
 
 
+def decode_safe(data: bytes) -> bytes:
+    inp = BytesIO(data)
+    out = BytesIO()
+    decode_file_safe(inp, out, len(data) // 8)
+    return out.getvalue()
+
+
 def encode_from_string(data: str, write_head: bool = False) -> bytes:
     bt = data.encode()
     inp = BytesIO(bt)
     out = BytesIO()
     encode_file(inp, out, write_head, len(bt) // 7)
     return out.getvalue()
 
 
+def encode_from_string_safe(data: str, write_head: bool = False) -> bytes:
+    bt = data.encode()
+    inp = BytesIO(bt)
+    out = BytesIO()
+    encode_file_safe(inp, out, write_head, len(bt) // 7)
+    return out.getvalue()
+
+
 def encode_to_string(data: bytes) -> str:
     inp = BytesIO(data)
     out = BytesIO()
     encode_file(inp, out, False, len(data) // 7)
     return out.getvalue().decode("utf-16-be")
 
 
+def encode_to_string_safe(data: bytes) -> str:
+    inp = BytesIO(data)
+    out = BytesIO()
+    encode_file_safe(inp, out, False, len(data) // 7)
+    return out.getvalue().decode("utf-16-be")
+
+
 def encode_string(data: str) -> str:
     data = data.encode()
     inp = BytesIO(data)
     out = BytesIO()
     encode_file(inp, out, False, len(data) // 7)
     return out.getvalue().decode("utf-16-be")
 
 
+def encode_string_safe(data: str) -> str:
+    data = data.encode()
+    inp = BytesIO(data)
+    out = BytesIO()
+    encode_file_safe(inp, out, False, len(data) // 7)
+    return out.getvalue().decode("utf-16-be")
+
+
 def decode_from_bytes(data: bytes) -> str:
     inp = BytesIO(data)
     out = BytesIO()
     decode_file(inp, out, len(data) // 8)
     return out.getvalue().decode()
 
 
+def decode_from_bytes_safe(data: bytes) -> str:
+    inp = BytesIO(data)
+    out = BytesIO()
+    decode_file_safe(inp, out, len(data) // 8)
+    return out.getvalue().decode()
+
+
 def decode_from_string(data: str) -> bytes:
     bt = data.encode("utf-16-be")
     inp = BytesIO(bt)
     out = BytesIO()
     decode_file(inp, out, len(bt) // 8)
     return out.getvalue()
 
 
+def decode_from_string_safe(data: str) -> bytes:
+    bt = data.encode("utf-16-be")
+    inp = BytesIO(bt)
+    out = BytesIO()
+    decode_file_safe(inp, out, len(bt) // 8)
+    return out.getvalue()
+
+
 def decode_string(data: str) -> str:
     bt = data.encode("utf-16-be")
     inp = BytesIO(bt)
     out = BytesIO()
     decode_file(inp, out, len(bt) // 8)
     return out.getvalue().decode()
+
+
+def decode_string_safe(data: str) -> str:
+    bt = data.encode("utf-16-be")
+    inp = BytesIO(bt)
+    out = BytesIO()
+    decode_file_safe(inp, out, len(bt) // 8)
+    return out.getvalue().decode()
```

## pybase16384/backends/cffi/__init__.py

```diff
@@ -11,46 +11,78 @@
 encode_len = lib.base16384_encode_len
 decode_len = lib.base16384_decode_len
 
 ENCBUFSZ = lib.get_encsize()
 DECBUFSZ = lib.get_decsize()
 FLAG_NOHEADER = lib.BASE16384_FLAG_NOHEADER_()
 FLAG_SUM_CHECK_ON_REMAIN = lib.BASE16384_FLAG_SUM_CHECK_ON_REMAIN_()
-SIMPLE_SUM_INIT_VALUE = lib.BASE16384_SIMPLE_SUM_INIT_VALUE_()
+FLAG_DO_SUM_CHECK_FORCELY = lib.BASE16384_FLAG_DO_SUM_CHECK_FORCELY_()
 
 
 # -----------------low level api------------------------------
 def _encode(data: bytes) -> bytes:
     length = len(data)
     output_size = encode_len(length) + 16
     output_buf = ffi.new(f"char[{output_size}]")
     if output_buf == ffi.NULL:
         raise MemoryError
     count = lib.base16384_encode(ffi.from_buffer(data), length, output_buf)
     return ffi.unpack(output_buf, count)
 
 
+def _encode_safe(data: bytes) -> bytes:
+    length = len(data)
+    output_size = encode_len(length)
+    output_buf = ffi.new(f"char[{output_size}]")
+    if output_buf == ffi.NULL:
+        raise MemoryError
+    count = lib.base16384_encode_safe(ffi.from_buffer(data), length, output_buf)
+    return ffi.unpack(output_buf, count)
+
+
 def _encode_into(data: bytes, out: bytearray) -> int:
     return lib.base16384_encode(ffi.from_buffer(data), len(data), ffi.from_buffer(out))
 
 
+def _encode_into_safe(data: bytes, out: bytearray) -> int:
+    return lib.base16384_encode_safe(
+        ffi.from_buffer(data), len(data), ffi.from_buffer(out)
+    )
+
+
 def _decode(data: bytes) -> bytes:
     length = len(data)
     output_size = decode_len(length, 0) + 16
     output_buf = ffi.new(f"char[{output_size}]")
     if output_buf == ffi.NULL:
         raise MemoryError
     count = lib.base16384_decode(ffi.from_buffer(data), length, output_buf)
     return ffi.unpack(output_buf, count)
 
 
+def _decode_safe(data: bytes) -> bytes:
+    length = len(data)
+    output_size = decode_len(length, 0)
+    output_buf = ffi.new(f"char[{output_size}]")
+    if output_buf == ffi.NULL:
+        raise MemoryError
+    count = lib.base16384_decode_safe(ffi.from_buffer(data), length, output_buf)
+    return ffi.unpack(output_buf, count)
+
+
 def _decode_into(data: bytes, out: bytearray) -> int:
     return lib.base16384_decode(ffi.from_buffer(data), len(data), ffi.from_buffer(out))
 
 
+def _decode_into_safe(data: bytes, out: bytearray) -> int:
+    return lib.base16384_decode_safe(
+        ffi.from_buffer(data), len(data), ffi.from_buffer(out)
+    )
+
+
 def is_64bits() -> bool:
     return bool(lib.pybase16384_64bits())
 
 
 # ----------------------------
 def _check_file(file) -> bool:
     if hasattr(file, "read") and hasattr(file, "write") and hasattr(file, "seek"):
@@ -96,14 +128,58 @@
 
         count = lib.base16384_encode(ffi.from_buffer(chunk), size, output_buf)
         output.write(ffi.unpack(output_buf, count))
         if size < 7:
             break
 
 
+def encode_file_safe(
+    input: IO, output: IO, write_head: bool = False, buf_rate: int = 10
+):
+    if not _check_file(input):
+        raise TypeError(
+            "input except a file-like object, got %s" % type(input).__name__
+        )
+    if not _check_file(output):
+        raise TypeError(
+            "output except a file-like object, got %s" % type(input).__name__
+        )
+    if buf_rate <= 0:
+        buf_rate = 1
+    if write_head:
+        output.write(b"\xfe\xff")
+
+    current_buf_len: int = buf_rate * 7  # 一次读取这么多字节
+    output_size: int = encode_len(current_buf_len)  # 因为encode_len不是单调的 safe不用加16
+    output_buf = ffi.new(f"char[{output_size}]")
+    if output_buf == ffi.NULL:
+        raise MemoryError
+    first_check: int = 1  # 检查一次就行了 怎么可能出现第一次读出来是bytes 以后又变卦了的对象呢 不会吧不会吧
+    while True:
+        chunk = input.read(current_buf_len)
+        if first_check:
+            first_check = 0
+            if not isinstance(chunk, bytes):
+                raise TypeError(
+                    f"input must be a file-like rb object, got {type(input).__name__}"
+                )
+        size = len(chunk)
+        if size < current_buf_len:  # 数据不够了 要减小一次读取的量
+            if buf_rate > 1:  # 重新设置一次读取的大小 重新设置流的位置 当然要是已经是一次读取7字节了 那就不能再变小了 直接encode吧
+                buf_rate = buf_rate // 2
+                current_buf_len = buf_rate * 7
+                input.seek(-size, 1)
+                continue
+
+        count = lib.base16384_encode_safe(ffi.from_buffer(chunk), size, output_buf)
+        output.write(ffi.unpack(output_buf, count))
+        if size < 7:
+            break
+
+
 def decode_file(input: IO, output: IO, buf_rate: int = 10):
     if not _check_file(input):
         raise TypeError(
             "input except a file-like object, got %s" % type(input).__name__
         )
     if not _check_file(output):
         raise TypeError(
@@ -146,14 +222,64 @@
             else:
                 input.seek(-2, 1)
 
         count = lib.base16384_decode(ffi.from_buffer(chunk), size, output_buf)
         output.write(ffi.unpack(output_buf, count))
 
 
+def decode_file_safe(input: IO, output: IO, buf_rate: int = 10):
+    if not _check_file(input):
+        raise TypeError(
+            "input except a file-like object, got %s" % type(input).__name__
+        )
+    if not _check_file(output):
+        raise TypeError(
+            "output except a file-like object, got %s" % type(output).__name__
+        )
+    if buf_rate <= 0:
+        buf_rate = 1
+
+    chunk = input.read(1)  # type: bytes
+    if not isinstance(chunk, bytes):
+        raise TypeError(
+            f"input must be a file-like rb object, got {type(input).__name__}"
+        )
+    if chunk == b"\xfe":  # 去头
+        input.read(1)
+    else:
+        input.seek(0, 0)  # 没有头 回到开头
+
+    current_buf_len: int = buf_rate * 8
+    output_size: int = decode_len(current_buf_len, 0)
+    output_buf = ffi.new(f"char[{output_size}]")
+    if output_buf == ffi.NULL:
+        raise MemoryError
+    while True:
+        chunk = input.read(current_buf_len)  # 8的倍数
+        size = len(chunk)
+        if size == 0:
+            break
+        if size < current_buf_len:  # 长度不够了
+            if buf_rate > 1:  # 还能继续变小
+                buf_rate = buf_rate // 2  # 重新设置一次读取的大小
+                current_buf_len = buf_rate * 8
+                input.seek(-size, 1)
+                continue
+        tmp = input.read(2)  # type: bytes
+        if len(tmp) == 2:
+            if tmp[0] == 61:  # = stream完了   一次解码8n+2个字节
+                chunk += tmp
+                size += 2
+            else:
+                input.seek(-2, 1)
+
+        count = lib.base16384_decode_safe(ffi.from_buffer(chunk), size, output_buf)
+        output.write(ffi.unpack(output_buf, count))
+
+
 def ensure_bytes(inp) -> bytes:
     if isinstance(inp, str):
         return inp.encode()
     elif isinstance(inp, bytes):
         return inp
     elif isinstance(inp, Path):
         return str(inp).encode()
```

## pybase16384/backends/cffi/build.py

```diff
@@ -70,14 +70,16 @@
 
 // base16384_decode_fd decodes input fd to output fd.
 //    encbuf & decbuf must be no less than BASE16384_ENCBUFSZ & BASE16384_DECBUFSZ
 base16384_err_t base16384_decode_fd(int input, int output, char* encbuf, char* decbuf);
 
 int base16384_encode_unsafe(const char * data, int dlen, char * buf);
 int base16384_decode_unsafe(const char * data, int dlen, char * buf);
+int base16384_encode_safe(const char * data, int dlen, char * buf);
+int base16384_decode_safe(const char * data, int dlen, char * buf);
 
 base16384_err_t base16384_encode_file_detailed(const char* input, const char* output, char* encbuf, char* decbuf, int flag);
 base16384_err_t base16384_decode_file_detailed(const char* input, const char* output, char* encbuf, char* decbuf, int flag);
 base16384_err_t base16384_encode_fd_detailed(int input, int output, char* encbuf, char* decbuf, int flag);
 base16384_err_t base16384_decode_fd_detailed(int input, int output, char* encbuf, char* decbuf, int flag);
 base16384_err_t base16384_encode_fp_detailed(FILE* input, FILE* output, char* encbuf, char* decbuf, int flag);
 base16384_err_t base16384_decode_fp_detailed(FILE* input, FILE* output, char* encbuf, char* decbuf, int flag);
@@ -88,25 +90,25 @@
 
 int get_decsize();
 
 int BASE16384_FLAG_NOHEADER_();
 
 int BASE16384_FLAG_SUM_CHECK_ON_REMAIN_();
 
-int BASE16384_SIMPLE_SUM_INIT_VALUE_();
+int BASE16384_FLAG_DO_SUM_CHECK_FORCELY_();
     """
 )
 
 source = """
 #include "base16384.h"
 
 #ifdef CPUBIT32
-#define pybase16384_64bits() 0
+#define pybase16384_64bits() (0)
 #else
-#define pybase16384_64bits() 1
+#define pybase16384_64bits() (1)
 #endif
 
 int get_encsize()
 {
     return BASE16384_ENCBUFSZ;
 }
 
@@ -121,17 +123,17 @@
 }
 
 int BASE16384_FLAG_SUM_CHECK_ON_REMAIN_()
 {
     return BASE16384_FLAG_SUM_CHECK_ON_REMAIN;
 }
 
-int BASE16384_SIMPLE_SUM_INIT_VALUE_()
+int BASE16384_FLAG_DO_SUM_CHECK_FORCELY_()
 {
-    return BASE16384_SIMPLE_SUM_INIT_VALUE;
+    return BASE16384_FLAG_DO_SUM_CHECK_FORCELY;
 }
 """
 
 ffibuilder.set_source(
     "pybase16384.backends.cffi._core",
     source,
     sources=[f"./base16384/base14{CPUBIT}.c", "./base16384/file.c"],
```

## pybase16384/backends/cython/__init__.py

```diff
@@ -1,27 +1,33 @@
 """
 Copyright (c) 2008-2021 synodriver <synodriver@gmail.com>
 """
 from pybase16384.backends.cython._core import (
     DECBUFSZ,
     ENCBUFSZ,
+    FLAG_DO_SUM_CHECK_FORCELY,
     FLAG_NOHEADER,
     FLAG_SUM_CHECK_ON_REMAIN,
-    SIMPLE_SUM_INIT_VALUE,
     _decode,
     _decode_into,
+    _decode_into_safe,
+    _decode_safe,
     _encode,
     _encode_into,
+    _encode_into_safe,
+    _encode_safe,
     decode_fd,
     decode_fd_detailed,
     decode_file,
+    decode_file_safe,
     decode_len,
     decode_local_file,
     decode_local_file_detailed,
     encode_fd,
     encode_fd_detailed,
     encode_file,
+    encode_file_safe,
     encode_len,
     encode_local_file,
     encode_local_file_detailed,
     is_64bits,
 )
```

## pybase16384/backends/cython/_core.c

```diff
@@ -1258,17 +1258,17 @@
 /* Early includes */
 #include <string.h>
 #include <stdio.h>
 #include <stdint.h>
 #include "base16384.h"
 
 #ifdef CPUBIT32
-#define pybase16384_64bits() 0
+#define pybase16384_64bits() (0)
 #else
-#define pybase16384_64bits() 1
+#define pybase16384_64bits() (1)
 #endif
     
 #include "pythread.h"
 #include <stdlib.h>
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
@@ -2813,17 +2813,21 @@
 static int __pyx_memoryview_thread_locks_used;
 static PyThread_type_lock __pyx_memoryview_thread_locks[8];
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(PyObject *); /*proto*/
 static CYTHON_INLINE uint8_t __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(PyObject *); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_encode_len(int, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_decode_len(int, int, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__encode(__Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
+static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__encode_safe(__Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__decode(__Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
+static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__decode_safe(__Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into(__Pyx_memviewslice, __Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
+static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into_safe(__Pyx_memviewslice, __Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into(__Pyx_memviewslice, __Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
+static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into_safe(__Pyx_memviewslice, __Pyx_memviewslice, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_is_64bits(int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(base16384_err_t); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file(PyObject *, PyObject *, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file(PyObject *, PyObject *, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd(int, int, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd(int, int, int __pyx_skip_dispatch); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file_detailed(PyObject *, PyObject *, int, int __pyx_skip_dispatch); /*proto*/
@@ -2892,15 +2896,15 @@
 static const char __pyx_k__3[] = "*";
 static const char __pyx_k__6[] = "'";
 static const char __pyx_k__7[] = ")";
 static const char __pyx_k_gc[] = "gc";
 static const char __pyx_k_id[] = "id";
 static const char __pyx_k__10[] = "\376\377";
 static const char __pyx_k__11[] = "\376";
-static const char __pyx_k__50[] = "?";
+static const char __pyx_k__56[] = "?";
 static const char __pyx_k_abc[] = "abc";
 static const char __pyx_k_and[] = " and ";
 static const char __pyx_k_got[] = " (got ";
 static const char __pyx_k_inp[] = "inp";
 static const char __pyx_k_new[] = "__new__";
 static const char __pyx_k_obj[] = "obj";
 static const char __pyx_k_out[] = "out";
@@ -2983,16 +2987,18 @@
 static const char __pyx_k_pyx_vtable[] = "__pyx_vtable__";
 static const char __pyx_k_write_head[] = "write_head";
 static const char __pyx_k_MemoryError[] = "MemoryError";
 static const char __pyx_k_PickleError[] = "PickleError";
 static const char __pyx_k_collections[] = "collections";
 static const char __pyx_k_decode_file[] = "decode_file";
 static const char __pyx_k_decode_into[] = "_decode_into";
+static const char __pyx_k_decode_safe[] = "_decode_safe";
 static const char __pyx_k_encode_file[] = "encode_file";
 static const char __pyx_k_encode_into[] = "_encode_into";
+static const char __pyx_k_encode_safe[] = "_encode_safe";
 static const char __pyx_k_first_check[] = "first_check";
 static const char __pyx_k_output_size[] = "output_size";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_pyx_checksum[] = "__pyx_checksum";
 static const char __pyx_k_stringsource[] = "<stringsource>";
 static const char __pyx_k_version_info[] = "version_info";
@@ -3003,34 +3009,38 @@
 static const char __pyx_k_View_MemoryView[] = "View.MemoryView";
 static const char __pyx_k_allocate_buffer[] = "allocate_buffer";
 static const char __pyx_k_collections_abc[] = "collections.abc";
 static const char __pyx_k_current_buf_len[] = "current_buf_len";
 static const char __pyx_k_dtype_is_object[] = "dtype_is_object";
 static const char __pyx_k_pyx_PickleError[] = "__pyx_PickleError";
 static const char __pyx_k_setstate_cython[] = "__setstate_cython__";
+static const char __pyx_k_decode_file_safe[] = "decode_file_safe";
+static const char __pyx_k_decode_into_safe[] = "_decode_into_safe";
+static const char __pyx_k_encode_file_safe[] = "encode_file_safe";
+static const char __pyx_k_encode_into_safe[] = "_encode_into_safe";
 static const char __pyx_k_decode_local_file[] = "decode_local_file";
 static const char __pyx_k_encode_local_file[] = "encode_local_file";
 static const char __pyx_k_pyx_unpickle_Enum[] = "__pyx_unpickle_Enum";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_decode_fd_detailed[] = "decode_fd_detailed";
 static const char __pyx_k_encode_fd_detailed[] = "encode_fd_detailed";
 static const char __pyx_k_strided_and_direct[] = "<strided and direct>";
 static const char __pyx_k_strided_and_indirect[] = "<strided and indirect>";
 static const char __pyx_k_Invalid_shape_in_axis[] = "Invalid shape in axis ";
-static const char __pyx_k_SIMPLE_SUM_INIT_VALUE[] = "SIMPLE_SUM_INIT_VALUE";
 static const char __pyx_k_contiguous_and_direct[] = "<contiguous and direct>";
 static const char __pyx_k_Cannot_index_with_type[] = "Cannot index with type '";
 static const char __pyx_k_MemoryView_of_r_object[] = "<MemoryView of %r object>";
 static const char __pyx_k_MemoryView_of_r_at_0x_x[] = "<MemoryView of %r at 0x%x>";
 static const char __pyx_k_base16384_err_read_file[] = "base16384_err_read_file";
 static const char __pyx_k_contiguous_and_indirect[] = "<contiguous and indirect>";
 static const char __pyx_k_FLAG_SUM_CHECK_ON_REMAIN[] = "FLAG_SUM_CHECK_ON_REMAIN";
 static const char __pyx_k_base16384_err_write_file[] = "base16384_err_write_file";
 static const char __pyx_k_Dimension_d_is_not_direct[] = "Dimension %d is not direct";
+static const char __pyx_k_FLAG_DO_SUM_CHECK_FORCELY[] = "FLAG_DO_SUM_CHECK_FORCELY";
 static const char __pyx_k_Index_out_of_bounds_axis_d[] = "Index out of bounds (axis %d)";
 static const char __pyx_k_decode_local_file_detailed[] = "decode_local_file_detailed";
 static const char __pyx_k_encode_local_file_detailed[] = "encode_local_file_detailed";
 static const char __pyx_k_Step_may_not_be_zero_axis_d[] = "Step may not be zero (axis %d)";
 static const char __pyx_k_base16384_err_get_file_size[] = "base16384_err_get_file_size";
 static const char __pyx_k_itemsize_0_for_cython_array[] = "itemsize <= 0 for cython.array";
 static const char __pyx_k_base16384_err_map_input_file[] = "base16384_err_map_input_file";
@@ -3104,28 +3114,34 @@
 static void __pyx_memoryviewslice___pyx_pf_15View_dot_MemoryView_16_memoryviewslice___dealloc__(struct __pyx_memoryviewslice_obj *__pyx_v_self); /* proto */
 static PyObject *__pyx_pf___pyx_memoryviewslice___reduce_cython__(CYTHON_UNUSED struct __pyx_memoryviewslice_obj *__pyx_v_self); /* proto */
 static PyObject *__pyx_pf___pyx_memoryviewslice_2__setstate_cython__(CYTHON_UNUSED struct __pyx_memoryviewslice_obj *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v___pyx_state); /* proto */
 static PyObject *__pyx_pf_15View_dot_MemoryView___pyx_unpickle_Enum(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
 static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_encode_len(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_dlen); /* proto */
 static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_2decode_len(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_dlen, int __pyx_v_offset); /* proto */
 static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_4_encode(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_6_decode(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_8_encode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_12encode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_14decode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_16is_64bits(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_18encode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_20decode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_26encode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_28decode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag); /* proto */
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_6_encode_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_8_decode(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_12_encode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_14_encode_into_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_16_decode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_18_decode_into_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_20encode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_file_safe(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_26decode_file_safe(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_28is_64bits(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_34encode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_36decode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_38encode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_40decode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_42encode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag); /* proto */
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_44decode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag); /* proto */
 static PyObject *__pyx_tp_new_array(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 static PyObject *__pyx_tp_new_Enum(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 static PyObject *__pyx_tp_new_memoryview(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 static PyObject *__pyx_tp_new__memoryviewslice(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
@@ -3196,14 +3212,15 @@
   PyObject *__pyx_kp_u_Cannot_index_with_type;
   PyObject *__pyx_kp_s_Cannot_transpose_memoryview_with;
   PyObject *__pyx_n_s_DECBUFSZ;
   PyObject *__pyx_kp_s_Dimension_d_is_not_direct;
   PyObject *__pyx_n_s_ENCBUFSZ;
   PyObject *__pyx_n_s_Ellipsis;
   PyObject *__pyx_kp_s_Empty_shape_tuple_for_cython_arr;
+  PyObject *__pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY;
   PyObject *__pyx_n_s_FLAG_NOHEADER;
   PyObject *__pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN;
   PyObject *__pyx_kp_s_Incompatible_checksums_0x_x_vs_0;
   PyObject *__pyx_n_s_IndexError;
   PyObject *__pyx_kp_s_Index_out_of_bounds_axis_d;
   PyObject *__pyx_kp_s_Indirect_dimensions_not_supporte;
   PyObject *__pyx_kp_u_Invalid_mode_expected_c_or_fortr;
@@ -3211,26 +3228,25 @@
   PyObject *__pyx_n_s_MemoryError;
   PyObject *__pyx_kp_s_MemoryView_of_r_at_0x_x;
   PyObject *__pyx_kp_s_MemoryView_of_r_object;
   PyObject *__pyx_n_b_O;
   PyObject *__pyx_kp_u_Out_of_bounds_on_buffer_access_a;
   PyObject *__pyx_n_s_Path;
   PyObject *__pyx_n_s_PickleError;
-  PyObject *__pyx_n_s_SIMPLE_SUM_INIT_VALUE;
   PyObject *__pyx_n_s_Sequence;
   PyObject *__pyx_kp_s_Step_may_not_be_zero_axis_d;
   PyObject *__pyx_n_s_TypeError;
   PyObject *__pyx_kp_s_Unable_to_convert_item_to_object;
   PyObject *__pyx_n_s_ValueError;
   PyObject *__pyx_n_s_View_MemoryView;
   PyObject *__pyx_kp_b__10;
   PyObject *__pyx_kp_b__11;
   PyObject *__pyx_kp_u__2;
   PyObject *__pyx_n_s__3;
-  PyObject *__pyx_n_s__50;
+  PyObject *__pyx_n_s__56;
   PyObject *__pyx_kp_u__6;
   PyObject *__pyx_kp_u__7;
   PyObject *__pyx_n_s_abc;
   PyObject *__pyx_n_s_allocate_buffer;
   PyObject *__pyx_kp_u_and;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_base;
@@ -3259,33 +3275,39 @@
   PyObject *__pyx_n_s_count;
   PyObject *__pyx_n_s_current_buf_len;
   PyObject *__pyx_n_s_data;
   PyObject *__pyx_n_s_decode;
   PyObject *__pyx_n_s_decode_fd;
   PyObject *__pyx_n_s_decode_fd_detailed;
   PyObject *__pyx_n_s_decode_file;
+  PyObject *__pyx_n_s_decode_file_safe;
   PyObject *__pyx_n_s_decode_into;
+  PyObject *__pyx_n_s_decode_into_safe;
   PyObject *__pyx_n_s_decode_len;
   PyObject *__pyx_n_s_decode_local_file;
   PyObject *__pyx_n_s_decode_local_file_detailed;
+  PyObject *__pyx_n_s_decode_safe;
   PyObject *__pyx_n_s_dest;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_kp_u_disable;
   PyObject *__pyx_n_s_dlen;
   PyObject *__pyx_n_s_dtype_is_object;
   PyObject *__pyx_kp_u_enable;
   PyObject *__pyx_n_s_encode;
   PyObject *__pyx_n_s_encode_2;
   PyObject *__pyx_n_s_encode_fd;
   PyObject *__pyx_n_s_encode_fd_detailed;
   PyObject *__pyx_n_s_encode_file;
+  PyObject *__pyx_n_s_encode_file_safe;
   PyObject *__pyx_n_s_encode_into;
+  PyObject *__pyx_n_s_encode_into_safe;
   PyObject *__pyx_n_s_encode_len;
   PyObject *__pyx_n_s_encode_local_file;
   PyObject *__pyx_n_s_encode_local_file_detailed;
+  PyObject *__pyx_n_s_encode_safe;
   PyObject *__pyx_n_s_enumerate;
   PyObject *__pyx_n_s_error;
   PyObject *__pyx_n_s_first_check;
   PyObject *__pyx_n_s_flag;
   PyObject *__pyx_n_s_flags;
   PyObject *__pyx_n_s_format;
   PyObject *__pyx_n_s_fortran;
@@ -3389,37 +3411,43 @@
   PyObject *__pyx_tuple__20;
   PyObject *__pyx_tuple__21;
   PyObject *__pyx_tuple__22;
   PyObject *__pyx_tuple__23;
   PyObject *__pyx_tuple__25;
   PyObject *__pyx_tuple__27;
   PyObject *__pyx_tuple__29;
-  PyObject *__pyx_tuple__32;
-  PyObject *__pyx_tuple__35;
-  PyObject *__pyx_tuple__37;
-  PyObject *__pyx_tuple__40;
-  PyObject *__pyx_tuple__45;
+  PyObject *__pyx_tuple__34;
+  PyObject *__pyx_tuple__39;
+  PyObject *__pyx_tuple__42;
+  PyObject *__pyx_tuple__46;
+  PyObject *__pyx_tuple__51;
   PyObject *__pyx_codeobj__24;
   PyObject *__pyx_codeobj__26;
   PyObject *__pyx_codeobj__28;
   PyObject *__pyx_codeobj__30;
   PyObject *__pyx_codeobj__31;
+  PyObject *__pyx_codeobj__32;
   PyObject *__pyx_codeobj__33;
-  PyObject *__pyx_codeobj__34;
+  PyObject *__pyx_codeobj__35;
   PyObject *__pyx_codeobj__36;
+  PyObject *__pyx_codeobj__37;
   PyObject *__pyx_codeobj__38;
-  PyObject *__pyx_codeobj__39;
+  PyObject *__pyx_codeobj__40;
   PyObject *__pyx_codeobj__41;
-  PyObject *__pyx_codeobj__42;
   PyObject *__pyx_codeobj__43;
   PyObject *__pyx_codeobj__44;
-  PyObject *__pyx_codeobj__46;
+  PyObject *__pyx_codeobj__45;
   PyObject *__pyx_codeobj__47;
   PyObject *__pyx_codeobj__48;
   PyObject *__pyx_codeobj__49;
+  PyObject *__pyx_codeobj__50;
+  PyObject *__pyx_codeobj__52;
+  PyObject *__pyx_codeobj__53;
+  PyObject *__pyx_codeobj__54;
+  PyObject *__pyx_codeobj__55;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -3479,14 +3507,15 @@
   Py_CLEAR(clear_module_state->__pyx_kp_u_Cannot_index_with_type);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Cannot_transpose_memoryview_with);
   Py_CLEAR(clear_module_state->__pyx_n_s_DECBUFSZ);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Dimension_d_is_not_direct);
   Py_CLEAR(clear_module_state->__pyx_n_s_ENCBUFSZ);
   Py_CLEAR(clear_module_state->__pyx_n_s_Ellipsis);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Empty_shape_tuple_for_cython_arr);
+  Py_CLEAR(clear_module_state->__pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY);
   Py_CLEAR(clear_module_state->__pyx_n_s_FLAG_NOHEADER);
   Py_CLEAR(clear_module_state->__pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0);
   Py_CLEAR(clear_module_state->__pyx_n_s_IndexError);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Index_out_of_bounds_axis_d);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Indirect_dimensions_not_supporte);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Invalid_mode_expected_c_or_fortr);
@@ -3494,26 +3523,25 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_MemoryError);
   Py_CLEAR(clear_module_state->__pyx_kp_s_MemoryView_of_r_at_0x_x);
   Py_CLEAR(clear_module_state->__pyx_kp_s_MemoryView_of_r_object);
   Py_CLEAR(clear_module_state->__pyx_n_b_O);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Out_of_bounds_on_buffer_access_a);
   Py_CLEAR(clear_module_state->__pyx_n_s_Path);
   Py_CLEAR(clear_module_state->__pyx_n_s_PickleError);
-  Py_CLEAR(clear_module_state->__pyx_n_s_SIMPLE_SUM_INIT_VALUE);
   Py_CLEAR(clear_module_state->__pyx_n_s_Sequence);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Step_may_not_be_zero_axis_d);
   Py_CLEAR(clear_module_state->__pyx_n_s_TypeError);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Unable_to_convert_item_to_object);
   Py_CLEAR(clear_module_state->__pyx_n_s_ValueError);
   Py_CLEAR(clear_module_state->__pyx_n_s_View_MemoryView);
   Py_CLEAR(clear_module_state->__pyx_kp_b__10);
   Py_CLEAR(clear_module_state->__pyx_kp_b__11);
   Py_CLEAR(clear_module_state->__pyx_kp_u__2);
   Py_CLEAR(clear_module_state->__pyx_n_s__3);
-  Py_CLEAR(clear_module_state->__pyx_n_s__50);
+  Py_CLEAR(clear_module_state->__pyx_n_s__56);
   Py_CLEAR(clear_module_state->__pyx_kp_u__6);
   Py_CLEAR(clear_module_state->__pyx_kp_u__7);
   Py_CLEAR(clear_module_state->__pyx_n_s_abc);
   Py_CLEAR(clear_module_state->__pyx_n_s_allocate_buffer);
   Py_CLEAR(clear_module_state->__pyx_kp_u_and);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_base);
@@ -3542,33 +3570,39 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_count);
   Py_CLEAR(clear_module_state->__pyx_n_s_current_buf_len);
   Py_CLEAR(clear_module_state->__pyx_n_s_data);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_fd);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_fd_detailed);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_file);
+  Py_CLEAR(clear_module_state->__pyx_n_s_decode_file_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_into);
+  Py_CLEAR(clear_module_state->__pyx_n_s_decode_into_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_len);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_local_file);
   Py_CLEAR(clear_module_state->__pyx_n_s_decode_local_file_detailed);
+  Py_CLEAR(clear_module_state->__pyx_n_s_decode_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_dest);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_kp_u_disable);
   Py_CLEAR(clear_module_state->__pyx_n_s_dlen);
   Py_CLEAR(clear_module_state->__pyx_n_s_dtype_is_object);
   Py_CLEAR(clear_module_state->__pyx_kp_u_enable);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_fd);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_fd_detailed);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_file);
+  Py_CLEAR(clear_module_state->__pyx_n_s_encode_file_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_into);
+  Py_CLEAR(clear_module_state->__pyx_n_s_encode_into_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_len);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_local_file);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode_local_file_detailed);
+  Py_CLEAR(clear_module_state->__pyx_n_s_encode_safe);
   Py_CLEAR(clear_module_state->__pyx_n_s_enumerate);
   Py_CLEAR(clear_module_state->__pyx_n_s_error);
   Py_CLEAR(clear_module_state->__pyx_n_s_first_check);
   Py_CLEAR(clear_module_state->__pyx_n_s_flag);
   Py_CLEAR(clear_module_state->__pyx_n_s_flags);
   Py_CLEAR(clear_module_state->__pyx_n_s_format);
   Py_CLEAR(clear_module_state->__pyx_n_s_fortran);
@@ -3672,37 +3706,43 @@
   Py_CLEAR(clear_module_state->__pyx_tuple__20);
   Py_CLEAR(clear_module_state->__pyx_tuple__21);
   Py_CLEAR(clear_module_state->__pyx_tuple__22);
   Py_CLEAR(clear_module_state->__pyx_tuple__23);
   Py_CLEAR(clear_module_state->__pyx_tuple__25);
   Py_CLEAR(clear_module_state->__pyx_tuple__27);
   Py_CLEAR(clear_module_state->__pyx_tuple__29);
-  Py_CLEAR(clear_module_state->__pyx_tuple__32);
-  Py_CLEAR(clear_module_state->__pyx_tuple__35);
-  Py_CLEAR(clear_module_state->__pyx_tuple__37);
-  Py_CLEAR(clear_module_state->__pyx_tuple__40);
-  Py_CLEAR(clear_module_state->__pyx_tuple__45);
+  Py_CLEAR(clear_module_state->__pyx_tuple__34);
+  Py_CLEAR(clear_module_state->__pyx_tuple__39);
+  Py_CLEAR(clear_module_state->__pyx_tuple__42);
+  Py_CLEAR(clear_module_state->__pyx_tuple__46);
+  Py_CLEAR(clear_module_state->__pyx_tuple__51);
   Py_CLEAR(clear_module_state->__pyx_codeobj__24);
   Py_CLEAR(clear_module_state->__pyx_codeobj__26);
   Py_CLEAR(clear_module_state->__pyx_codeobj__28);
   Py_CLEAR(clear_module_state->__pyx_codeobj__30);
   Py_CLEAR(clear_module_state->__pyx_codeobj__31);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__32);
   Py_CLEAR(clear_module_state->__pyx_codeobj__33);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__34);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__35);
   Py_CLEAR(clear_module_state->__pyx_codeobj__36);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__37);
   Py_CLEAR(clear_module_state->__pyx_codeobj__38);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__39);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__40);
   Py_CLEAR(clear_module_state->__pyx_codeobj__41);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__42);
   Py_CLEAR(clear_module_state->__pyx_codeobj__43);
   Py_CLEAR(clear_module_state->__pyx_codeobj__44);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__46);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__45);
   Py_CLEAR(clear_module_state->__pyx_codeobj__47);
   Py_CLEAR(clear_module_state->__pyx_codeobj__48);
   Py_CLEAR(clear_module_state->__pyx_codeobj__49);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__50);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__52);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__53);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__54);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__55);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -3740,14 +3780,15 @@
   Py_VISIT(traverse_module_state->__pyx_kp_u_Cannot_index_with_type);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Cannot_transpose_memoryview_with);
   Py_VISIT(traverse_module_state->__pyx_n_s_DECBUFSZ);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Dimension_d_is_not_direct);
   Py_VISIT(traverse_module_state->__pyx_n_s_ENCBUFSZ);
   Py_VISIT(traverse_module_state->__pyx_n_s_Ellipsis);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Empty_shape_tuple_for_cython_arr);
+  Py_VISIT(traverse_module_state->__pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY);
   Py_VISIT(traverse_module_state->__pyx_n_s_FLAG_NOHEADER);
   Py_VISIT(traverse_module_state->__pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0);
   Py_VISIT(traverse_module_state->__pyx_n_s_IndexError);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Index_out_of_bounds_axis_d);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Indirect_dimensions_not_supporte);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Invalid_mode_expected_c_or_fortr);
@@ -3755,26 +3796,25 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_MemoryError);
   Py_VISIT(traverse_module_state->__pyx_kp_s_MemoryView_of_r_at_0x_x);
   Py_VISIT(traverse_module_state->__pyx_kp_s_MemoryView_of_r_object);
   Py_VISIT(traverse_module_state->__pyx_n_b_O);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Out_of_bounds_on_buffer_access_a);
   Py_VISIT(traverse_module_state->__pyx_n_s_Path);
   Py_VISIT(traverse_module_state->__pyx_n_s_PickleError);
-  Py_VISIT(traverse_module_state->__pyx_n_s_SIMPLE_SUM_INIT_VALUE);
   Py_VISIT(traverse_module_state->__pyx_n_s_Sequence);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Step_may_not_be_zero_axis_d);
   Py_VISIT(traverse_module_state->__pyx_n_s_TypeError);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Unable_to_convert_item_to_object);
   Py_VISIT(traverse_module_state->__pyx_n_s_ValueError);
   Py_VISIT(traverse_module_state->__pyx_n_s_View_MemoryView);
   Py_VISIT(traverse_module_state->__pyx_kp_b__10);
   Py_VISIT(traverse_module_state->__pyx_kp_b__11);
   Py_VISIT(traverse_module_state->__pyx_kp_u__2);
   Py_VISIT(traverse_module_state->__pyx_n_s__3);
-  Py_VISIT(traverse_module_state->__pyx_n_s__50);
+  Py_VISIT(traverse_module_state->__pyx_n_s__56);
   Py_VISIT(traverse_module_state->__pyx_kp_u__6);
   Py_VISIT(traverse_module_state->__pyx_kp_u__7);
   Py_VISIT(traverse_module_state->__pyx_n_s_abc);
   Py_VISIT(traverse_module_state->__pyx_n_s_allocate_buffer);
   Py_VISIT(traverse_module_state->__pyx_kp_u_and);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_base);
@@ -3803,33 +3843,39 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_count);
   Py_VISIT(traverse_module_state->__pyx_n_s_current_buf_len);
   Py_VISIT(traverse_module_state->__pyx_n_s_data);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_fd);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_fd_detailed);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_file);
+  Py_VISIT(traverse_module_state->__pyx_n_s_decode_file_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_into);
+  Py_VISIT(traverse_module_state->__pyx_n_s_decode_into_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_len);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_local_file);
   Py_VISIT(traverse_module_state->__pyx_n_s_decode_local_file_detailed);
+  Py_VISIT(traverse_module_state->__pyx_n_s_decode_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_dest);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_kp_u_disable);
   Py_VISIT(traverse_module_state->__pyx_n_s_dlen);
   Py_VISIT(traverse_module_state->__pyx_n_s_dtype_is_object);
   Py_VISIT(traverse_module_state->__pyx_kp_u_enable);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_fd);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_fd_detailed);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_file);
+  Py_VISIT(traverse_module_state->__pyx_n_s_encode_file_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_into);
+  Py_VISIT(traverse_module_state->__pyx_n_s_encode_into_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_len);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_local_file);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode_local_file_detailed);
+  Py_VISIT(traverse_module_state->__pyx_n_s_encode_safe);
   Py_VISIT(traverse_module_state->__pyx_n_s_enumerate);
   Py_VISIT(traverse_module_state->__pyx_n_s_error);
   Py_VISIT(traverse_module_state->__pyx_n_s_first_check);
   Py_VISIT(traverse_module_state->__pyx_n_s_flag);
   Py_VISIT(traverse_module_state->__pyx_n_s_flags);
   Py_VISIT(traverse_module_state->__pyx_n_s_format);
   Py_VISIT(traverse_module_state->__pyx_n_s_fortran);
@@ -3933,37 +3979,43 @@
   Py_VISIT(traverse_module_state->__pyx_tuple__20);
   Py_VISIT(traverse_module_state->__pyx_tuple__21);
   Py_VISIT(traverse_module_state->__pyx_tuple__22);
   Py_VISIT(traverse_module_state->__pyx_tuple__23);
   Py_VISIT(traverse_module_state->__pyx_tuple__25);
   Py_VISIT(traverse_module_state->__pyx_tuple__27);
   Py_VISIT(traverse_module_state->__pyx_tuple__29);
-  Py_VISIT(traverse_module_state->__pyx_tuple__32);
-  Py_VISIT(traverse_module_state->__pyx_tuple__35);
-  Py_VISIT(traverse_module_state->__pyx_tuple__37);
-  Py_VISIT(traverse_module_state->__pyx_tuple__40);
-  Py_VISIT(traverse_module_state->__pyx_tuple__45);
+  Py_VISIT(traverse_module_state->__pyx_tuple__34);
+  Py_VISIT(traverse_module_state->__pyx_tuple__39);
+  Py_VISIT(traverse_module_state->__pyx_tuple__42);
+  Py_VISIT(traverse_module_state->__pyx_tuple__46);
+  Py_VISIT(traverse_module_state->__pyx_tuple__51);
   Py_VISIT(traverse_module_state->__pyx_codeobj__24);
   Py_VISIT(traverse_module_state->__pyx_codeobj__26);
   Py_VISIT(traverse_module_state->__pyx_codeobj__28);
   Py_VISIT(traverse_module_state->__pyx_codeobj__30);
   Py_VISIT(traverse_module_state->__pyx_codeobj__31);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__32);
   Py_VISIT(traverse_module_state->__pyx_codeobj__33);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__34);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__35);
   Py_VISIT(traverse_module_state->__pyx_codeobj__36);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__37);
   Py_VISIT(traverse_module_state->__pyx_codeobj__38);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__39);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__40);
   Py_VISIT(traverse_module_state->__pyx_codeobj__41);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__42);
   Py_VISIT(traverse_module_state->__pyx_codeobj__43);
   Py_VISIT(traverse_module_state->__pyx_codeobj__44);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__46);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__45);
   Py_VISIT(traverse_module_state->__pyx_codeobj__47);
   Py_VISIT(traverse_module_state->__pyx_codeobj__48);
   Py_VISIT(traverse_module_state->__pyx_codeobj__49);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__50);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__52);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__53);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__54);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__55);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -4031,14 +4083,15 @@
 #define __pyx_kp_u_Cannot_index_with_type __pyx_mstate_global->__pyx_kp_u_Cannot_index_with_type
 #define __pyx_kp_s_Cannot_transpose_memoryview_with __pyx_mstate_global->__pyx_kp_s_Cannot_transpose_memoryview_with
 #define __pyx_n_s_DECBUFSZ __pyx_mstate_global->__pyx_n_s_DECBUFSZ
 #define __pyx_kp_s_Dimension_d_is_not_direct __pyx_mstate_global->__pyx_kp_s_Dimension_d_is_not_direct
 #define __pyx_n_s_ENCBUFSZ __pyx_mstate_global->__pyx_n_s_ENCBUFSZ
 #define __pyx_n_s_Ellipsis __pyx_mstate_global->__pyx_n_s_Ellipsis
 #define __pyx_kp_s_Empty_shape_tuple_for_cython_arr __pyx_mstate_global->__pyx_kp_s_Empty_shape_tuple_for_cython_arr
+#define __pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY __pyx_mstate_global->__pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY
 #define __pyx_n_s_FLAG_NOHEADER __pyx_mstate_global->__pyx_n_s_FLAG_NOHEADER
 #define __pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN __pyx_mstate_global->__pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN
 #define __pyx_kp_s_Incompatible_checksums_0x_x_vs_0 __pyx_mstate_global->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0
 #define __pyx_n_s_IndexError __pyx_mstate_global->__pyx_n_s_IndexError
 #define __pyx_kp_s_Index_out_of_bounds_axis_d __pyx_mstate_global->__pyx_kp_s_Index_out_of_bounds_axis_d
 #define __pyx_kp_s_Indirect_dimensions_not_supporte __pyx_mstate_global->__pyx_kp_s_Indirect_dimensions_not_supporte
 #define __pyx_kp_u_Invalid_mode_expected_c_or_fortr __pyx_mstate_global->__pyx_kp_u_Invalid_mode_expected_c_or_fortr
@@ -4046,26 +4099,25 @@
 #define __pyx_n_s_MemoryError __pyx_mstate_global->__pyx_n_s_MemoryError
 #define __pyx_kp_s_MemoryView_of_r_at_0x_x __pyx_mstate_global->__pyx_kp_s_MemoryView_of_r_at_0x_x
 #define __pyx_kp_s_MemoryView_of_r_object __pyx_mstate_global->__pyx_kp_s_MemoryView_of_r_object
 #define __pyx_n_b_O __pyx_mstate_global->__pyx_n_b_O
 #define __pyx_kp_u_Out_of_bounds_on_buffer_access_a __pyx_mstate_global->__pyx_kp_u_Out_of_bounds_on_buffer_access_a
 #define __pyx_n_s_Path __pyx_mstate_global->__pyx_n_s_Path
 #define __pyx_n_s_PickleError __pyx_mstate_global->__pyx_n_s_PickleError
-#define __pyx_n_s_SIMPLE_SUM_INIT_VALUE __pyx_mstate_global->__pyx_n_s_SIMPLE_SUM_INIT_VALUE
 #define __pyx_n_s_Sequence __pyx_mstate_global->__pyx_n_s_Sequence
 #define __pyx_kp_s_Step_may_not_be_zero_axis_d __pyx_mstate_global->__pyx_kp_s_Step_may_not_be_zero_axis_d
 #define __pyx_n_s_TypeError __pyx_mstate_global->__pyx_n_s_TypeError
 #define __pyx_kp_s_Unable_to_convert_item_to_object __pyx_mstate_global->__pyx_kp_s_Unable_to_convert_item_to_object
 #define __pyx_n_s_ValueError __pyx_mstate_global->__pyx_n_s_ValueError
 #define __pyx_n_s_View_MemoryView __pyx_mstate_global->__pyx_n_s_View_MemoryView
 #define __pyx_kp_b__10 __pyx_mstate_global->__pyx_kp_b__10
 #define __pyx_kp_b__11 __pyx_mstate_global->__pyx_kp_b__11
 #define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
 #define __pyx_n_s__3 __pyx_mstate_global->__pyx_n_s__3
-#define __pyx_n_s__50 __pyx_mstate_global->__pyx_n_s__50
+#define __pyx_n_s__56 __pyx_mstate_global->__pyx_n_s__56
 #define __pyx_kp_u__6 __pyx_mstate_global->__pyx_kp_u__6
 #define __pyx_kp_u__7 __pyx_mstate_global->__pyx_kp_u__7
 #define __pyx_n_s_abc __pyx_mstate_global->__pyx_n_s_abc
 #define __pyx_n_s_allocate_buffer __pyx_mstate_global->__pyx_n_s_allocate_buffer
 #define __pyx_kp_u_and __pyx_mstate_global->__pyx_kp_u_and
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_base __pyx_mstate_global->__pyx_n_s_base
@@ -4094,33 +4146,39 @@
 #define __pyx_n_s_count __pyx_mstate_global->__pyx_n_s_count
 #define __pyx_n_s_current_buf_len __pyx_mstate_global->__pyx_n_s_current_buf_len
 #define __pyx_n_s_data __pyx_mstate_global->__pyx_n_s_data
 #define __pyx_n_s_decode __pyx_mstate_global->__pyx_n_s_decode
 #define __pyx_n_s_decode_fd __pyx_mstate_global->__pyx_n_s_decode_fd
 #define __pyx_n_s_decode_fd_detailed __pyx_mstate_global->__pyx_n_s_decode_fd_detailed
 #define __pyx_n_s_decode_file __pyx_mstate_global->__pyx_n_s_decode_file
+#define __pyx_n_s_decode_file_safe __pyx_mstate_global->__pyx_n_s_decode_file_safe
 #define __pyx_n_s_decode_into __pyx_mstate_global->__pyx_n_s_decode_into
+#define __pyx_n_s_decode_into_safe __pyx_mstate_global->__pyx_n_s_decode_into_safe
 #define __pyx_n_s_decode_len __pyx_mstate_global->__pyx_n_s_decode_len
 #define __pyx_n_s_decode_local_file __pyx_mstate_global->__pyx_n_s_decode_local_file
 #define __pyx_n_s_decode_local_file_detailed __pyx_mstate_global->__pyx_n_s_decode_local_file_detailed
+#define __pyx_n_s_decode_safe __pyx_mstate_global->__pyx_n_s_decode_safe
 #define __pyx_n_s_dest __pyx_mstate_global->__pyx_n_s_dest
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_kp_u_disable __pyx_mstate_global->__pyx_kp_u_disable
 #define __pyx_n_s_dlen __pyx_mstate_global->__pyx_n_s_dlen
 #define __pyx_n_s_dtype_is_object __pyx_mstate_global->__pyx_n_s_dtype_is_object
 #define __pyx_kp_u_enable __pyx_mstate_global->__pyx_kp_u_enable
 #define __pyx_n_s_encode __pyx_mstate_global->__pyx_n_s_encode
 #define __pyx_n_s_encode_2 __pyx_mstate_global->__pyx_n_s_encode_2
 #define __pyx_n_s_encode_fd __pyx_mstate_global->__pyx_n_s_encode_fd
 #define __pyx_n_s_encode_fd_detailed __pyx_mstate_global->__pyx_n_s_encode_fd_detailed
 #define __pyx_n_s_encode_file __pyx_mstate_global->__pyx_n_s_encode_file
+#define __pyx_n_s_encode_file_safe __pyx_mstate_global->__pyx_n_s_encode_file_safe
 #define __pyx_n_s_encode_into __pyx_mstate_global->__pyx_n_s_encode_into
+#define __pyx_n_s_encode_into_safe __pyx_mstate_global->__pyx_n_s_encode_into_safe
 #define __pyx_n_s_encode_len __pyx_mstate_global->__pyx_n_s_encode_len
 #define __pyx_n_s_encode_local_file __pyx_mstate_global->__pyx_n_s_encode_local_file
 #define __pyx_n_s_encode_local_file_detailed __pyx_mstate_global->__pyx_n_s_encode_local_file_detailed
+#define __pyx_n_s_encode_safe __pyx_mstate_global->__pyx_n_s_encode_safe
 #define __pyx_n_s_enumerate __pyx_mstate_global->__pyx_n_s_enumerate
 #define __pyx_n_s_error __pyx_mstate_global->__pyx_n_s_error
 #define __pyx_n_s_first_check __pyx_mstate_global->__pyx_n_s_first_check
 #define __pyx_n_s_flag __pyx_mstate_global->__pyx_n_s_flag
 #define __pyx_n_s_flags __pyx_mstate_global->__pyx_n_s_flags
 #define __pyx_n_s_format __pyx_mstate_global->__pyx_n_s_format
 #define __pyx_n_s_fortran __pyx_mstate_global->__pyx_n_s_fortran
@@ -4224,37 +4282,43 @@
 #define __pyx_tuple__20 __pyx_mstate_global->__pyx_tuple__20
 #define __pyx_tuple__21 __pyx_mstate_global->__pyx_tuple__21
 #define __pyx_tuple__22 __pyx_mstate_global->__pyx_tuple__22
 #define __pyx_tuple__23 __pyx_mstate_global->__pyx_tuple__23
 #define __pyx_tuple__25 __pyx_mstate_global->__pyx_tuple__25
 #define __pyx_tuple__27 __pyx_mstate_global->__pyx_tuple__27
 #define __pyx_tuple__29 __pyx_mstate_global->__pyx_tuple__29
-#define __pyx_tuple__32 __pyx_mstate_global->__pyx_tuple__32
-#define __pyx_tuple__35 __pyx_mstate_global->__pyx_tuple__35
-#define __pyx_tuple__37 __pyx_mstate_global->__pyx_tuple__37
-#define __pyx_tuple__40 __pyx_mstate_global->__pyx_tuple__40
-#define __pyx_tuple__45 __pyx_mstate_global->__pyx_tuple__45
+#define __pyx_tuple__34 __pyx_mstate_global->__pyx_tuple__34
+#define __pyx_tuple__39 __pyx_mstate_global->__pyx_tuple__39
+#define __pyx_tuple__42 __pyx_mstate_global->__pyx_tuple__42
+#define __pyx_tuple__46 __pyx_mstate_global->__pyx_tuple__46
+#define __pyx_tuple__51 __pyx_mstate_global->__pyx_tuple__51
 #define __pyx_codeobj__24 __pyx_mstate_global->__pyx_codeobj__24
 #define __pyx_codeobj__26 __pyx_mstate_global->__pyx_codeobj__26
 #define __pyx_codeobj__28 __pyx_mstate_global->__pyx_codeobj__28
 #define __pyx_codeobj__30 __pyx_mstate_global->__pyx_codeobj__30
 #define __pyx_codeobj__31 __pyx_mstate_global->__pyx_codeobj__31
+#define __pyx_codeobj__32 __pyx_mstate_global->__pyx_codeobj__32
 #define __pyx_codeobj__33 __pyx_mstate_global->__pyx_codeobj__33
-#define __pyx_codeobj__34 __pyx_mstate_global->__pyx_codeobj__34
+#define __pyx_codeobj__35 __pyx_mstate_global->__pyx_codeobj__35
 #define __pyx_codeobj__36 __pyx_mstate_global->__pyx_codeobj__36
+#define __pyx_codeobj__37 __pyx_mstate_global->__pyx_codeobj__37
 #define __pyx_codeobj__38 __pyx_mstate_global->__pyx_codeobj__38
-#define __pyx_codeobj__39 __pyx_mstate_global->__pyx_codeobj__39
+#define __pyx_codeobj__40 __pyx_mstate_global->__pyx_codeobj__40
 #define __pyx_codeobj__41 __pyx_mstate_global->__pyx_codeobj__41
-#define __pyx_codeobj__42 __pyx_mstate_global->__pyx_codeobj__42
 #define __pyx_codeobj__43 __pyx_mstate_global->__pyx_codeobj__43
 #define __pyx_codeobj__44 __pyx_mstate_global->__pyx_codeobj__44
-#define __pyx_codeobj__46 __pyx_mstate_global->__pyx_codeobj__46
+#define __pyx_codeobj__45 __pyx_mstate_global->__pyx_codeobj__45
 #define __pyx_codeobj__47 __pyx_mstate_global->__pyx_codeobj__47
 #define __pyx_codeobj__48 __pyx_mstate_global->__pyx_codeobj__48
 #define __pyx_codeobj__49 __pyx_mstate_global->__pyx_codeobj__49
+#define __pyx_codeobj__50 __pyx_mstate_global->__pyx_codeobj__50
+#define __pyx_codeobj__52 __pyx_mstate_global->__pyx_codeobj__52
+#define __pyx_codeobj__53 __pyx_mstate_global->__pyx_codeobj__53
+#define __pyx_codeobj__54 __pyx_mstate_global->__pyx_codeobj__54
+#define __pyx_codeobj__55 __pyx_mstate_global->__pyx_codeobj__55
 /* #### Code section: module_code ### */
 
 /* "View.MemoryView":131
  *         cdef bint dtype_is_object
  * 
  *     def __cinit__(array self, tuple shape, Py_ssize_t itemsize, format not None,             # <<<<<<<<<<<<<<
  *                   mode="c", bint allocate_buffer=True):
@@ -17875,16 +17939,16 @@
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":30
- * SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE
+/* "pybase16384/backends/cython/_core.pyx":31
+ * FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY
  * 
  * cdef inline bytes ensure_bytes(object inp):             # <<<<<<<<<<<<<<
  *     if isinstance(inp, unicode):
  *         return inp.encode()
  */
 
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(PyObject *__pyx_v_inp) {
@@ -17896,33 +17960,33 @@
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("ensure_bytes", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":31
+  /* "pybase16384/backends/cython/_core.pyx":32
  * 
  * cdef inline bytes ensure_bytes(object inp):
  *     if isinstance(inp, unicode):             # <<<<<<<<<<<<<<
  *         return inp.encode()
  *     elif isinstance(inp, bytes):
  */
   __pyx_t_1 = PyUnicode_Check(__pyx_v_inp); 
   if (__pyx_t_1) {
 
-    /* "pybase16384/backends/cython/_core.pyx":32
+    /* "pybase16384/backends/cython/_core.pyx":33
  * cdef inline bytes ensure_bytes(object inp):
  *     if isinstance(inp, unicode):
  *         return inp.encode()             # <<<<<<<<<<<<<<
  *     elif isinstance(inp, bytes):
  *         return inp
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_inp, __pyx_n_s_encode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_inp, __pyx_n_s_encode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 33, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __pyx_t_4 = NULL;
     __pyx_t_5 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_3))) {
       __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
       if (likely(__pyx_t_4)) {
@@ -17934,88 +17998,88 @@
       }
     }
     #endif
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_4, NULL};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
       __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    if (!(likely(PyBytes_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_t_2))) __PYX_ERR(0, 32, __pyx_L1_error)
+    if (!(likely(PyBytes_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_t_2))) __PYX_ERR(0, 33, __pyx_L1_error)
     __pyx_r = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":31
+    /* "pybase16384/backends/cython/_core.pyx":32
  * 
  * cdef inline bytes ensure_bytes(object inp):
  *     if isinstance(inp, unicode):             # <<<<<<<<<<<<<<
  *         return inp.encode()
  *     elif isinstance(inp, bytes):
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":33
+  /* "pybase16384/backends/cython/_core.pyx":34
  *     if isinstance(inp, unicode):
  *         return inp.encode()
  *     elif isinstance(inp, bytes):             # <<<<<<<<<<<<<<
  *         return inp
  *     elif isinstance(inp, Path):
  */
   __pyx_t_1 = PyBytes_Check(__pyx_v_inp); 
   if (__pyx_t_1) {
 
-    /* "pybase16384/backends/cython/_core.pyx":34
+    /* "pybase16384/backends/cython/_core.pyx":35
  *         return inp.encode()
  *     elif isinstance(inp, bytes):
  *         return inp             # <<<<<<<<<<<<<<
  *     elif isinstance(inp, Path):
  *         return str(inp).encode()
  */
     __Pyx_XDECREF(__pyx_r);
-    if (!(likely(PyBytes_CheckExact(__pyx_v_inp))||((__pyx_v_inp) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_v_inp))) __PYX_ERR(0, 34, __pyx_L1_error)
+    if (!(likely(PyBytes_CheckExact(__pyx_v_inp))||((__pyx_v_inp) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_v_inp))) __PYX_ERR(0, 35, __pyx_L1_error)
     __Pyx_INCREF(__pyx_v_inp);
     __pyx_r = ((PyObject*)__pyx_v_inp);
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":33
+    /* "pybase16384/backends/cython/_core.pyx":34
  *     if isinstance(inp, unicode):
  *         return inp.encode()
  *     elif isinstance(inp, bytes):             # <<<<<<<<<<<<<<
  *         return inp
  *     elif isinstance(inp, Path):
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":35
+  /* "pybase16384/backends/cython/_core.pyx":36
  *     elif isinstance(inp, bytes):
  *         return inp
  *     elif isinstance(inp, Path):             # <<<<<<<<<<<<<<
  *         return str(inp).encode()
  *     else:
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 35, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_1 = PyObject_IsInstance(__pyx_v_inp, __pyx_t_2); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 35, __pyx_L1_error)
+  __pyx_t_1 = PyObject_IsInstance(__pyx_v_inp, __pyx_t_2); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   if (__pyx_t_1) {
 
-    /* "pybase16384/backends/cython/_core.pyx":36
+    /* "pybase16384/backends/cython/_core.pyx":37
  *         return inp
  *     elif isinstance(inp, Path):
  *         return str(inp).encode()             # <<<<<<<<<<<<<<
  *     else:
  *         return bytes(inp)
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __Pyx_PyObject_Str(__pyx_v_inp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 36, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_Str(__pyx_v_inp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_encode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_encode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __pyx_t_3 = NULL;
     __pyx_t_5 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_4))) {
       __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
@@ -18028,50 +18092,50 @@
       }
     }
     #endif
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_3, NULL};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 37, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     }
-    if (!(likely(PyBytes_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_t_2))) __PYX_ERR(0, 36, __pyx_L1_error)
+    if (!(likely(PyBytes_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("bytes", __pyx_t_2))) __PYX_ERR(0, 37, __pyx_L1_error)
     __pyx_r = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":35
+    /* "pybase16384/backends/cython/_core.pyx":36
  *     elif isinstance(inp, bytes):
  *         return inp
  *     elif isinstance(inp, Path):             # <<<<<<<<<<<<<<
  *         return str(inp).encode()
  *     else:
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":38
+  /* "pybase16384/backends/cython/_core.pyx":39
  *         return str(inp).encode()
  *     else:
  *         return bytes(inp)             # <<<<<<<<<<<<<<
  * 
  * cdef inline uint8_t PyFile_Check(object file):
  */
   /*else*/ {
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyBytes_Type)), __pyx_v_inp); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyBytes_Type)), __pyx_v_inp); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __pyx_r = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
     goto __pyx_L0;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":30
- * SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE
+  /* "pybase16384/backends/cython/_core.pyx":31
+ * FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY
  * 
  * cdef inline bytes ensure_bytes(object inp):             # <<<<<<<<<<<<<<
  *     if isinstance(inp, unicode):
  *         return inp.encode()
  */
 
   /* function exit code */
@@ -18083,28 +18147,28 @@
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":40
+/* "pybase16384/backends/cython/_core.pyx":41
  *         return bytes(inp)
  * 
  * cdef inline uint8_t PyFile_Check(object file):             # <<<<<<<<<<<<<<
  *     if PyObject_HasAttrString(file, "read") and PyObject_HasAttrString(file, "write") and PyObject_HasAttrString(file,
  *                                                                                                                  "seek"):
  */
 
 static CYTHON_INLINE uint8_t __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(PyObject *__pyx_v_file) {
   uint8_t __pyx_r;
   int __pyx_t_1;
   int __pyx_t_2;
 
-  /* "pybase16384/backends/cython/_core.pyx":41
+  /* "pybase16384/backends/cython/_core.pyx":42
  * 
  * cdef inline uint8_t PyFile_Check(object file):
  *     if PyObject_HasAttrString(file, "read") and PyObject_HasAttrString(file, "write") and PyObject_HasAttrString(file,             # <<<<<<<<<<<<<<
  *                                                                                                                  "seek"):
  *         return 1
  */
   __pyx_t_2 = PyObject_HasAttrString(__pyx_v_file, ((char const *)"read"));
@@ -18120,57 +18184,57 @@
     goto __pyx_L4_bool_binop_done;
   }
   __pyx_t_2 = PyObject_HasAttrString(__pyx_v_file, ((char const *)"seek"));
   __pyx_t_1 = __pyx_t_2;
   __pyx_L4_bool_binop_done:;
   if (__pyx_t_1) {
 
-    /* "pybase16384/backends/cython/_core.pyx":43
+    /* "pybase16384/backends/cython/_core.pyx":44
  *     if PyObject_HasAttrString(file, "read") and PyObject_HasAttrString(file, "write") and PyObject_HasAttrString(file,
  *                                                                                                                  "seek"):
  *         return 1             # <<<<<<<<<<<<<<
  *     return 0
  * 
  */
     __pyx_r = 1;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":41
+    /* "pybase16384/backends/cython/_core.pyx":42
  * 
  * cdef inline uint8_t PyFile_Check(object file):
  *     if PyObject_HasAttrString(file, "read") and PyObject_HasAttrString(file, "write") and PyObject_HasAttrString(file,             # <<<<<<<<<<<<<<
  *                                                                                                                  "seek"):
  *         return 1
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":44
+  /* "pybase16384/backends/cython/_core.pyx":45
  *                                                                                                                  "seek"):
  *         return 1
  *     return 0             # <<<<<<<<<<<<<<
  * 
  * cpdef inline int encode_len(int dlen) nogil:
  */
   __pyx_r = 0;
   goto __pyx_L0;
 
-  /* "pybase16384/backends/cython/_core.pyx":40
+  /* "pybase16384/backends/cython/_core.pyx":41
  *         return bytes(inp)
  * 
  * cdef inline uint8_t PyFile_Check(object file):             # <<<<<<<<<<<<<<
  *     if PyObject_HasAttrString(file, "read") and PyObject_HasAttrString(file, "write") and PyObject_HasAttrString(file,
  *                                                                                                                  "seek"):
  */
 
   /* function exit code */
   __pyx_L0:;
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":46
+/* "pybase16384/backends/cython/_core.pyx":47
  *     return 0
  * 
  * cpdef inline int encode_len(int dlen) nogil:             # <<<<<<<<<<<<<<
  *     return b14_encode_len(dlen)
  * 
  */
 
@@ -18180,25 +18244,25 @@
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_encode_len(int __pyx_v_dlen, CYTHON_UNUSED int __pyx_skip_dispatch) {
   int __pyx_r;
 
-  /* "pybase16384/backends/cython/_core.pyx":47
+  /* "pybase16384/backends/cython/_core.pyx":48
  * 
  * cpdef inline int encode_len(int dlen) nogil:
  *     return b14_encode_len(dlen)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:
  */
   __pyx_r = base16384_encode_len(__pyx_v_dlen);
   goto __pyx_L0;
 
-  /* "pybase16384/backends/cython/_core.pyx":46
+  /* "pybase16384/backends/cython/_core.pyx":47
  *     return 0
  * 
  * cpdef inline int encode_len(int dlen) nogil:             # <<<<<<<<<<<<<<
  *     return b14_encode_len(dlen)
  * 
  */
 
@@ -18257,31 +18321,31 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dlen)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 46, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 47, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_len") < 0)) __PYX_ERR(0, 46, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_len") < 0)) __PYX_ERR(0, 47, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_dlen = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_dlen == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 46, __pyx_L3_error)
+    __pyx_v_dlen = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_dlen == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 47, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_len", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 46, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_len", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 47, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
@@ -18310,16 +18374,16 @@
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_len", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_len(__pyx_v_dlen, 0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 46, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_len(__pyx_v_dlen, 0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -18328,15 +18392,15 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":49
+/* "pybase16384/backends/cython/_core.pyx":50
  *     return b14_encode_len(dlen)
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:             # <<<<<<<<<<<<<<
  *     return b14_decode_len(dlen, offset)
  * 
  */
 
@@ -18346,25 +18410,25 @@
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_decode_len(int __pyx_v_dlen, int __pyx_v_offset, CYTHON_UNUSED int __pyx_skip_dispatch) {
   int __pyx_r;
 
-  /* "pybase16384/backends/cython/_core.pyx":50
+  /* "pybase16384/backends/cython/_core.pyx":51
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:
  *     return b14_decode_len(dlen, offset)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):
  */
   __pyx_r = base16384_decode_len(__pyx_v_dlen, __pyx_v_offset);
   goto __pyx_L0;
 
-  /* "pybase16384/backends/cython/_core.pyx":49
+  /* "pybase16384/backends/cython/_core.pyx":50
  *     return b14_encode_len(dlen)
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:             # <<<<<<<<<<<<<<
  *     return b14_decode_len(dlen, offset)
  * 
  */
 
@@ -18426,43 +18490,43 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dlen)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 49, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 50, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_offset)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 49, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 50, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_len", 1, 2, 2, 1); __PYX_ERR(0, 49, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_len", 1, 2, 2, 1); __PYX_ERR(0, 50, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_len") < 0)) __PYX_ERR(0, 49, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_len") < 0)) __PYX_ERR(0, 50, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_dlen = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_dlen == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 49, __pyx_L3_error)
-    __pyx_v_offset = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_offset == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 49, __pyx_L3_error)
+    __pyx_v_dlen = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_dlen == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 50, __pyx_L3_error)
+    __pyx_v_offset = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_offset == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 50, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_len", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 49, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_len", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 50, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
@@ -18491,16 +18555,16 @@
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_len", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_len(__pyx_v_dlen, __pyx_v_offset, 0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 49, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_len(__pyx_v_dlen, __pyx_v_offset, 0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -18509,15 +18573,15 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":52
+/* "pybase16384/backends/cython/_core.pyx":53
  *     return b14_decode_len(dlen, offset)
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  */
 
@@ -18549,70 +18613,70 @@
   PyObject *__pyx_t_12 = NULL;
   PyObject *__pyx_t_13 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_encode", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":53
+  /* "pybase16384/backends/cython/_core.pyx":54
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):
  *     cdef size_t length = data.shape[0]             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
  */
   __pyx_v_length = (__pyx_v_data.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":54
+  /* "pybase16384/backends/cython/_core.pyx":55
  * cpdef inline bytes _encode(const uint8_t[::1] data):
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16             # <<<<<<<<<<<<<<
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  */
   __pyx_v_output_size = (((size_t)base16384_encode_len(((int)__pyx_v_length))) + 16);
 
-  /* "pybase16384/backends/cython/_core.pyx":55
+  /* "pybase16384/backends/cython/_core.pyx":56
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
  *     if output_buf == NULL:
  *         raise MemoryError
  */
   __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
 
-  /* "pybase16384/backends/cython/_core.pyx":56
+  /* "pybase16384/backends/cython/_core.pyx":57
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef int count
  */
   __pyx_t_1 = (__pyx_v_output_buf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":57
+    /* "pybase16384/backends/cython/_core.pyx":58
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef int count
  *     with nogil:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 57, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 58, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":56
+    /* "pybase16384/backends/cython/_core.pyx":57
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef int count
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":59
+  /* "pybase16384/backends/cython/_core.pyx":60
  *         raise MemoryError
  *     cdef int count
  *     with nogil:             # <<<<<<<<<<<<<<
  *         count = b14_encode(<const char*> &data[0],
  *                                         <int>length,
  */
   {
@@ -18620,34 +18684,34 @@
       PyThreadState *_save;
       _save = NULL;
       Py_UNBLOCK_THREADS
       __Pyx_FastGIL_Remember();
       #endif
       /*try:*/ {
 
-        /* "pybase16384/backends/cython/_core.pyx":60
+        /* "pybase16384/backends/cython/_core.pyx":61
  *     cdef int count
  *     with nogil:
  *         count = b14_encode(<const char*> &data[0],             # <<<<<<<<<<<<<<
  *                                         <int>length,
  *                                         output_buf) # encode
  */
         __pyx_t_2 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":62
+        /* "pybase16384/backends/cython/_core.pyx":63
  *         count = b14_encode(<const char*> &data[0],
  *                                         <int>length,
  *                                         output_buf) # encode             # <<<<<<<<<<<<<<
  *     try:
  *         return <bytes>output_buf[:count]
  */
         __pyx_v_count = base16384_encode(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_2)) ))))), ((int)__pyx_v_length), __pyx_v_output_buf);
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":59
+      /* "pybase16384/backends/cython/_core.pyx":60
  *         raise MemoryError
  *     cdef int count
  *     with nogil:             # <<<<<<<<<<<<<<
  *         count = b14_encode(<const char*> &data[0],
  *                                         <int>length,
  */
       /*finally:*/ {
@@ -18658,45 +18722,45 @@
           #endif
           goto __pyx_L6;
         }
         __pyx_L6:;
       }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":63
+  /* "pybase16384/backends/cython/_core.pyx":64
  *                                         <int>length,
  *                                         output_buf) # encode
  *     try:             # <<<<<<<<<<<<<<
  *         return <bytes>output_buf[:count]
  *     finally:
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":64
+    /* "pybase16384/backends/cython/_core.pyx":65
  *                                         output_buf) # encode
  *     try:
  *         return <bytes>output_buf[:count]             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(output_buf)
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 64, __pyx_L8_error)
+    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L8_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_INCREF(((PyObject*)__pyx_t_3));
     __pyx_r = ((PyObject*)__pyx_t_3);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     goto __pyx_L7_return;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":66
+  /* "pybase16384/backends/cython/_core.pyx":67
  *         return <bytes>output_buf[:count]
  *     finally:
  *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
  * 
- * cpdef inline bytes _decode(const uint8_t[::1] data):
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):
  */
   /*finally:*/ {
     __pyx_L8_error:;
     /*exception exit:*/{
       __Pyx_PyThreadState_declare
       __Pyx_PyThreadState_assign
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
@@ -18733,15 +18797,15 @@
       PyMem_Free(__pyx_v_output_buf);
       __pyx_r = __pyx_t_13;
       __pyx_t_13 = 0;
       goto __pyx_L0;
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":52
+  /* "pybase16384/backends/cython/_core.pyx":53
  *     return b14_decode_len(dlen, offset)
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  */
 
@@ -18806,31 +18870,31 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 52, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 53, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode") < 0)) __PYX_ERR(0, 52, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode") < 0)) __PYX_ERR(0, 53, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 52, __pyx_L3_error)
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 53, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("_encode", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 52, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("_encode", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 53, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
@@ -18860,16 +18924,16 @@
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_encode", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 52, __pyx_L1_error) }
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L1_error)
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 53, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -18878,23 +18942,392 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":68
+/* "pybase16384/backends/cython/_core.pyx":69
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ */
+
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_encode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__encode_safe(__Pyx_memviewslice __pyx_v_data, CYTHON_UNUSED int __pyx_skip_dispatch) {
+  size_t __pyx_v_length;
+  size_t __pyx_v_output_size;
+  char *__pyx_v_output_buf;
+  int __pyx_v_count;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  Py_ssize_t __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  int __pyx_t_5;
+  char const *__pyx_t_6;
+  PyObject *__pyx_t_7 = NULL;
+  PyObject *__pyx_t_8 = NULL;
+  PyObject *__pyx_t_9 = NULL;
+  PyObject *__pyx_t_10 = NULL;
+  PyObject *__pyx_t_11 = NULL;
+  PyObject *__pyx_t_12 = NULL;
+  PyObject *__pyx_t_13 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_encode_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":70
+ * 
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):
+ *     cdef size_t length = data.shape[0]             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+ */
+  __pyx_v_length = (__pyx_v_data.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":71
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)             # <<<<<<<<<<<<<<
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ */
+  __pyx_v_output_size = ((size_t)base16384_encode_len(((int)__pyx_v_length)));
+
+  /* "pybase16384/backends/cython/_core.pyx":72
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
+ *     if output_buf == NULL:
+ *         raise MemoryError
+ */
+  __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
+
+  /* "pybase16384/backends/cython/_core.pyx":73
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef int count
+ */
+  __pyx_t_1 = (__pyx_v_output_buf == NULL);
+  if (unlikely(__pyx_t_1)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":74
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ *         raise MemoryError             # <<<<<<<<<<<<<<
+ *     cdef int count
+ *     with nogil:
+ */
+    PyErr_NoMemory(); __PYX_ERR(0, 74, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":73
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ *     cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef int count
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":76
+ *         raise MemoryError
+ *     cdef int count
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         count = b14_encode_safe(<const char*> &data[0],
+ *                                         <int>length,
+ */
+  {
+      #ifdef WITH_THREAD
+      PyThreadState *_save;
+      _save = NULL;
+      Py_UNBLOCK_THREADS
+      __Pyx_FastGIL_Remember();
+      #endif
+      /*try:*/ {
+
+        /* "pybase16384/backends/cython/_core.pyx":77
+ *     cdef int count
+ *     with nogil:
+ *         count = b14_encode_safe(<const char*> &data[0],             # <<<<<<<<<<<<<<
+ *                                         <int>length,
+ *                                         output_buf) # encode
+ */
+        __pyx_t_2 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":79
+ *         count = b14_encode_safe(<const char*> &data[0],
+ *                                         <int>length,
+ *                                         output_buf) # encode             # <<<<<<<<<<<<<<
+ *     try:
+ *         return <bytes>output_buf[:count]
+ */
+        __pyx_v_count = base16384_encode_safe(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_2)) ))))), ((int)__pyx_v_length), __pyx_v_output_buf);
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":76
+ *         raise MemoryError
+ *     cdef int count
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         count = b14_encode_safe(<const char*> &data[0],
+ *                                         <int>length,
+ */
+      /*finally:*/ {
+        /*normal exit:*/{
+          #ifdef WITH_THREAD
+          __Pyx_FastGIL_Forget();
+          Py_BLOCK_THREADS
+          #endif
+          goto __pyx_L6;
+        }
+        __pyx_L6:;
+      }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":80
+ *                                         <int>length,
+ *                                         output_buf) # encode
+ *     try:             # <<<<<<<<<<<<<<
+ *         return <bytes>output_buf[:count]
+ *     finally:
+ */
+  /*try:*/ {
+
+    /* "pybase16384/backends/cython/_core.pyx":81
+ *                                         output_buf) # encode
+ *     try:
+ *         return <bytes>output_buf[:count]             # <<<<<<<<<<<<<<
+ *     finally:
+ *         PyMem_Free(output_buf)
+ */
+    __Pyx_XDECREF(__pyx_r);
+    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 81, __pyx_L8_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_INCREF(((PyObject*)__pyx_t_3));
+    __pyx_r = ((PyObject*)__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    goto __pyx_L7_return;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":83
+ *         return <bytes>output_buf[:count]
+ *     finally:
+ *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
+ * 
+ * cpdef inline bytes _decode(const uint8_t[::1] data):
+ */
+  /*finally:*/ {
+    __pyx_L8_error:;
+    /*exception exit:*/{
+      __Pyx_PyThreadState_declare
+      __Pyx_PyThreadState_assign
+      __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (PY_MAJOR_VERSION >= 3) __Pyx_ExceptionSwap(&__pyx_t_10, &__pyx_t_11, &__pyx_t_12);
+      if ((PY_MAJOR_VERSION < 3) || unlikely(__Pyx_GetException(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9) < 0)) __Pyx_ErrFetch(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9);
+      __Pyx_XGOTREF(__pyx_t_7);
+      __Pyx_XGOTREF(__pyx_t_8);
+      __Pyx_XGOTREF(__pyx_t_9);
+      __Pyx_XGOTREF(__pyx_t_10);
+      __Pyx_XGOTREF(__pyx_t_11);
+      __Pyx_XGOTREF(__pyx_t_12);
+      __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
+      {
+        PyMem_Free(__pyx_v_output_buf);
+      }
+      if (PY_MAJOR_VERSION >= 3) {
+        __Pyx_XGIVEREF(__pyx_t_10);
+        __Pyx_XGIVEREF(__pyx_t_11);
+        __Pyx_XGIVEREF(__pyx_t_12);
+        __Pyx_ExceptionReset(__pyx_t_10, __pyx_t_11, __pyx_t_12);
+      }
+      __Pyx_XGIVEREF(__pyx_t_7);
+      __Pyx_XGIVEREF(__pyx_t_8);
+      __Pyx_XGIVEREF(__pyx_t_9);
+      __Pyx_ErrRestore(__pyx_t_7, __pyx_t_8, __pyx_t_9);
+      __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
+      __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
+      goto __pyx_L1_error;
+    }
+    __pyx_L7_return: {
+      __pyx_t_13 = __pyx_r;
+      __pyx_r = 0;
+      PyMem_Free(__pyx_v_output_buf);
+      __pyx_r = __pyx_t_13;
+      __pyx_t_13 = 0;
+      goto __pyx_L0;
+    }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":69
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = 0;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_encode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_6_encode_safe, "_encode_safe(const uint8_t[::1] data) -> bytes");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_7_encode_safe = {"_encode_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_7_encode_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_6_encode_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_encode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[1] = {0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("_encode_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode_safe") < 0)) __PYX_ERR(0, 69, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+    }
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 69, __pyx_L3_error)
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("_encode_safe", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 69, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_6_encode_safe(__pyx_self, __pyx_v_data);
+
+  /* function exit code */
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_6_encode_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_encode_safe", 1);
+  __Pyx_XDECREF(__pyx_r);
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 69, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode_safe(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":85
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bytes _decode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_decode(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_decode(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__decode(__Pyx_memviewslice __pyx_v_data, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -18918,70 +19351,70 @@
   PyObject *__pyx_t_12 = NULL;
   PyObject *__pyx_t_13 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_decode", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":69
+  /* "pybase16384/backends/cython/_core.pyx":86
  * 
  * cpdef inline bytes _decode(const uint8_t[::1] data):
  *     cdef size_t length = data.shape[0]             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  */
   __pyx_v_length = (__pyx_v_data.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":70
+  /* "pybase16384/backends/cython/_core.pyx":87
  * cpdef inline bytes _decode(const uint8_t[::1] data):
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16             # <<<<<<<<<<<<<<
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  */
   __pyx_v_output_size = (((size_t)base16384_decode_len(((int)__pyx_v_length), 0)) + 16);
 
-  /* "pybase16384/backends/cython/_core.pyx":71
+  /* "pybase16384/backends/cython/_core.pyx":88
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
  *     if output_buf == NULL:
  *         raise MemoryError
  */
   __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
 
-  /* "pybase16384/backends/cython/_core.pyx":72
+  /* "pybase16384/backends/cython/_core.pyx":89
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef int count
  */
   __pyx_t_1 = (__pyx_v_output_buf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":73
+    /* "pybase16384/backends/cython/_core.pyx":90
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef int count
  *     with nogil:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 73, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 90, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":72
+    /* "pybase16384/backends/cython/_core.pyx":89
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef int count
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":75
+  /* "pybase16384/backends/cython/_core.pyx":92
  *         raise MemoryError
  *     cdef int count
  *     with nogil:             # <<<<<<<<<<<<<<
  *         count = b14_decode(<const char *> &data[0],
  *                                         <int> length,
  */
   {
@@ -18989,34 +19422,34 @@
       PyThreadState *_save;
       _save = NULL;
       Py_UNBLOCK_THREADS
       __Pyx_FastGIL_Remember();
       #endif
       /*try:*/ {
 
-        /* "pybase16384/backends/cython/_core.pyx":76
+        /* "pybase16384/backends/cython/_core.pyx":93
  *     cdef int count
  *     with nogil:
  *         count = b14_decode(<const char *> &data[0],             # <<<<<<<<<<<<<<
  *                                         <int> length,
  *                                         output_buf)  # decode
  */
         __pyx_t_2 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":78
+        /* "pybase16384/backends/cython/_core.pyx":95
  *         count = b14_decode(<const char *> &data[0],
  *                                         <int> length,
  *                                         output_buf)  # decode             # <<<<<<<<<<<<<<
  *     try:
  *         return <bytes> output_buf[:count]
  */
         __pyx_v_count = base16384_decode(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_2)) ))))), ((int)__pyx_v_length), __pyx_v_output_buf);
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":75
+      /* "pybase16384/backends/cython/_core.pyx":92
  *         raise MemoryError
  *     cdef int count
  *     with nogil:             # <<<<<<<<<<<<<<
  *         count = b14_decode(<const char *> &data[0],
  *                                         <int> length,
  */
       /*finally:*/ {
@@ -19027,45 +19460,45 @@
           #endif
           goto __pyx_L6;
         }
         __pyx_L6:;
       }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":79
+  /* "pybase16384/backends/cython/_core.pyx":96
  *                                         <int> length,
  *                                         output_buf)  # decode
  *     try:             # <<<<<<<<<<<<<<
  *         return <bytes> output_buf[:count]
  *     finally:
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":80
+    /* "pybase16384/backends/cython/_core.pyx":97
  *                                         output_buf)  # decode
  *     try:
  *         return <bytes> output_buf[:count]             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(output_buf)
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L8_error)
+    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 97, __pyx_L8_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_INCREF(((PyObject*)__pyx_t_3));
     __pyx_r = ((PyObject*)__pyx_t_3);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     goto __pyx_L7_return;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":82
+  /* "pybase16384/backends/cython/_core.pyx":99
  *         return <bytes> output_buf[:count]
  *     finally:
  *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
  * 
- * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):
  */
   /*finally:*/ {
     __pyx_L8_error:;
     /*exception exit:*/{
       __Pyx_PyThreadState_declare
       __Pyx_PyThreadState_assign
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
@@ -19102,15 +19535,15 @@
       PyMem_Free(__pyx_v_output_buf);
       __pyx_r = __pyx_t_13;
       __pyx_t_13 = 0;
       goto __pyx_L0;
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":68
+  /* "pybase16384/backends/cython/_core.pyx":85
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bytes _decode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  */
 
@@ -19122,24 +19555,24 @@
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_decode(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_decode(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_6_decode, "_decode(const uint8_t[::1] data) -> bytes");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_7_decode = {"_decode", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_7_decode, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_6_decode};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_7_decode(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_8_decode, "_decode(const uint8_t[::1] data) -> bytes");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_9_decode = {"_decode", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_9_decode, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_8_decode};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_decode(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
@@ -19175,70 +19608,70 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 68, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 85, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode") < 0)) __PYX_ERR(0, 68, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode") < 0)) __PYX_ERR(0, 85, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 68, __pyx_L3_error)
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 85, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("_decode", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 68, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("_decode", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 85, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   __Pyx_AddTraceback("pybase16384.backends.cython._core._decode", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_6_decode(__pyx_self, __pyx_v_data);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_8_decode(__pyx_self, __pyx_v_data);
 
   /* function exit code */
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_6_decode(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_8_decode(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_decode", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 68, __pyx_L1_error) }
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 85, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 85, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -19247,23 +19680,392 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":84
+/* "pybase16384/backends/cython/_core.pyx":101
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ */
+
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core__decode_safe(__Pyx_memviewslice __pyx_v_data, CYTHON_UNUSED int __pyx_skip_dispatch) {
+  size_t __pyx_v_length;
+  size_t __pyx_v_output_size;
+  char *__pyx_v_output_buf;
+  int __pyx_v_count;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  Py_ssize_t __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  int __pyx_t_5;
+  char const *__pyx_t_6;
+  PyObject *__pyx_t_7 = NULL;
+  PyObject *__pyx_t_8 = NULL;
+  PyObject *__pyx_t_9 = NULL;
+  PyObject *__pyx_t_10 = NULL;
+  PyObject *__pyx_t_11 = NULL;
+  PyObject *__pyx_t_12 = NULL;
+  PyObject *__pyx_t_13 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_decode_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":102
+ * 
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):
+ *     cdef size_t length = data.shape[0]             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ */
+  __pyx_v_length = (__pyx_v_data.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":103
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)             # <<<<<<<<<<<<<<
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ */
+  __pyx_v_output_size = ((size_t)base16384_decode_len(((int)__pyx_v_length), 0));
+
+  /* "pybase16384/backends/cython/_core.pyx":104
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
+ *     if output_buf == NULL:
+ *         raise MemoryError
+ */
+  __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
+
+  /* "pybase16384/backends/cython/_core.pyx":105
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef int count
+ */
+  __pyx_t_1 = (__pyx_v_output_buf == NULL);
+  if (unlikely(__pyx_t_1)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":106
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ *         raise MemoryError             # <<<<<<<<<<<<<<
+ *     cdef int count
+ *     with nogil:
+ */
+    PyErr_NoMemory(); __PYX_ERR(0, 106, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":105
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef int count
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":108
+ *         raise MemoryError
+ *     cdef int count
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         count = b14_decode_safe(<const char *> &data[0],
+ *                                         <int> length,
+ */
+  {
+      #ifdef WITH_THREAD
+      PyThreadState *_save;
+      _save = NULL;
+      Py_UNBLOCK_THREADS
+      __Pyx_FastGIL_Remember();
+      #endif
+      /*try:*/ {
+
+        /* "pybase16384/backends/cython/_core.pyx":109
+ *     cdef int count
+ *     with nogil:
+ *         count = b14_decode_safe(<const char *> &data[0],             # <<<<<<<<<<<<<<
+ *                                         <int> length,
+ *                                         output_buf)  # decode
+ */
+        __pyx_t_2 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":111
+ *         count = b14_decode_safe(<const char *> &data[0],
+ *                                         <int> length,
+ *                                         output_buf)  # decode             # <<<<<<<<<<<<<<
+ *     try:
+ *         return <bytes> output_buf[:count]
+ */
+        __pyx_v_count = base16384_decode_safe(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_2)) ))))), ((int)__pyx_v_length), __pyx_v_output_buf);
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":108
+ *         raise MemoryError
+ *     cdef int count
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         count = b14_decode_safe(<const char *> &data[0],
+ *                                         <int> length,
+ */
+      /*finally:*/ {
+        /*normal exit:*/{
+          #ifdef WITH_THREAD
+          __Pyx_FastGIL_Forget();
+          Py_BLOCK_THREADS
+          #endif
+          goto __pyx_L6;
+        }
+        __pyx_L6:;
+      }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":112
+ *                                         <int> length,
+ *                                         output_buf)  # decode
+ *     try:             # <<<<<<<<<<<<<<
+ *         return <bytes> output_buf[:count]
+ *     finally:
+ */
+  /*try:*/ {
+
+    /* "pybase16384/backends/cython/_core.pyx":113
+ *                                         output_buf)  # decode
+ *     try:
+ *         return <bytes> output_buf[:count]             # <<<<<<<<<<<<<<
+ *     finally:
+ *         PyMem_Free(output_buf)
+ */
+    __Pyx_XDECREF(__pyx_r);
+    __pyx_t_3 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 113, __pyx_L8_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_INCREF(((PyObject*)__pyx_t_3));
+    __pyx_r = ((PyObject*)__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    goto __pyx_L7_return;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":115
+ *         return <bytes> output_buf[:count]
+ *     finally:
+ *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
+ * 
+ * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ */
+  /*finally:*/ {
+    __pyx_L8_error:;
+    /*exception exit:*/{
+      __Pyx_PyThreadState_declare
+      __Pyx_PyThreadState_assign
+      __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (PY_MAJOR_VERSION >= 3) __Pyx_ExceptionSwap(&__pyx_t_10, &__pyx_t_11, &__pyx_t_12);
+      if ((PY_MAJOR_VERSION < 3) || unlikely(__Pyx_GetException(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9) < 0)) __Pyx_ErrFetch(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9);
+      __Pyx_XGOTREF(__pyx_t_7);
+      __Pyx_XGOTREF(__pyx_t_8);
+      __Pyx_XGOTREF(__pyx_t_9);
+      __Pyx_XGOTREF(__pyx_t_10);
+      __Pyx_XGOTREF(__pyx_t_11);
+      __Pyx_XGOTREF(__pyx_t_12);
+      __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
+      {
+        PyMem_Free(__pyx_v_output_buf);
+      }
+      if (PY_MAJOR_VERSION >= 3) {
+        __Pyx_XGIVEREF(__pyx_t_10);
+        __Pyx_XGIVEREF(__pyx_t_11);
+        __Pyx_XGIVEREF(__pyx_t_12);
+        __Pyx_ExceptionReset(__pyx_t_10, __pyx_t_11, __pyx_t_12);
+      }
+      __Pyx_XGIVEREF(__pyx_t_7);
+      __Pyx_XGIVEREF(__pyx_t_8);
+      __Pyx_XGIVEREF(__pyx_t_9);
+      __Pyx_ErrRestore(__pyx_t_7, __pyx_t_8, __pyx_t_9);
+      __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
+      __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
+      goto __pyx_L1_error;
+    }
+    __pyx_L7_return: {
+      __pyx_t_13 = __pyx_r;
+      __pyx_r = 0;
+      PyMem_Free(__pyx_v_output_buf);
+      __pyx_r = __pyx_t_13;
+      __pyx_t_13 = 0;
+      goto __pyx_L0;
+    }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":101
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = 0;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_10_decode_safe, "_decode_safe(const uint8_t[::1] data) -> bytes");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_11_decode_safe = {"_decode_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_10_decode_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[1] = {0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("_decode_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 101, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode_safe") < 0)) __PYX_ERR(0, 101, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+    }
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 101, __pyx_L3_error)
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("_decode_safe", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 101, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_safe(__pyx_self, __pyx_v_data);
+
+  /* function exit code */
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_decode_safe", 1);
+  __Pyx_XDECREF(__pyx_r);
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 101, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode_safe(__pyx_v_data, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 101, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":117
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_encode_into(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_13_encode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into(__Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -19277,74 +20079,74 @@
   Py_ssize_t __pyx_t_3;
   Py_ssize_t __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_encode_into", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":85
+  /* "pybase16384/backends/cython/_core.pyx":118
  * 
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  *     cdef size_t input_size = data.shape[0]             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  *     cdef size_t output_buf_size = dest.shape[0]
  */
   __pyx_v_input_size = (__pyx_v_data.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":86
+  /* "pybase16384/backends/cython/_core.pyx":119
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)             # <<<<<<<<<<<<<<
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:
  */
   __pyx_v_output_size = ((size_t)base16384_encode_len(((int)__pyx_v_input_size)));
 
-  /* "pybase16384/backends/cython/_core.pyx":87
+  /* "pybase16384/backends/cython/_core.pyx":120
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  *     cdef size_t output_buf_size = dest.shape[0]             # <<<<<<<<<<<<<<
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  */
   __pyx_v_output_buf_size = (__pyx_v_dest.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":88
+  /* "pybase16384/backends/cython/_core.pyx":121
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  */
   __pyx_t_1 = (__pyx_v_output_buf_size < __pyx_v_output_size);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":89
+    /* "pybase16384/backends/cython/_core.pyx":122
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")             # <<<<<<<<<<<<<<
  *     with nogil:
  *         return b14_encode(<const char *> &data[0],
  */
-    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 89, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 122, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_Raise(__pyx_t_2, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __PYX_ERR(0, 89, __pyx_L1_error)
+    __PYX_ERR(0, 122, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":88
+    /* "pybase16384/backends/cython/_core.pyx":121
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":90
+  /* "pybase16384/backends/cython/_core.pyx":123
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:             # <<<<<<<<<<<<<<
  *         return b14_encode(<const char *> &data[0],
  *                                 <int> input_size,
  */
   {
@@ -19352,44 +20154,44 @@
       PyThreadState *_save;
       _save = NULL;
       Py_UNBLOCK_THREADS
       __Pyx_FastGIL_Remember();
       #endif
       /*try:*/ {
 
-        /* "pybase16384/backends/cython/_core.pyx":91
+        /* "pybase16384/backends/cython/_core.pyx":124
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  *         return b14_encode(<const char *> &data[0],             # <<<<<<<<<<<<<<
  *                                 <int> input_size,
  *                                 <char *> &dest[0])
  */
         __pyx_t_3 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":93
+        /* "pybase16384/backends/cython/_core.pyx":126
  *         return b14_encode(<const char *> &data[0],
  *                                 <int> input_size,
  *                                 <char *> &dest[0])             # <<<<<<<<<<<<<<
  * 
- * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  */
         __pyx_t_4 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":91
+        /* "pybase16384/backends/cython/_core.pyx":124
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  *         return b14_encode(<const char *> &data[0],             # <<<<<<<<<<<<<<
  *                                 <int> input_size,
  *                                 <char *> &dest[0])
  */
         __pyx_r = base16384_encode(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_3)) ))))), ((int)__pyx_v_input_size), ((char *)(&(*((uint8_t *) ( /* dim=0 */ ((char *) (((uint8_t *) __pyx_v_dest.data) + __pyx_t_4)) ))))));
         goto __pyx_L4_return;
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":90
+      /* "pybase16384/backends/cython/_core.pyx":123
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:             # <<<<<<<<<<<<<<
  *         return b14_encode(<const char *> &data[0],
  *                                 <int> input_size,
  */
       /*finally:*/ {
@@ -19399,15 +20201,15 @@
           Py_BLOCK_THREADS
           #endif
           goto __pyx_L0;
         }
       }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":84
+  /* "pybase16384/backends/cython/_core.pyx":117
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  */
 
@@ -19418,24 +20220,24 @@
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_encode_into(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_13_encode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_8_encode_into, "_encode_into(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_9_encode_into = {"_encode_into", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_9_encode_into, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_8_encode_into};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_9_encode_into(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_12_encode_into, "_encode_into(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_13_encode_into = {"_encode_into", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_13_encode_into, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_12_encode_into};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_13_encode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
@@ -19474,43 +20276,43 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 84, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 117, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dest)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 84, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 117, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("_encode_into", 1, 2, 2, 1); __PYX_ERR(0, 84, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("_encode_into", 1, 2, 2, 1); __PYX_ERR(0, 117, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode_into") < 0)) __PYX_ERR(0, 84, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode_into") < 0)) __PYX_ERR(0, 117, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 84, __pyx_L3_error)
-    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 84, __pyx_L3_error)
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 117, __pyx_L3_error)
+    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 117, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("_encode_into", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 84, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("_encode_into", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 117, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
@@ -19518,43 +20320,43 @@
   }
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
   __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_into", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_8_encode_into(__pyx_self, __pyx_v_data, __pyx_v_dest);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_12_encode_into(__pyx_self, __pyx_v_data, __pyx_v_dest);
 
   /* function exit code */
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_8_encode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_12_encode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_encode_into", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 84, __pyx_L1_error) }
-  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 84, __pyx_L1_error) }
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 84, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 117, __pyx_L1_error) }
+  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 117, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 117, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 117, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -19563,23 +20365,339 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":95
+/* "pybase16384/backends/cython/_core.pyx":128
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ */
+
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_15_encode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into_safe(__Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest, CYTHON_UNUSED int __pyx_skip_dispatch) {
+  size_t __pyx_v_input_size;
+  size_t __pyx_v_output_size;
+  size_t __pyx_v_output_buf_size;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  PyObject *__pyx_t_2 = NULL;
+  Py_ssize_t __pyx_t_3;
+  Py_ssize_t __pyx_t_4;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_encode_into_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":129
+ * 
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ *     cdef size_t input_size = data.shape[0]             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ */
+  __pyx_v_input_size = (__pyx_v_data.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":130
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)             # <<<<<<<<<<<<<<
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:
+ */
+  __pyx_v_output_size = ((size_t)base16384_encode_len(((int)__pyx_v_input_size)));
+
+  /* "pybase16384/backends/cython/_core.pyx":131
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ *     cdef size_t output_buf_size = dest.shape[0]             # <<<<<<<<<<<<<<
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ */
+  __pyx_v_output_buf_size = (__pyx_v_dest.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":132
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ */
+  __pyx_t_1 = (__pyx_v_output_buf_size < __pyx_v_output_size);
+  if (unlikely(__pyx_t_1)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":133
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")             # <<<<<<<<<<<<<<
+ *     with nogil:
+ *         return b14_encode_safe(<const char *> &data[0],
+ */
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 133, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __PYX_ERR(0, 133, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":132
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":134
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         return b14_encode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ */
+  {
+      #ifdef WITH_THREAD
+      PyThreadState *_save;
+      _save = NULL;
+      Py_UNBLOCK_THREADS
+      __Pyx_FastGIL_Remember();
+      #endif
+      /*try:*/ {
+
+        /* "pybase16384/backends/cython/_core.pyx":135
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ *         return b14_encode_safe(<const char *> &data[0],             # <<<<<<<<<<<<<<
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])
+ */
+        __pyx_t_3 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":137
+ *         return b14_encode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])             # <<<<<<<<<<<<<<
+ * 
+ * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ */
+        __pyx_t_4 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":135
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ *         return b14_encode_safe(<const char *> &data[0],             # <<<<<<<<<<<<<<
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])
+ */
+        __pyx_r = base16384_encode_safe(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_3)) ))))), ((int)__pyx_v_input_size), ((char *)(&(*((uint8_t *) ( /* dim=0 */ ((char *) (((uint8_t *) __pyx_v_dest.data) + __pyx_t_4)) ))))));
+        goto __pyx_L4_return;
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":134
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         return b14_encode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ */
+      /*finally:*/ {
+        __pyx_L4_return: {
+          #ifdef WITH_THREAD
+          __Pyx_FastGIL_Forget();
+          Py_BLOCK_THREADS
+          #endif
+          goto __pyx_L0;
+        }
+      }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":128
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
+  __pyx_L0:;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_15_encode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_14_encode_into_safe, "_encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_15_encode_into_safe = {"_encode_into_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_15_encode_into_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_14_encode_into_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_15_encode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
+  __Pyx_memviewslice __pyx_v_dest = { 0, 0, { 0 }, { 0 }, { 0 } };
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[2] = {0,0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("_encode_into_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,&__pyx_n_s_dest,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 128, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dest)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 128, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("_encode_into_safe", 1, 2, 2, 1); __PYX_ERR(0, 128, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_encode_into_safe") < 0)) __PYX_ERR(0, 128, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 128, __pyx_L3_error)
+    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 128, __pyx_L3_error)
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("_encode_into_safe", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 128, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_14_encode_into_safe(__pyx_self, __pyx_v_data, __pyx_v_dest);
+
+  /* function exit code */
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_14_encode_into_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_encode_into_safe", 1);
+  __Pyx_XDECREF(__pyx_r);
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 128, __pyx_L1_error) }
+  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 128, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__encode_into_safe(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 128, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._encode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":139
  *                                 <char *> &dest[0])
  * 
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_into(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17_decode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into(__Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -19593,74 +20711,74 @@
   Py_ssize_t __pyx_t_3;
   Py_ssize_t __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_decode_into", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":96
+  /* "pybase16384/backends/cython/_core.pyx":140
  * 
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  *     cdef size_t input_size = data.shape[0]             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  *     cdef size_t output_buf_size = dest.shape[0]
  */
   __pyx_v_input_size = (__pyx_v_data.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":97
+  /* "pybase16384/backends/cython/_core.pyx":141
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)             # <<<<<<<<<<<<<<
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:
  */
   __pyx_v_output_size = ((size_t)base16384_decode_len(((int)__pyx_v_input_size), 0));
 
-  /* "pybase16384/backends/cython/_core.pyx":98
+  /* "pybase16384/backends/cython/_core.pyx":142
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  *     cdef size_t output_buf_size = dest.shape[0]             # <<<<<<<<<<<<<<
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  */
   __pyx_v_output_buf_size = (__pyx_v_dest.shape[0]);
 
-  /* "pybase16384/backends/cython/_core.pyx":99
+  /* "pybase16384/backends/cython/_core.pyx":143
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  */
   __pyx_t_1 = (__pyx_v_output_buf_size < __pyx_v_output_size);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":100
+    /* "pybase16384/backends/cython/_core.pyx":144
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")             # <<<<<<<<<<<<<<
  *     with nogil:
  *         return b14_decode(<const char *> &data[0],
  */
-    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 144, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_Raise(__pyx_t_2, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __PYX_ERR(0, 100, __pyx_L1_error)
+    __PYX_ERR(0, 144, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":99
+    /* "pybase16384/backends/cython/_core.pyx":143
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":101
+  /* "pybase16384/backends/cython/_core.pyx":145
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:             # <<<<<<<<<<<<<<
  *         return b14_decode(<const char *> &data[0],
  *                                 <int> input_size,
  */
   {
@@ -19668,44 +20786,44 @@
       PyThreadState *_save;
       _save = NULL;
       Py_UNBLOCK_THREADS
       __Pyx_FastGIL_Remember();
       #endif
       /*try:*/ {
 
-        /* "pybase16384/backends/cython/_core.pyx":102
+        /* "pybase16384/backends/cython/_core.pyx":146
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  *         return b14_decode(<const char *> &data[0],             # <<<<<<<<<<<<<<
  *                                 <int> input_size,
  *                                 <char *> &dest[0])
  */
         __pyx_t_3 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":104
+        /* "pybase16384/backends/cython/_core.pyx":148
  *         return b14_decode(<const char *> &data[0],
  *                                 <int> input_size,
  *                                 <char *> &dest[0])             # <<<<<<<<<<<<<<
  * 
- * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
  */
         __pyx_t_4 = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":102
+        /* "pybase16384/backends/cython/_core.pyx":146
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:
  *         return b14_decode(<const char *> &data[0],             # <<<<<<<<<<<<<<
  *                                 <int> input_size,
  *                                 <char *> &dest[0])
  */
         __pyx_r = base16384_decode(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_3)) ))))), ((int)__pyx_v_input_size), ((char *)(&(*((uint8_t *) ( /* dim=0 */ ((char *) (((uint8_t *) __pyx_v_dest.data) + __pyx_t_4)) ))))));
         goto __pyx_L4_return;
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":101
+      /* "pybase16384/backends/cython/_core.pyx":145
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")
  *     with nogil:             # <<<<<<<<<<<<<<
  *         return b14_decode(<const char *> &data[0],
  *                                 <int> input_size,
  */
       /*finally:*/ {
@@ -19715,15 +20833,15 @@
           Py_BLOCK_THREADS
           #endif
           goto __pyx_L0;
         }
       }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":95
+  /* "pybase16384/backends/cython/_core.pyx":139
  *                                 <char *> &dest[0])
  * 
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  */
 
@@ -19734,24 +20852,24 @@
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_into(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17_decode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_10_decode_into, "_decode_into(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_11_decode_into = {"_decode_into", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_into, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_10_decode_into};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_11_decode_into(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_16_decode_into, "_decode_into(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_17_decode_into = {"_decode_into", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_17_decode_into, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_16_decode_into};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17_decode_into(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
@@ -19790,43 +20908,43 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 95, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 139, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dest)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 95, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 139, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("_decode_into", 1, 2, 2, 1); __PYX_ERR(0, 95, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("_decode_into", 1, 2, 2, 1); __PYX_ERR(0, 139, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode_into") < 0)) __PYX_ERR(0, 95, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode_into") < 0)) __PYX_ERR(0, 139, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 95, __pyx_L3_error)
-    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 95, __pyx_L3_error)
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 139, __pyx_L3_error)
+    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 139, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("_decode_into", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 95, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("_decode_into", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 139, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
@@ -19834,43 +20952,43 @@
   }
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
   __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_into", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_into(__pyx_self, __pyx_v_data, __pyx_v_dest);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_16_decode_into(__pyx_self, __pyx_v_data, __pyx_v_dest);
 
   /* function exit code */
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
   __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_10_decode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_16_decode_into(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_decode_into", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 95, __pyx_L1_error) }
-  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 95, __pyx_L1_error) }
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 95, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 95, __pyx_L1_error)
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 139, __pyx_L1_error) }
+  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 139, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 139, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -19879,33 +20997,349 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":107
+/* "pybase16384/backends/cython/_core.pyx":150
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ */
+
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19_decode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into_safe(__Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest, CYTHON_UNUSED int __pyx_skip_dispatch) {
+  size_t __pyx_v_input_size;
+  size_t __pyx_v_output_size;
+  size_t __pyx_v_output_buf_size;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  PyObject *__pyx_t_2 = NULL;
+  Py_ssize_t __pyx_t_3;
+  Py_ssize_t __pyx_t_4;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_decode_into_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":151
+ * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ *     cdef size_t input_size = data.shape[0]             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ */
+  __pyx_v_input_size = (__pyx_v_data.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":152
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)             # <<<<<<<<<<<<<<
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:
+ */
+  __pyx_v_output_size = ((size_t)base16384_decode_len(((int)__pyx_v_input_size), 0));
+
+  /* "pybase16384/backends/cython/_core.pyx":153
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ *     cdef size_t output_buf_size = dest.shape[0]             # <<<<<<<<<<<<<<
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ */
+  __pyx_v_output_buf_size = (__pyx_v_dest.shape[0]);
+
+  /* "pybase16384/backends/cython/_core.pyx":154
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ */
+  __pyx_t_1 = (__pyx_v_output_buf_size < __pyx_v_output_size);
+  if (unlikely(__pyx_t_1)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":155
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")             # <<<<<<<<<<<<<<
+ *     with nogil:
+ *         return b14_decode_safe(<const char *> &data[0],
+ */
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 155, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __PYX_ERR(0, 155, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":154
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ *     cdef size_t output_buf_size = dest.shape[0]
+ *     if output_buf_size < output_size:             # <<<<<<<<<<<<<<
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":156
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         return b14_decode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ */
+  {
+      #ifdef WITH_THREAD
+      PyThreadState *_save;
+      _save = NULL;
+      Py_UNBLOCK_THREADS
+      __Pyx_FastGIL_Remember();
+      #endif
+      /*try:*/ {
+
+        /* "pybase16384/backends/cython/_core.pyx":157
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ *         return b14_decode_safe(<const char *> &data[0],             # <<<<<<<<<<<<<<
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])
+ */
+        __pyx_t_3 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":159
+ *         return b14_decode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])             # <<<<<<<<<<<<<<
+ * 
+ * def encode_file(object input,
+ */
+        __pyx_t_4 = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":157
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:
+ *         return b14_decode_safe(<const char *> &data[0],             # <<<<<<<<<<<<<<
+ *                                 <int> input_size,
+ *                                 <char *> &dest[0])
+ */
+        __pyx_r = base16384_decode_safe(((char const *)(&(*((uint8_t const  *) ( /* dim=0 */ ((char *) (((uint8_t const  *) __pyx_v_data.data) + __pyx_t_3)) ))))), ((int)__pyx_v_input_size), ((char *)(&(*((uint8_t *) ( /* dim=0 */ ((char *) (((uint8_t *) __pyx_v_dest.data) + __pyx_t_4)) ))))));
+        goto __pyx_L4_return;
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":156
+ *     if output_buf_size < output_size:
+ *         raise ValueError("Buffer is too small to hold result")
+ *     with nogil:             # <<<<<<<<<<<<<<
+ *         return b14_decode_safe(<const char *> &data[0],
+ *                                 <int> input_size,
+ */
+      /*finally:*/ {
+        __pyx_L4_return: {
+          #ifdef WITH_THREAD
+          __Pyx_FastGIL_Forget();
+          Py_BLOCK_THREADS
+          #endif
+          goto __pyx_L0;
+        }
+      }
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":150
+ *                                 <char *> &dest[0])
  * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
+  __pyx_L0:;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19_decode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_18_decode_into_safe, "_decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) -> int");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_19_decode_into_safe = {"_decode_into_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_19_decode_into_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_18_decode_into_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19_decode_into_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  __Pyx_memviewslice __pyx_v_data = { 0, 0, { 0 }, { 0 }, { 0 } };
+  __Pyx_memviewslice __pyx_v_dest = { 0, 0, { 0 }, { 0 }, { 0 } };
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[2] = {0,0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("_decode_into_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,&__pyx_n_s_dest,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 150, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dest)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 150, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("_decode_into_safe", 1, 2, 2, 1); __PYX_ERR(0, 150, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_decode_into_safe") < 0)) __PYX_ERR(0, 150, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_data = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t__const__(values[0], 0); if (unlikely(!__pyx_v_data.memview)) __PYX_ERR(0, 150, __pyx_L3_error)
+    __pyx_v_dest = __Pyx_PyObject_to_MemoryviewSlice_dc_nn_uint8_t(values[1], PyBUF_WRITABLE); if (unlikely(!__pyx_v_dest.memview)) __PYX_ERR(0, 150, __pyx_L3_error)
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("_decode_into_safe", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 150, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_18_decode_into_safe(__pyx_self, __pyx_v_data, __pyx_v_dest);
+
+  /* function exit code */
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_data, 1);
+  __PYX_XCLEAR_MEMVIEW(&__pyx_v_dest, 1);
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_18_decode_into_safe(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_data, __Pyx_memviewslice __pyx_v_dest) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("_decode_into_safe", 1);
+  __Pyx_XDECREF(__pyx_r);
+  if (unlikely(!__pyx_v_data.memview)) { __Pyx_RaiseUnboundLocalError("data"); __PYX_ERR(0, 150, __pyx_L1_error) }
+  if (unlikely(!__pyx_v_dest.memview)) { __Pyx_RaiseUnboundLocalError("dest"); __PYX_ERR(0, 150, __pyx_L1_error) }
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core__decode_into_safe(__pyx_v_data, __pyx_v_dest, 0); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 150, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 150, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core._decode_into_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":161
+ *                                 <char *> &dest[0])
  * 
  * def encode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        bint write_head = False,
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_13encode_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_21encode_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_12encode_file, "encode_file(input, output, bool write_head=False, int32_t buf_rate=10)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_13encode_file = {"encode_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_13encode_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_12encode_file};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_13encode_file(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_20encode_file, "encode_file(input, output, bool write_head=False, int32_t buf_rate=10)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_21encode_file = {"encode_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_21encode_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_20encode_file};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_21encode_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_input = 0;
@@ -19950,44 +21384,44 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_input)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 107, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 161, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_output)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 107, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 161, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_file", 0, 2, 4, 1); __PYX_ERR(0, 107, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_file", 0, 2, 4, 1); __PYX_ERR(0, 161, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_write_head);
           if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 107, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 161, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_buf_rate);
           if (value) { values[3] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 107, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 161, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_file") < 0)) __PYX_ERR(0, 107, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_file") < 0)) __PYX_ERR(0, 161, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
@@ -19996,52 +21430,52 @@
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
     __pyx_v_input = values[0];
     __pyx_v_output = values[1];
     if (values[2]) {
-      __pyx_v_write_head = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_write_head == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
+      __pyx_v_write_head = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_write_head == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 163, __pyx_L3_error)
     } else {
 
-      /* "pybase16384/backends/cython/_core.pyx":109
+      /* "pybase16384/backends/cython/_core.pyx":163
  * def encode_file(object input,
  *                        object output,
  *                        bint write_head = False,             # <<<<<<<<<<<<<<
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):
  */
       __pyx_v_write_head = ((int)((int)0));
     }
     if (values[3]) {
-      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[3]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
+      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[3]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 164, __pyx_L3_error)
     } else {
       __pyx_v_buf_rate = ((int32_t)((int32_t)10));
     }
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_file", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 107, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_file", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 161, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_file", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_12encode_file(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_write_head, __pyx_v_buf_rate);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_20encode_file(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_write_head, __pyx_v_buf_rate);
 
-  /* "pybase16384/backends/cython/_core.pyx":107
- * 
+  /* "pybase16384/backends/cython/_core.pyx":161
+ *                                 <char *> &dest[0])
  * 
  * def encode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        bint write_head = False,
  */
 
   /* function exit code */
@@ -20051,15 +21485,15 @@
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_12encode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_20encode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate) {
   int32_t __pyx_v_current_buf_len;
   size_t __pyx_v_output_size;
   char *__pyx_v_output_buf;
   Py_ssize_t __pyx_v_size;
   uint8_t __pyx_v_first_check;
   int __pyx_v_count;
   char const *__pyx_v_chunk_ptr;
@@ -20083,137 +21517,137 @@
   PyObject *__pyx_t_15 = NULL;
   PyObject *__pyx_t_16 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_file", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":111
+  /* "pybase16384/backends/cython/_core.pyx":165
  *                        bint write_head = False,
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 111, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 165, __pyx_L1_error)
   __pyx_t_2 = (!(__pyx_t_1 != 0));
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":112
+    /* "pybase16384/backends/cython/_core.pyx":166
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)             # <<<<<<<<<<<<<<
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 112, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 166, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 112, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 166, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 112, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 166, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_Raise(__pyx_t_3, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 112, __pyx_L1_error)
+    __PYX_ERR(0, 166, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":111
+    /* "pybase16384/backends/cython/_core.pyx":165
  *                        bint write_head = False,
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":113
+  /* "pybase16384/backends/cython/_core.pyx":167
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 113, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 167, __pyx_L1_error)
   __pyx_t_2 = (!(__pyx_t_1 != 0));
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":114
+    /* "pybase16384/backends/cython/_core.pyx":168
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)             # <<<<<<<<<<<<<<
  *     if buf_rate <= 0:
  *         buf_rate = 1
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 114, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 168, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 114, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 168, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 114, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 168, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_Raise(__pyx_t_3, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 114, __pyx_L1_error)
+    __PYX_ERR(0, 168, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":113
+    /* "pybase16384/backends/cython/_core.pyx":167
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":115
+  /* "pybase16384/backends/cython/_core.pyx":169
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
  *         buf_rate = 1
  * 
  */
   __pyx_t_2 = (__pyx_v_buf_rate <= 0);
   if (__pyx_t_2) {
 
-    /* "pybase16384/backends/cython/_core.pyx":116
+    /* "pybase16384/backends/cython/_core.pyx":170
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  *         buf_rate = 1             # <<<<<<<<<<<<<<
  * 
  *     if write_head:
  */
     __pyx_v_buf_rate = 1;
 
-    /* "pybase16384/backends/cython/_core.pyx":115
+    /* "pybase16384/backends/cython/_core.pyx":169
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
  *         buf_rate = 1
  * 
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":118
+  /* "pybase16384/backends/cython/_core.pyx":172
  *         buf_rate = 1
  * 
  *     if write_head:             # <<<<<<<<<<<<<<
  *         output.write(b'\xfe\xff')
  * 
  */
   if (__pyx_v_write_head) {
 
-    /* "pybase16384/backends/cython/_core.pyx":119
+    /* "pybase16384/backends/cython/_core.pyx":173
  * 
  *     if write_head:
  *         output.write(b'\xfe\xff')             # <<<<<<<<<<<<<<
  * 
  *     cdef int32_t current_buf_len = buf_rate * 7  #
  */
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 119, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 173, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __pyx_t_5 = NULL;
     __pyx_t_6 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_4))) {
       __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
       if (likely(__pyx_t_5)) {
@@ -20225,130 +21659,130 @@
       }
     }
     #endif
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_b__10};
       __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 119, __pyx_L1_error)
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 173, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     }
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-    /* "pybase16384/backends/cython/_core.pyx":118
+    /* "pybase16384/backends/cython/_core.pyx":172
  *         buf_rate = 1
  * 
  *     if write_head:             # <<<<<<<<<<<<<<
  *         output.write(b'\xfe\xff')
  * 
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":121
+  /* "pybase16384/backends/cython/_core.pyx":175
  *         output.write(b'\xfe\xff')
  * 
  *     cdef int32_t current_buf_len = buf_rate * 7  #             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) + 16 # encode_len 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  */
   __pyx_v_current_buf_len = (__pyx_v_buf_rate * 7);
 
-  /* "pybase16384/backends/cython/_core.pyx":122
+  /* "pybase16384/backends/cython/_core.pyx":176
  * 
  *     cdef int32_t current_buf_len = buf_rate * 7  #
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) + 16 # encode_len 16             # <<<<<<<<<<<<<<
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  */
   __pyx_v_output_size = (((size_t)base16384_encode_len(((int)__pyx_v_current_buf_len))) + 16);
 
-  /* "pybase16384/backends/cython/_core.pyx":123
+  /* "pybase16384/backends/cython/_core.pyx":177
  *     cdef int32_t current_buf_len = buf_rate * 7  #
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) + 16 # encode_len 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
  *     if output_buf == NULL:
  *         raise MemoryError
  */
   __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
 
-  /* "pybase16384/backends/cython/_core.pyx":124
+  /* "pybase16384/backends/cython/_core.pyx":178
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) + 16 # encode_len 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  * 
  */
   __pyx_t_2 = (__pyx_v_output_buf == NULL);
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":125
+    /* "pybase16384/backends/cython/_core.pyx":179
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  * 
  *     cdef Py_ssize_t size
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 125, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 179, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":124
+    /* "pybase16384/backends/cython/_core.pyx":178
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) + 16 # encode_len 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  * 
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":128
+  /* "pybase16384/backends/cython/_core.pyx":182
  * 
  *     cdef Py_ssize_t size
  *     cdef uint8_t first_check = 1  #  bytes             # <<<<<<<<<<<<<<
  *     cdef int count = 0
  *     cdef const char *chunk_ptr
  */
   __pyx_v_first_check = 1;
 
-  /* "pybase16384/backends/cython/_core.pyx":129
+  /* "pybase16384/backends/cython/_core.pyx":183
  *     cdef Py_ssize_t size
  *     cdef uint8_t first_check = 1  #  bytes
  *     cdef int count = 0             # <<<<<<<<<<<<<<
  *     cdef const char *chunk_ptr
  *     try:
  */
   __pyx_v_count = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":131
+  /* "pybase16384/backends/cython/_core.pyx":185
  *     cdef int count = 0
  *     cdef const char *chunk_ptr
  *     try:             # <<<<<<<<<<<<<<
  *         while True:
  *             chunk = input.read(current_buf_len)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":132
+    /* "pybase16384/backends/cython/_core.pyx":186
  *     cdef const char *chunk_ptr
  *     try:
  *         while True:             # <<<<<<<<<<<<<<
  *             chunk = input.read(current_buf_len)
  *             if first_check:
  */
     while (1) {
 
-      /* "pybase16384/backends/cython/_core.pyx":133
+      /* "pybase16384/backends/cython/_core.pyx":187
  *     try:
  *         while True:
  *             chunk = input.read(current_buf_len)             # <<<<<<<<<<<<<<
  *             if first_check:
  *                 first_check = 0
  */
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 133, __pyx_L9_error)
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 187, __pyx_L9_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 133, __pyx_L9_error)
+      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 187, __pyx_L9_error)
       __Pyx_GOTREF(__pyx_t_5);
       __pyx_t_7 = NULL;
       __pyx_t_6 = 0;
       #if CYTHON_UNPACK_METHODS
       if (likely(PyMethod_Check(__pyx_t_4))) {
         __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
         if (likely(__pyx_t_7)) {
@@ -20361,148 +21795,148 @@
       }
       #endif
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
         __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 133, __pyx_L9_error)
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 187, __pyx_L9_error)
         __Pyx_GOTREF(__pyx_t_3);
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       }
       __Pyx_XDECREF_SET(__pyx_v_chunk, __pyx_t_3);
       __pyx_t_3 = 0;
 
-      /* "pybase16384/backends/cython/_core.pyx":134
+      /* "pybase16384/backends/cython/_core.pyx":188
  *         while True:
  *             chunk = input.read(current_buf_len)
  *             if first_check:             # <<<<<<<<<<<<<<
  *                 first_check = 0
  *                 if not PyBytes_Check(chunk):
  */
       __pyx_t_2 = (__pyx_v_first_check != 0);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":135
+        /* "pybase16384/backends/cython/_core.pyx":189
  *             chunk = input.read(current_buf_len)
  *             if first_check:
  *                 first_check = 0             # <<<<<<<<<<<<<<
  *                 if not PyBytes_Check(chunk):
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  */
         __pyx_v_first_check = 0;
 
-        /* "pybase16384/backends/cython/_core.pyx":136
+        /* "pybase16384/backends/cython/_core.pyx":190
  *             if first_check:
  *                 first_check = 0
  *                 if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *             size = PyBytes_Size(chunk)
  */
         __pyx_t_2 = (!PyBytes_Check(__pyx_v_chunk));
         if (unlikely(__pyx_t_2)) {
 
-          /* "pybase16384/backends/cython/_core.pyx":137
+          /* "pybase16384/backends/cython/_core.pyx":191
  *                 first_check = 0
  *                 if not PyBytes_Check(chunk):
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")             # <<<<<<<<<<<<<<
  *             size = PyBytes_Size(chunk)
  *             if <int32_t> size < current_buf_len:  #
  */
-          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 137, __pyx_L9_error)
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 191, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 137, __pyx_L9_error)
+          __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 191, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_4);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 137, __pyx_L9_error)
+          __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 191, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_3);
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 137, __pyx_L9_error)
+          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 191, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_4);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           __Pyx_Raise(__pyx_t_4, 0, 0, 0);
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-          __PYX_ERR(0, 137, __pyx_L9_error)
+          __PYX_ERR(0, 191, __pyx_L9_error)
 
-          /* "pybase16384/backends/cython/_core.pyx":136
+          /* "pybase16384/backends/cython/_core.pyx":190
  *             if first_check:
  *                 first_check = 0
  *                 if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *             size = PyBytes_Size(chunk)
  */
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":134
+        /* "pybase16384/backends/cython/_core.pyx":188
  *         while True:
  *             chunk = input.read(current_buf_len)
  *             if first_check:             # <<<<<<<<<<<<<<
  *                 first_check = 0
  *                 if not PyBytes_Check(chunk):
  */
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":138
+      /* "pybase16384/backends/cython/_core.pyx":192
  *                 if not PyBytes_Check(chunk):
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *             size = PyBytes_Size(chunk)             # <<<<<<<<<<<<<<
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #   7  encode
  */
-      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 138, __pyx_L9_error)
+      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 192, __pyx_L9_error)
       __pyx_v_size = __pyx_t_8;
 
-      /* "pybase16384/backends/cython/_core.pyx":139
+      /* "pybase16384/backends/cython/_core.pyx":193
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *             size = PyBytes_Size(chunk)
  *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
  *                 if buf_rate > 1:  #   7  encode
  *                     buf_rate = buf_rate / 2
  */
       __pyx_t_2 = (((int32_t)__pyx_v_size) < __pyx_v_current_buf_len);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":140
+        /* "pybase16384/backends/cython/_core.pyx":194
  *             size = PyBytes_Size(chunk)
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #   7  encode             # <<<<<<<<<<<<<<
  *                     buf_rate = buf_rate / 2
  *                     current_buf_len = buf_rate * 7
  */
         __pyx_t_2 = (__pyx_v_buf_rate > 1);
         if (__pyx_t_2) {
 
-          /* "pybase16384/backends/cython/_core.pyx":141
+          /* "pybase16384/backends/cython/_core.pyx":195
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #   7  encode
  *                     buf_rate = buf_rate / 2             # <<<<<<<<<<<<<<
  *                     current_buf_len = buf_rate * 7
  *                     input.seek(-size, 1)
  */
           __pyx_v_buf_rate = (((long)__pyx_v_buf_rate) / 2);
 
-          /* "pybase16384/backends/cython/_core.pyx":142
+          /* "pybase16384/backends/cython/_core.pyx":196
  *                 if buf_rate > 1:  #   7  encode
  *                     buf_rate = buf_rate / 2
  *                     current_buf_len = buf_rate * 7             # <<<<<<<<<<<<<<
  *                     input.seek(-size, 1)
  *                     continue
  */
           __pyx_v_current_buf_len = (__pyx_v_buf_rate * 7);
 
-          /* "pybase16384/backends/cython/_core.pyx":143
+          /* "pybase16384/backends/cython/_core.pyx":197
  *                     buf_rate = buf_rate / 2
  *                     current_buf_len = buf_rate * 7
  *                     input.seek(-size, 1)             # <<<<<<<<<<<<<<
  *                     continue
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
  */
-          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 143, __pyx_L9_error)
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 197, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 143, __pyx_L9_error)
+          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 197, __pyx_L9_error)
           __Pyx_GOTREF(__pyx_t_5);
           __pyx_t_7 = NULL;
           __pyx_t_6 = 0;
           #if CYTHON_UNPACK_METHODS
           if (likely(PyMethod_Check(__pyx_t_3))) {
             __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
             if (likely(__pyx_t_7)) {
@@ -20515,57 +21949,57 @@
           }
           #endif
           {
             PyObject *__pyx_callargs[3] = {__pyx_t_7, __pyx_t_5, __pyx_int_1};
             __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
             __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
             __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 143, __pyx_L9_error)
+            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 197, __pyx_L9_error)
             __Pyx_GOTREF(__pyx_t_4);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           }
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-          /* "pybase16384/backends/cython/_core.pyx":144
+          /* "pybase16384/backends/cython/_core.pyx":198
  *                     current_buf_len = buf_rate * 7
  *                     input.seek(-size, 1)
  *                     continue             # <<<<<<<<<<<<<<
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
  *             with nogil:
  */
           goto __pyx_L11_continue;
 
-          /* "pybase16384/backends/cython/_core.pyx":140
+          /* "pybase16384/backends/cython/_core.pyx":194
  *             size = PyBytes_Size(chunk)
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #   7  encode             # <<<<<<<<<<<<<<
  *                     buf_rate = buf_rate / 2
  *                     current_buf_len = buf_rate * 7
  */
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":139
+        /* "pybase16384/backends/cython/_core.pyx":193
  *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *             size = PyBytes_Size(chunk)
  *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
  *                 if buf_rate > 1:  #   7  encode
  *                     buf_rate = buf_rate / 2
  */
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":145
+      /* "pybase16384/backends/cython/_core.pyx":199
  *                     input.seek(-size, 1)
  *                     continue
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)             # <<<<<<<<<<<<<<
  *             with nogil:
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  */
       __pyx_v_chunk_ptr = ((char const *)PyBytes_AS_STRING(__pyx_v_chunk));
 
-      /* "pybase16384/backends/cython/_core.pyx":146
+      /* "pybase16384/backends/cython/_core.pyx":200
  *                     continue
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
  *             with nogil:             # <<<<<<<<<<<<<<
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  */
       {
@@ -20573,25 +22007,25 @@
           PyThreadState *_save;
           _save = NULL;
           Py_UNBLOCK_THREADS
           __Pyx_FastGIL_Remember();
           #endif
           /*try:*/ {
 
-            /* "pybase16384/backends/cython/_core.pyx":147
+            /* "pybase16384/backends/cython/_core.pyx":201
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
  *             with nogil:
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)             # <<<<<<<<<<<<<<
  *             output.write(<bytes>output_buf[:count])
  *             if size < 7:
  */
             __pyx_v_count = base16384_encode(__pyx_v_chunk_ptr, ((int)__pyx_v_size), __pyx_v_output_buf);
           }
 
-          /* "pybase16384/backends/cython/_core.pyx":146
+          /* "pybase16384/backends/cython/_core.pyx":200
  *                     continue
  *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
  *             with nogil:             # <<<<<<<<<<<<<<
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  */
           /*finally:*/ {
@@ -20602,24 +22036,24 @@
               #endif
               goto __pyx_L21;
             }
             __pyx_L21:;
           }
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":148
+      /* "pybase16384/backends/cython/_core.pyx":202
  *             with nogil:
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  *             output.write(<bytes>output_buf[:count])             # <<<<<<<<<<<<<<
  *             if size < 7:
  *                 break
  */
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 148, __pyx_L9_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 202, __pyx_L9_error)
       __Pyx_GOTREF(__pyx_t_3);
-      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 148, __pyx_L9_error)
+      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 202, __pyx_L9_error)
       __Pyx_GOTREF(__pyx_t_5);
       __pyx_t_7 = NULL;
       __pyx_t_6 = 0;
       #if CYTHON_UNPACK_METHODS
       if (likely(PyMethod_Check(__pyx_t_3))) {
         __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
         if (likely(__pyx_t_7)) {
@@ -20632,58 +22066,58 @@
       }
       #endif
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
         __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 148, __pyx_L9_error)
+        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 202, __pyx_L9_error)
         __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-      /* "pybase16384/backends/cython/_core.pyx":149
+      /* "pybase16384/backends/cython/_core.pyx":203
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  *             if size < 7:             # <<<<<<<<<<<<<<
  *                 break
  *     finally:
  */
       __pyx_t_2 = (__pyx_v_size < 7);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":150
+        /* "pybase16384/backends/cython/_core.pyx":204
  *             output.write(<bytes>output_buf[:count])
  *             if size < 7:
  *                 break             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(output_buf)
  */
         goto __pyx_L12_break;
 
-        /* "pybase16384/backends/cython/_core.pyx":149
+        /* "pybase16384/backends/cython/_core.pyx":203
  *                 count = b14_encode(chunk_ptr, <int>size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  *             if size < 7:             # <<<<<<<<<<<<<<
  *                 break
  *     finally:
  */
       }
       __pyx_L11_continue:;
     }
     __pyx_L12_break:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":152
+  /* "pybase16384/backends/cython/_core.pyx":206
  *                 break
  *     finally:
  *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
  * 
- * def decode_file(object input,
+ * def encode_file_safe(object input,
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_output_buf);
       goto __pyx_L10;
     }
     __pyx_L9_error:;
@@ -20720,16 +22154,16 @@
       __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_9; __pyx_filename = __pyx_t_10;
       goto __pyx_L1_error;
     }
     __pyx_L10:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":107
- * 
+  /* "pybase16384/backends/cython/_core.pyx":161
+ *                                 <char *> &dest[0])
  * 
  * def encode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        bint write_head = False,
  */
 
   /* function exit code */
@@ -20745,33 +22179,899 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_chunk);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":154
+/* "pybase16384/backends/cython/_core.pyx":208
+ *         PyMem_Free(output_buf)
+ * 
+ * def encode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        bint write_head = False,
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_file_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_22encode_file_safe, "encode_file_safe(input, output, bool write_head=False, int32_t buf_rate=10)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_23encode_file_safe = {"encode_file_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_file_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_22encode_file_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_file_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_input = 0;
+  PyObject *__pyx_v_output = 0;
+  int __pyx_v_write_head;
+  int32_t __pyx_v_buf_rate;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[4] = {0,0,0,0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("encode_file_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_input,&__pyx_n_s_output,&__pyx_n_s_write_head,&__pyx_n_s_buf_rate,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_input)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 208, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_output)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 208, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("encode_file_safe", 0, 2, 4, 1); __PYX_ERR(0, 208, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_write_head);
+          if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 208, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_buf_rate);
+          if (value) { values[3] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 208, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_file_safe") < 0)) __PYX_ERR(0, 208, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_input = values[0];
+    __pyx_v_output = values[1];
+    if (values[2]) {
+      __pyx_v_write_head = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_write_head == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 210, __pyx_L3_error)
+    } else {
+
+      /* "pybase16384/backends/cython/_core.pyx":210
+ * def encode_file_safe(object input,
+ *                        object output,
+ *                        bint write_head = False,             # <<<<<<<<<<<<<<
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):
+ */
+      __pyx_v_write_head = ((int)((int)0));
+    }
+    if (values[3]) {
+      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[3]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 211, __pyx_L3_error)
+    } else {
+      __pyx_v_buf_rate = ((int32_t)((int32_t)10));
+    }
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("encode_file_safe", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 208, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_file_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_file_safe(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_write_head, __pyx_v_buf_rate);
+
+  /* "pybase16384/backends/cython/_core.pyx":208
+ *         PyMem_Free(output_buf)
+ * 
+ * def encode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        bint write_head = False,
+ */
+
+  /* function exit code */
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_file_safe(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int __pyx_v_write_head, int32_t __pyx_v_buf_rate) {
+  int32_t __pyx_v_current_buf_len;
+  size_t __pyx_v_output_size;
+  char *__pyx_v_output_buf;
+  Py_ssize_t __pyx_v_size;
+  uint8_t __pyx_v_first_check;
+  int __pyx_v_count;
+  char const *__pyx_v_chunk_ptr;
+  PyObject *__pyx_v_chunk = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  uint8_t __pyx_t_1;
+  int __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  int __pyx_t_6;
+  PyObject *__pyx_t_7 = NULL;
+  Py_ssize_t __pyx_t_8;
+  int __pyx_t_9;
+  char const *__pyx_t_10;
+  PyObject *__pyx_t_11 = NULL;
+  PyObject *__pyx_t_12 = NULL;
+  PyObject *__pyx_t_13 = NULL;
+  PyObject *__pyx_t_14 = NULL;
+  PyObject *__pyx_t_15 = NULL;
+  PyObject *__pyx_t_16 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("encode_file_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":212
+ *                        bint write_head = False,
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ */
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 212, __pyx_L1_error)
+  __pyx_t_2 = (!(__pyx_t_1 != 0));
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":213
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)             # <<<<<<<<<<<<<<
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 213, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 213, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 213, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 213, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":212
+ *                        bint write_head = False,
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":214
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ */
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 214, __pyx_L1_error)
+  __pyx_t_2 = (!(__pyx_t_1 != 0));
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":215
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)             # <<<<<<<<<<<<<<
+ *     if buf_rate <= 0:
+ *         buf_rate = 1
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 215, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 215, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 215, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 215, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":214
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":216
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
+ *         buf_rate = 1
+ * 
+ */
+  __pyx_t_2 = (__pyx_v_buf_rate <= 0);
+  if (__pyx_t_2) {
+
+    /* "pybase16384/backends/cython/_core.pyx":217
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ *         buf_rate = 1             # <<<<<<<<<<<<<<
+ * 
+ *     if write_head:
+ */
+    __pyx_v_buf_rate = 1;
+
+    /* "pybase16384/backends/cython/_core.pyx":216
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
+ *         buf_rate = 1
+ * 
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":219
+ *         buf_rate = 1
+ * 
+ *     if write_head:             # <<<<<<<<<<<<<<
+ *         output.write(b'\xfe\xff')
+ * 
+ */
+  if (__pyx_v_write_head) {
+
+    /* "pybase16384/backends/cython/_core.pyx":220
+ * 
+ *     if write_head:
+ *         output.write(b'\xfe\xff')             # <<<<<<<<<<<<<<
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 7  #
+ */
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 220, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_5 = NULL;
+    __pyx_t_6 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (likely(PyMethod_Check(__pyx_t_4))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_4, function);
+        __pyx_t_6 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_b__10};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 220, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "pybase16384/backends/cython/_core.pyx":219
+ *         buf_rate = 1
+ * 
+ *     if write_head:             # <<<<<<<<<<<<<<
+ *         output.write(b'\xfe\xff')
+ * 
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":222
+ *         output.write(b'\xfe\xff')
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 7  #             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # encode_len 16
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ */
+  __pyx_v_current_buf_len = (__pyx_v_buf_rate * 7);
+
+  /* "pybase16384/backends/cython/_core.pyx":223
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 7  #
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # encode_len 16             # <<<<<<<<<<<<<<
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ */
+  __pyx_v_output_size = ((size_t)base16384_encode_len(((int)__pyx_v_current_buf_len)));
+
+  /* "pybase16384/backends/cython/_core.pyx":224
+ *     cdef int32_t current_buf_len = buf_rate * 7  #
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # encode_len 16
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
+ *     if output_buf == NULL:
+ *         raise MemoryError
+ */
+  __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
+
+  /* "pybase16384/backends/cython/_core.pyx":225
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # encode_len 16
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ * 
+ */
+  __pyx_t_2 = (__pyx_v_output_buf == NULL);
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":226
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ *         raise MemoryError             # <<<<<<<<<<<<<<
+ * 
+ *     cdef Py_ssize_t size
+ */
+    PyErr_NoMemory(); __PYX_ERR(0, 226, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":225
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # encode_len 16
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ * 
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":229
+ * 
+ *     cdef Py_ssize_t size
+ *     cdef uint8_t first_check = 1  #  bytes             # <<<<<<<<<<<<<<
+ *     cdef int count = 0
+ *     cdef const char *chunk_ptr
+ */
+  __pyx_v_first_check = 1;
+
+  /* "pybase16384/backends/cython/_core.pyx":230
+ *     cdef Py_ssize_t size
+ *     cdef uint8_t first_check = 1  #  bytes
+ *     cdef int count = 0             # <<<<<<<<<<<<<<
+ *     cdef const char *chunk_ptr
+ *     try:
+ */
+  __pyx_v_count = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":232
+ *     cdef int count = 0
+ *     cdef const char *chunk_ptr
+ *     try:             # <<<<<<<<<<<<<<
+ *         while True:
+ *             chunk = input.read(current_buf_len)
+ */
+  /*try:*/ {
+
+    /* "pybase16384/backends/cython/_core.pyx":233
+ *     cdef const char *chunk_ptr
+ *     try:
+ *         while True:             # <<<<<<<<<<<<<<
+ *             chunk = input.read(current_buf_len)
+ *             if first_check:
+ */
+    while (1) {
+
+      /* "pybase16384/backends/cython/_core.pyx":234
+ *     try:
+ *         while True:
+ *             chunk = input.read(current_buf_len)             # <<<<<<<<<<<<<<
+ *             if first_check:
+ *                 first_check = 0
+ */
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 234, __pyx_L9_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 234, __pyx_L9_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_7 = NULL;
+      __pyx_t_6 = 0;
+      #if CYTHON_UNPACK_METHODS
+      if (likely(PyMethod_Check(__pyx_t_4))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+          __Pyx_INCREF(__pyx_t_7);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_4, function);
+          __pyx_t_6 = 1;
+        }
+      }
+      #endif
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
+        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 234, __pyx_L9_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      }
+      __Pyx_XDECREF_SET(__pyx_v_chunk, __pyx_t_3);
+      __pyx_t_3 = 0;
+
+      /* "pybase16384/backends/cython/_core.pyx":235
+ *         while True:
+ *             chunk = input.read(current_buf_len)
+ *             if first_check:             # <<<<<<<<<<<<<<
+ *                 first_check = 0
+ *                 if not PyBytes_Check(chunk):
+ */
+      __pyx_t_2 = (__pyx_v_first_check != 0);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":236
+ *             chunk = input.read(current_buf_len)
+ *             if first_check:
+ *                 first_check = 0             # <<<<<<<<<<<<<<
+ *                 if not PyBytes_Check(chunk):
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ */
+        __pyx_v_first_check = 0;
+
+        /* "pybase16384/backends/cython/_core.pyx":237
+ *             if first_check:
+ *                 first_check = 0
+ *                 if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *             size = PyBytes_Size(chunk)
+ */
+        __pyx_t_2 = (!PyBytes_Check(__pyx_v_chunk));
+        if (unlikely(__pyx_t_2)) {
+
+          /* "pybase16384/backends/cython/_core.pyx":238
+ *                 first_check = 0
+ *                 if not PyBytes_Check(chunk):
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")             # <<<<<<<<<<<<<<
+ *             size = PyBytes_Size(chunk)
+ *             if <int32_t> size < current_buf_len:  #
+ */
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 238, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 238, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 238, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 238, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __Pyx_Raise(__pyx_t_4, 0, 0, 0);
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __PYX_ERR(0, 238, __pyx_L9_error)
+
+          /* "pybase16384/backends/cython/_core.pyx":237
+ *             if first_check:
+ *                 first_check = 0
+ *                 if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *             size = PyBytes_Size(chunk)
+ */
+        }
+
+        /* "pybase16384/backends/cython/_core.pyx":235
+ *         while True:
+ *             chunk = input.read(current_buf_len)
+ *             if first_check:             # <<<<<<<<<<<<<<
+ *                 first_check = 0
+ *                 if not PyBytes_Check(chunk):
+ */
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":239
+ *                 if not PyBytes_Check(chunk):
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *             size = PyBytes_Size(chunk)             # <<<<<<<<<<<<<<
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #   7  encode
+ */
+      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 239, __pyx_L9_error)
+      __pyx_v_size = __pyx_t_8;
+
+      /* "pybase16384/backends/cython/_core.pyx":240
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *             size = PyBytes_Size(chunk)
+ *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
+ *                 if buf_rate > 1:  #   7  encode
+ *                     buf_rate = buf_rate / 2
+ */
+      __pyx_t_2 = (((int32_t)__pyx_v_size) < __pyx_v_current_buf_len);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":241
+ *             size = PyBytes_Size(chunk)
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #   7  encode             # <<<<<<<<<<<<<<
+ *                     buf_rate = buf_rate / 2
+ *                     current_buf_len = buf_rate * 7
+ */
+        __pyx_t_2 = (__pyx_v_buf_rate > 1);
+        if (__pyx_t_2) {
+
+          /* "pybase16384/backends/cython/_core.pyx":242
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #   7  encode
+ *                     buf_rate = buf_rate / 2             # <<<<<<<<<<<<<<
+ *                     current_buf_len = buf_rate * 7
+ *                     input.seek(-size, 1)
+ */
+          __pyx_v_buf_rate = (((long)__pyx_v_buf_rate) / 2);
+
+          /* "pybase16384/backends/cython/_core.pyx":243
+ *                 if buf_rate > 1:  #   7  encode
+ *                     buf_rate = buf_rate / 2
+ *                     current_buf_len = buf_rate * 7             # <<<<<<<<<<<<<<
+ *                     input.seek(-size, 1)
+ *                     continue
+ */
+          __pyx_v_current_buf_len = (__pyx_v_buf_rate * 7);
+
+          /* "pybase16384/backends/cython/_core.pyx":244
+ *                     buf_rate = buf_rate / 2
+ *                     current_buf_len = buf_rate * 7
+ *                     input.seek(-size, 1)             # <<<<<<<<<<<<<<
+ *                     continue
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+ */
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 244, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 244, __pyx_L9_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __pyx_t_7 = NULL;
+          __pyx_t_6 = 0;
+          #if CYTHON_UNPACK_METHODS
+          if (likely(PyMethod_Check(__pyx_t_3))) {
+            __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
+            if (likely(__pyx_t_7)) {
+              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+              __Pyx_INCREF(__pyx_t_7);
+              __Pyx_INCREF(function);
+              __Pyx_DECREF_SET(__pyx_t_3, function);
+              __pyx_t_6 = 1;
+            }
+          }
+          #endif
+          {
+            PyObject *__pyx_callargs[3] = {__pyx_t_7, __pyx_t_5, __pyx_int_1};
+            __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
+            __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 244, __pyx_L9_error)
+            __Pyx_GOTREF(__pyx_t_4);
+            __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          }
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+          /* "pybase16384/backends/cython/_core.pyx":245
+ *                     current_buf_len = buf_rate * 7
+ *                     input.seek(-size, 1)
+ *                     continue             # <<<<<<<<<<<<<<
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+ *             with nogil:
+ */
+          goto __pyx_L11_continue;
+
+          /* "pybase16384/backends/cython/_core.pyx":241
+ *             size = PyBytes_Size(chunk)
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #   7  encode             # <<<<<<<<<<<<<<
+ *                     buf_rate = buf_rate / 2
+ *                     current_buf_len = buf_rate * 7
+ */
+        }
+
+        /* "pybase16384/backends/cython/_core.pyx":240
+ *                     raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *             size = PyBytes_Size(chunk)
+ *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
+ *                 if buf_rate > 1:  #   7  encode
+ *                     buf_rate = buf_rate / 2
+ */
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":246
+ *                     input.seek(-size, 1)
+ *                     continue
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)             # <<<<<<<<<<<<<<
+ *             with nogil:
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ */
+      __pyx_v_chunk_ptr = ((char const *)PyBytes_AS_STRING(__pyx_v_chunk));
+
+      /* "pybase16384/backends/cython/_core.pyx":247
+ *                     continue
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+ *             with nogil:             # <<<<<<<<<<<<<<
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ */
+      {
+          #ifdef WITH_THREAD
+          PyThreadState *_save;
+          _save = NULL;
+          Py_UNBLOCK_THREADS
+          __Pyx_FastGIL_Remember();
+          #endif
+          /*try:*/ {
+
+            /* "pybase16384/backends/cython/_core.pyx":248
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+ *             with nogil:
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)             # <<<<<<<<<<<<<<
+ *             output.write(<bytes>output_buf[:count])
+ *             if size < 7:
+ */
+            __pyx_v_count = base16384_encode_safe(__pyx_v_chunk_ptr, ((int)__pyx_v_size), __pyx_v_output_buf);
+          }
+
+          /* "pybase16384/backends/cython/_core.pyx":247
+ *                     continue
+ *             chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+ *             with nogil:             # <<<<<<<<<<<<<<
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ */
+          /*finally:*/ {
+            /*normal exit:*/{
+              #ifdef WITH_THREAD
+              __Pyx_FastGIL_Forget();
+              Py_BLOCK_THREADS
+              #endif
+              goto __pyx_L21;
+            }
+            __pyx_L21:;
+          }
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":249
+ *             with nogil:
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ *             output.write(<bytes>output_buf[:count])             # <<<<<<<<<<<<<<
+ *             if size < 7:
+ *                 break
+ */
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 249, __pyx_L9_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 249, __pyx_L9_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_7 = NULL;
+      __pyx_t_6 = 0;
+      #if CYTHON_UNPACK_METHODS
+      if (likely(PyMethod_Check(__pyx_t_3))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+          __Pyx_INCREF(__pyx_t_7);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_3, function);
+          __pyx_t_6 = 1;
+        }
+      }
+      #endif
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
+        __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 249, __pyx_L9_error)
+        __Pyx_GOTREF(__pyx_t_4);
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      }
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+      /* "pybase16384/backends/cython/_core.pyx":250
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ *             if size < 7:             # <<<<<<<<<<<<<<
+ *                 break
+ *     finally:
+ */
+      __pyx_t_2 = (__pyx_v_size < 7);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":251
+ *             output.write(<bytes>output_buf[:count])
+ *             if size < 7:
+ *                 break             # <<<<<<<<<<<<<<
+ *     finally:
+ *         PyMem_Free(output_buf)
+ */
+        goto __pyx_L12_break;
+
+        /* "pybase16384/backends/cython/_core.pyx":250
+ *                 count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ *             if size < 7:             # <<<<<<<<<<<<<<
+ *                 break
+ *     finally:
+ */
+      }
+      __pyx_L11_continue:;
+    }
+    __pyx_L12_break:;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":253
+ *                 break
+ *     finally:
+ *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
+ * 
+ * def decode_file(object input,
+ */
+  /*finally:*/ {
+    /*normal exit:*/{
+      PyMem_Free(__pyx_v_output_buf);
+      goto __pyx_L10;
+    }
+    __pyx_L9_error:;
+    /*exception exit:*/{
+      __Pyx_PyThreadState_declare
+      __Pyx_PyThreadState_assign
+      __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (PY_MAJOR_VERSION >= 3) __Pyx_ExceptionSwap(&__pyx_t_14, &__pyx_t_15, &__pyx_t_16);
+      if ((PY_MAJOR_VERSION < 3) || unlikely(__Pyx_GetException(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13) < 0)) __Pyx_ErrFetch(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
+      __Pyx_XGOTREF(__pyx_t_11);
+      __Pyx_XGOTREF(__pyx_t_12);
+      __Pyx_XGOTREF(__pyx_t_13);
+      __Pyx_XGOTREF(__pyx_t_14);
+      __Pyx_XGOTREF(__pyx_t_15);
+      __Pyx_XGOTREF(__pyx_t_16);
+      __pyx_t_6 = __pyx_lineno; __pyx_t_9 = __pyx_clineno; __pyx_t_10 = __pyx_filename;
+      {
+        PyMem_Free(__pyx_v_output_buf);
+      }
+      if (PY_MAJOR_VERSION >= 3) {
+        __Pyx_XGIVEREF(__pyx_t_14);
+        __Pyx_XGIVEREF(__pyx_t_15);
+        __Pyx_XGIVEREF(__pyx_t_16);
+        __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
+      }
+      __Pyx_XGIVEREF(__pyx_t_11);
+      __Pyx_XGIVEREF(__pyx_t_12);
+      __Pyx_XGIVEREF(__pyx_t_13);
+      __Pyx_ErrRestore(__pyx_t_11, __pyx_t_12, __pyx_t_13);
+      __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
+      __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_9; __pyx_filename = __pyx_t_10;
+      goto __pyx_L1_error;
+    }
+    __pyx_L10:;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":208
+ *         PyMem_Free(output_buf)
+ * 
+ * def encode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        bint write_head = False,
+ */
+
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_file_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_chunk);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":255
  *         PyMem_Free(output_buf)
  * 
  * def decode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        int32_t buf_rate = 10):
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_15decode_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_14decode_file, "decode_file(input, output, int32_t buf_rate=10)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_15decode_file = {"decode_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_15decode_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_14decode_file};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_15decode_file(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_24decode_file, "decode_file(input, output, int32_t buf_rate=10)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_25decode_file = {"decode_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_24decode_file};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_input = 0;
@@ -20813,86 +23113,86 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_input)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 154, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 255, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_output)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 154, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 255, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_file", 0, 2, 3, 1); __PYX_ERR(0, 154, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_file", 0, 2, 3, 1); __PYX_ERR(0, 255, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_buf_rate);
           if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 154, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 255, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_file") < 0)) __PYX_ERR(0, 154, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_file") < 0)) __PYX_ERR(0, 255, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
     __pyx_v_input = values[0];
     __pyx_v_output = values[1];
     if (values[2]) {
-      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[2]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 156, __pyx_L3_error)
+      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[2]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 257, __pyx_L3_error)
     } else {
       __pyx_v_buf_rate = ((int32_t)((int32_t)10));
     }
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_file", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 154, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_file", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 255, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_file", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_14decode_file(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_buf_rate);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_file(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_buf_rate);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_14decode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate) {
   PyObject *__pyx_v_chunk = NULL;
   int32_t __pyx_v_current_buf_len;
   size_t __pyx_v_output_size;
   char *__pyx_v_output_buf;
   Py_ssize_t __pyx_v_size;
   int __pyx_v_count;
   char const *__pyx_v_chunk_ptr;
@@ -20916,128 +23216,128 @@
   PyObject *__pyx_t_15 = NULL;
   PyObject *__pyx_t_16 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_file", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":157
+  /* "pybase16384/backends/cython/_core.pyx":258
  *                        object output,
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 157, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 258, __pyx_L1_error)
   __pyx_t_2 = (!(__pyx_t_1 != 0));
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":158
+    /* "pybase16384/backends/cython/_core.pyx":259
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)             # <<<<<<<<<<<<<<
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 158, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 158, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 259, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 158, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_Raise(__pyx_t_3, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 158, __pyx_L1_error)
+    __PYX_ERR(0, 259, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":157
+    /* "pybase16384/backends/cython/_core.pyx":258
  *                        object output,
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":159
+  /* "pybase16384/backends/cython/_core.pyx":260
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 159, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 260, __pyx_L1_error)
   __pyx_t_2 = (!(__pyx_t_1 != 0));
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":160
+    /* "pybase16384/backends/cython/_core.pyx":261
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)             # <<<<<<<<<<<<<<
  *     if buf_rate <= 0:
  *         buf_rate = 1
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 160, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 261, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 160, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 261, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 160, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 261, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_Raise(__pyx_t_3, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 160, __pyx_L1_error)
+    __PYX_ERR(0, 261, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":159
+    /* "pybase16384/backends/cython/_core.pyx":260
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":161
+  /* "pybase16384/backends/cython/_core.pyx":262
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
  *         buf_rate = 1
  * 
  */
   __pyx_t_2 = (__pyx_v_buf_rate <= 0);
   if (__pyx_t_2) {
 
-    /* "pybase16384/backends/cython/_core.pyx":162
+    /* "pybase16384/backends/cython/_core.pyx":263
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:
  *         buf_rate = 1             # <<<<<<<<<<<<<<
  * 
  *     chunk = input.read(1)  # type: bytes
  */
     __pyx_v_buf_rate = 1;
 
-    /* "pybase16384/backends/cython/_core.pyx":161
+    /* "pybase16384/backends/cython/_core.pyx":262
  *     if not PyFile_Check(output):
  *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
  *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
  *         buf_rate = 1
  * 
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":164
+  /* "pybase16384/backends/cython/_core.pyx":265
  *         buf_rate = 1
  * 
  *     chunk = input.read(1)  # type: bytes             # <<<<<<<<<<<<<<
  *     if not PyBytes_Check(chunk):
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  */
-  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 265, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __pyx_t_5 = NULL;
   __pyx_t_6 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_4))) {
     __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
     if (likely(__pyx_t_5)) {
@@ -21049,80 +23349,80 @@
     }
   }
   #endif
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_1};
     __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
     __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 164, __pyx_L1_error)
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 265, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   }
   __pyx_v_chunk = __pyx_t_3;
   __pyx_t_3 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":165
+  /* "pybase16384/backends/cython/_core.pyx":266
  * 
  *     chunk = input.read(1)  # type: bytes
  *     if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *     if chunk == b"\xfe":  #
  */
   __pyx_t_2 = (!PyBytes_Check(__pyx_v_chunk));
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":166
+    /* "pybase16384/backends/cython/_core.pyx":267
  *     chunk = input.read(1)  # type: bytes
  *     if not PyBytes_Check(chunk):
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")             # <<<<<<<<<<<<<<
  *     if chunk == b"\xfe":  #
  *         input.read(1)
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 166, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 267, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 166, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 267, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 166, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 267, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 166, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 267, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __Pyx_Raise(__pyx_t_4, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __PYX_ERR(0, 166, __pyx_L1_error)
+    __PYX_ERR(0, 267, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":165
+    /* "pybase16384/backends/cython/_core.pyx":266
  * 
  *     chunk = input.read(1)  # type: bytes
  *     if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *     if chunk == b"\xfe":  #
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":167
+  /* "pybase16384/backends/cython/_core.pyx":268
  *     if not PyBytes_Check(chunk):
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *     if chunk == b"\xfe":  #             # <<<<<<<<<<<<<<
  *         input.read(1)
  *     else:
  */
-  __pyx_t_2 = (__Pyx_PyBytes_Equals(__pyx_v_chunk, __pyx_kp_b__11, Py_EQ)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 167, __pyx_L1_error)
+  __pyx_t_2 = (__Pyx_PyBytes_Equals(__pyx_v_chunk, __pyx_kp_b__11, Py_EQ)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 268, __pyx_L1_error)
   if (__pyx_t_2) {
 
-    /* "pybase16384/backends/cython/_core.pyx":168
+    /* "pybase16384/backends/cython/_core.pyx":269
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *     if chunk == b"\xfe":  #
  *         input.read(1)             # <<<<<<<<<<<<<<
  *     else:
  *         input.seek(0, 0)  #
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 168, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 269, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __pyx_t_5 = NULL;
     __pyx_t_6 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_3))) {
       __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
       if (likely(__pyx_t_5)) {
@@ -21134,139 +23434,139 @@
       }
     }
     #endif
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_1};
       __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 168, __pyx_L1_error)
+      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 269, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-    /* "pybase16384/backends/cython/_core.pyx":167
+    /* "pybase16384/backends/cython/_core.pyx":268
  *     if not PyBytes_Check(chunk):
  *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
  *     if chunk == b"\xfe":  #             # <<<<<<<<<<<<<<
  *         input.read(1)
  *     else:
  */
     goto __pyx_L7;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":170
+  /* "pybase16384/backends/cython/_core.pyx":271
  *         input.read(1)
  *     else:
  *         input.seek(0, 0)  #             # <<<<<<<<<<<<<<
  * 
  *     cdef int32_t current_buf_len = buf_rate * 8
  */
   /*else*/ {
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 170, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 271, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 170, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 271, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_L7:;
 
-  /* "pybase16384/backends/cython/_core.pyx":172
+  /* "pybase16384/backends/cython/_core.pyx":273
  *         input.seek(0, 0)  #
  * 
  *     cdef int32_t current_buf_len = buf_rate * 8             # <<<<<<<<<<<<<<
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  */
   __pyx_v_current_buf_len = (__pyx_v_buf_rate * 8);
 
-  /* "pybase16384/backends/cython/_core.pyx":173
+  /* "pybase16384/backends/cython/_core.pyx":274
  * 
  *     cdef int32_t current_buf_len = buf_rate * 8
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0) + 16             # <<<<<<<<<<<<<<
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  */
   __pyx_v_output_size = (((size_t)base16384_decode_len(((int)__pyx_v_current_buf_len), 0)) + 16);
 
-  /* "pybase16384/backends/cython/_core.pyx":174
+  /* "pybase16384/backends/cython/_core.pyx":275
  *     cdef int32_t current_buf_len = buf_rate * 8
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
  *     if output_buf == NULL:
  *         raise MemoryError
  */
   __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
 
-  /* "pybase16384/backends/cython/_core.pyx":175
+  /* "pybase16384/backends/cython/_core.pyx":276
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef Py_ssize_t size
  */
   __pyx_t_2 = (__pyx_v_output_buf == NULL);
   if (unlikely(__pyx_t_2)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":176
+    /* "pybase16384/backends/cython/_core.pyx":277
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef Py_ssize_t size
  *     cdef int count = 0
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 176, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 277, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":175
+    /* "pybase16384/backends/cython/_core.pyx":276
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0) + 16
  *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
  *     if output_buf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef Py_ssize_t size
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":178
+  /* "pybase16384/backends/cython/_core.pyx":279
  *         raise MemoryError
  *     cdef Py_ssize_t size
  *     cdef int count = 0             # <<<<<<<<<<<<<<
  *     cdef const char *chunk_ptr
  *     try:
  */
   __pyx_v_count = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":180
+  /* "pybase16384/backends/cython/_core.pyx":281
  *     cdef int count = 0
  *     cdef const char *chunk_ptr
  *     try:             # <<<<<<<<<<<<<<
  *         while True:
  *             chunk = input.read(current_buf_len)  # 8
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":181
+    /* "pybase16384/backends/cython/_core.pyx":282
  *     cdef const char *chunk_ptr
  *     try:
  *         while True:             # <<<<<<<<<<<<<<
  *             chunk = input.read(current_buf_len)  # 8
  *             size = PyBytes_Size(chunk)
  */
     while (1) {
 
-      /* "pybase16384/backends/cython/_core.pyx":182
+      /* "pybase16384/backends/cython/_core.pyx":283
  *     try:
  *         while True:
  *             chunk = input.read(current_buf_len)  # 8             # <<<<<<<<<<<<<<
  *             size = PyBytes_Size(chunk)
  *             if size == 0:
  */
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 182, __pyx_L10_error)
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 283, __pyx_L10_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 182, __pyx_L10_error)
+      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 283, __pyx_L10_error)
       __Pyx_GOTREF(__pyx_t_5);
       __pyx_t_7 = NULL;
       __pyx_t_6 = 0;
       #if CYTHON_UNPACK_METHODS
       if (likely(PyMethod_Check(__pyx_t_4))) {
         __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
         if (likely(__pyx_t_7)) {
@@ -21279,107 +23579,107 @@
       }
       #endif
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
         __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 182, __pyx_L10_error)
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 283, __pyx_L10_error)
         __Pyx_GOTREF(__pyx_t_3);
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       }
       __Pyx_DECREF_SET(__pyx_v_chunk, __pyx_t_3);
       __pyx_t_3 = 0;
 
-      /* "pybase16384/backends/cython/_core.pyx":183
+      /* "pybase16384/backends/cython/_core.pyx":284
  *         while True:
  *             chunk = input.read(current_buf_len)  # 8
  *             size = PyBytes_Size(chunk)             # <<<<<<<<<<<<<<
  *             if size == 0:
  *                 break
  */
-      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 183, __pyx_L10_error)
+      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 284, __pyx_L10_error)
       __pyx_v_size = __pyx_t_8;
 
-      /* "pybase16384/backends/cython/_core.pyx":184
+      /* "pybase16384/backends/cython/_core.pyx":285
  *             chunk = input.read(current_buf_len)  # 8
  *             size = PyBytes_Size(chunk)
  *             if size == 0:             # <<<<<<<<<<<<<<
  *                 break
  *             if <int32_t> size < current_buf_len:  #
  */
       __pyx_t_2 = (__pyx_v_size == 0);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":185
+        /* "pybase16384/backends/cython/_core.pyx":286
  *             size = PyBytes_Size(chunk)
  *             if size == 0:
  *                 break             # <<<<<<<<<<<<<<
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #
  */
         goto __pyx_L13_break;
 
-        /* "pybase16384/backends/cython/_core.pyx":184
+        /* "pybase16384/backends/cython/_core.pyx":285
  *             chunk = input.read(current_buf_len)  # 8
  *             size = PyBytes_Size(chunk)
  *             if size == 0:             # <<<<<<<<<<<<<<
  *                 break
  *             if <int32_t> size < current_buf_len:  #
  */
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":186
+      /* "pybase16384/backends/cython/_core.pyx":287
  *             if size == 0:
  *                 break
  *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
  *                 if buf_rate > 1:  #
  *                     buf_rate = buf_rate / 2  #
  */
       __pyx_t_2 = (((int32_t)__pyx_v_size) < __pyx_v_current_buf_len);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":187
+        /* "pybase16384/backends/cython/_core.pyx":288
  *                 break
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #             # <<<<<<<<<<<<<<
  *                     buf_rate = buf_rate / 2  #
  *                     current_buf_len = buf_rate * 8
  */
         __pyx_t_2 = (__pyx_v_buf_rate > 1);
         if (__pyx_t_2) {
 
-          /* "pybase16384/backends/cython/_core.pyx":188
+          /* "pybase16384/backends/cython/_core.pyx":289
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #
  *                     buf_rate = buf_rate / 2  #             # <<<<<<<<<<<<<<
  *                     current_buf_len = buf_rate * 8
  *                     input.seek(-size, 1)
  */
           __pyx_v_buf_rate = (((long)__pyx_v_buf_rate) / 2);
 
-          /* "pybase16384/backends/cython/_core.pyx":189
+          /* "pybase16384/backends/cython/_core.pyx":290
  *                 if buf_rate > 1:  #
  *                     buf_rate = buf_rate / 2  #
  *                     current_buf_len = buf_rate * 8             # <<<<<<<<<<<<<<
  *                     input.seek(-size, 1)
  *                     continue
  */
           __pyx_v_current_buf_len = (__pyx_v_buf_rate * 8);
 
-          /* "pybase16384/backends/cython/_core.pyx":190
+          /* "pybase16384/backends/cython/_core.pyx":291
  *                     buf_rate = buf_rate / 2  #
  *                     current_buf_len = buf_rate * 8
  *                     input.seek(-size, 1)             # <<<<<<<<<<<<<<
  *                     continue
  *             tmp = input.read(2)  # type: bytes
  */
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 190, __pyx_L10_error)
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 291, __pyx_L10_error)
           __Pyx_GOTREF(__pyx_t_4);
-          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 190, __pyx_L10_error)
+          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 291, __pyx_L10_error)
           __Pyx_GOTREF(__pyx_t_5);
           __pyx_t_7 = NULL;
           __pyx_t_6 = 0;
           #if CYTHON_UNPACK_METHODS
           if (likely(PyMethod_Check(__pyx_t_4))) {
             __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
             if (likely(__pyx_t_7)) {
@@ -21392,55 +23692,55 @@
           }
           #endif
           {
             PyObject *__pyx_callargs[3] = {__pyx_t_7, __pyx_t_5, __pyx_int_1};
             __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
             __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
             __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-            if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 190, __pyx_L10_error)
+            if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 291, __pyx_L10_error)
             __Pyx_GOTREF(__pyx_t_3);
             __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
           }
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-          /* "pybase16384/backends/cython/_core.pyx":191
+          /* "pybase16384/backends/cython/_core.pyx":292
  *                     current_buf_len = buf_rate * 8
  *                     input.seek(-size, 1)
  *                     continue             # <<<<<<<<<<<<<<
  *             tmp = input.read(2)  # type: bytes
  *             if PyBytes_Size(tmp) == 2:
  */
           goto __pyx_L12_continue;
 
-          /* "pybase16384/backends/cython/_core.pyx":187
+          /* "pybase16384/backends/cython/_core.pyx":288
  *                 break
  *             if <int32_t> size < current_buf_len:  #
  *                 if buf_rate > 1:  #             # <<<<<<<<<<<<<<
  *                     buf_rate = buf_rate / 2  #
  *                     current_buf_len = buf_rate * 8
  */
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":186
+        /* "pybase16384/backends/cython/_core.pyx":287
  *             if size == 0:
  *                 break
  *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
  *                 if buf_rate > 1:  #
  *                     buf_rate = buf_rate / 2  #
  */
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":192
+      /* "pybase16384/backends/cython/_core.pyx":293
  *                     input.seek(-size, 1)
  *                     continue
  *             tmp = input.read(2)  # type: bytes             # <<<<<<<<<<<<<<
  *             if PyBytes_Size(tmp) == 2:
  *                 if tmp[0] == 61:  # = stream   8n+2
  */
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 192, __pyx_L10_error)
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 293, __pyx_L10_error)
       __Pyx_GOTREF(__pyx_t_4);
       __pyx_t_5 = NULL;
       __pyx_t_6 = 0;
       #if CYTHON_UNPACK_METHODS
       if (likely(PyMethod_Check(__pyx_t_4))) {
         __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
         if (likely(__pyx_t_5)) {
@@ -21452,112 +23752,112 @@
         }
       }
       #endif
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_2};
         __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 192, __pyx_L10_error)
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 293, __pyx_L10_error)
         __Pyx_GOTREF(__pyx_t_3);
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       }
       __Pyx_XDECREF_SET(__pyx_v_tmp, __pyx_t_3);
       __pyx_t_3 = 0;
 
-      /* "pybase16384/backends/cython/_core.pyx":193
+      /* "pybase16384/backends/cython/_core.pyx":294
  *                     continue
  *             tmp = input.read(2)  # type: bytes
  *             if PyBytes_Size(tmp) == 2:             # <<<<<<<<<<<<<<
  *                 if tmp[0] == 61:  # = stream   8n+2
  *                     chunk += tmp
  */
-      __pyx_t_8 = PyBytes_Size(__pyx_v_tmp); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 193, __pyx_L10_error)
+      __pyx_t_8 = PyBytes_Size(__pyx_v_tmp); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 294, __pyx_L10_error)
       __pyx_t_2 = (__pyx_t_8 == 2);
       if (__pyx_t_2) {
 
-        /* "pybase16384/backends/cython/_core.pyx":194
+        /* "pybase16384/backends/cython/_core.pyx":295
  *             tmp = input.read(2)  # type: bytes
  *             if PyBytes_Size(tmp) == 2:
  *                 if tmp[0] == 61:  # = stream   8n+2             # <<<<<<<<<<<<<<
  *                     chunk += tmp
  *                     size += 2
  */
-        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_tmp, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 194, __pyx_L10_error)
+        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_tmp, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 295, __pyx_L10_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_2 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_3, __pyx_int_61, 61, 0)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 194, __pyx_L10_error)
+        __pyx_t_2 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_3, __pyx_int_61, 61, 0)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 295, __pyx_L10_error)
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         if (__pyx_t_2) {
 
-          /* "pybase16384/backends/cython/_core.pyx":195
+          /* "pybase16384/backends/cython/_core.pyx":296
  *             if PyBytes_Size(tmp) == 2:
  *                 if tmp[0] == 61:  # = stream   8n+2
  *                     chunk += tmp             # <<<<<<<<<<<<<<
  *                     size += 2
  *                 else:
  */
-          __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_chunk, __pyx_v_tmp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 195, __pyx_L10_error)
+          __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_chunk, __pyx_v_tmp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 296, __pyx_L10_error)
           __Pyx_GOTREF(__pyx_t_3);
           __Pyx_DECREF_SET(__pyx_v_chunk, __pyx_t_3);
           __pyx_t_3 = 0;
 
-          /* "pybase16384/backends/cython/_core.pyx":196
+          /* "pybase16384/backends/cython/_core.pyx":297
  *                 if tmp[0] == 61:  # = stream   8n+2
  *                     chunk += tmp
  *                     size += 2             # <<<<<<<<<<<<<<
  *                 else:
  *                     input.seek(-2, 1)
  */
           __pyx_v_size = (__pyx_v_size + 2);
 
-          /* "pybase16384/backends/cython/_core.pyx":194
+          /* "pybase16384/backends/cython/_core.pyx":295
  *             tmp = input.read(2)  # type: bytes
  *             if PyBytes_Size(tmp) == 2:
  *                 if tmp[0] == 61:  # = stream   8n+2             # <<<<<<<<<<<<<<
  *                     chunk += tmp
  *                     size += 2
  */
           goto __pyx_L18;
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":198
+        /* "pybase16384/backends/cython/_core.pyx":299
  *                     size += 2
  *                 else:
  *                     input.seek(-2, 1)             # <<<<<<<<<<<<<<
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
  *             with nogil:
  */
         /*else*/ {
-          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 198, __pyx_L10_error)
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 299, __pyx_L10_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 198, __pyx_L10_error)
+          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 299, __pyx_L10_error)
           __Pyx_GOTREF(__pyx_t_4);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         }
         __pyx_L18:;
 
-        /* "pybase16384/backends/cython/_core.pyx":193
+        /* "pybase16384/backends/cython/_core.pyx":294
  *                     continue
  *             tmp = input.read(2)  # type: bytes
  *             if PyBytes_Size(tmp) == 2:             # <<<<<<<<<<<<<<
  *                 if tmp[0] == 61:  # = stream   8n+2
  *                     chunk += tmp
  */
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":199
+      /* "pybase16384/backends/cython/_core.pyx":300
  *                 else:
  *                     input.seek(-2, 1)
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)             # <<<<<<<<<<<<<<
  *             with nogil:
  *                 count = b14_decode(chunk_ptr, <int> size, output_buf)
  */
       __pyx_v_chunk_ptr = ((char const *)PyBytes_AS_STRING(__pyx_v_chunk));
 
-      /* "pybase16384/backends/cython/_core.pyx":200
+      /* "pybase16384/backends/cython/_core.pyx":301
  *                     input.seek(-2, 1)
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
  *             with nogil:             # <<<<<<<<<<<<<<
  *                 count = b14_decode(chunk_ptr, <int> size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  */
       {
@@ -21565,25 +23865,25 @@
           PyThreadState *_save;
           _save = NULL;
           Py_UNBLOCK_THREADS
           __Pyx_FastGIL_Remember();
           #endif
           /*try:*/ {
 
-            /* "pybase16384/backends/cython/_core.pyx":201
+            /* "pybase16384/backends/cython/_core.pyx":302
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
  *             with nogil:
  *                 count = b14_decode(chunk_ptr, <int> size, output_buf)             # <<<<<<<<<<<<<<
  *             output.write(<bytes>output_buf[:count])
  *     finally:
  */
             __pyx_v_count = base16384_decode(__pyx_v_chunk_ptr, ((int)__pyx_v_size), __pyx_v_output_buf);
           }
 
-          /* "pybase16384/backends/cython/_core.pyx":200
+          /* "pybase16384/backends/cython/_core.pyx":301
  *                     input.seek(-2, 1)
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
  *             with nogil:             # <<<<<<<<<<<<<<
  *                 count = b14_decode(chunk_ptr, <int> size, output_buf)
  *             output.write(<bytes>output_buf[:count])
  */
           /*finally:*/ {
@@ -21594,24 +23894,24 @@
               #endif
               goto __pyx_L23;
             }
             __pyx_L23:;
           }
       }
 
-      /* "pybase16384/backends/cython/_core.pyx":202
+      /* "pybase16384/backends/cython/_core.pyx":303
  *             with nogil:
  *                 count = b14_decode(chunk_ptr, <int> size, output_buf)
  *             output.write(<bytes>output_buf[:count])             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(output_buf)
  */
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 202, __pyx_L10_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 303, __pyx_L10_error)
       __Pyx_GOTREF(__pyx_t_3);
-      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 202, __pyx_L10_error)
+      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 303, __pyx_L10_error)
       __Pyx_GOTREF(__pyx_t_5);
       __pyx_t_7 = NULL;
       __pyx_t_6 = 0;
       #if CYTHON_UNPACK_METHODS
       if (likely(PyMethod_Check(__pyx_t_3))) {
         __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
         if (likely(__pyx_t_7)) {
@@ -21624,30 +23924,30 @@
       }
       #endif
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
         __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 202, __pyx_L10_error)
+        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 303, __pyx_L10_error)
         __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       __pyx_L12_continue:;
     }
     __pyx_L13_break:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":204
+  /* "pybase16384/backends/cython/_core.pyx":305
  *             output.write(<bytes>output_buf[:count])
  *     finally:
  *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
  * 
- * cpdef inline bint is_64bits() nogil:
+ * def decode_file_safe(object input,
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_output_buf);
       goto __pyx_L11;
     }
     __pyx_L10_error:;
@@ -21684,15 +23984,15 @@
       __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_9; __pyx_filename = __pyx_t_10;
       goto __pyx_L1_error;
     }
     __pyx_L11:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":154
+  /* "pybase16384/backends/cython/_core.pyx":255
  *         PyMem_Free(output_buf)
  * 
  * def decode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        int32_t buf_rate = 10):
  */
 
@@ -21710,78 +24010,1043 @@
   __Pyx_XDECREF(__pyx_v_chunk);
   __Pyx_XDECREF(__pyx_v_tmp);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":206
+/* "pybase16384/backends/cython/_core.pyx":307
+ *         PyMem_Free(output_buf)
+ * 
+ * def decode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_27decode_file_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_26decode_file_safe, "decode_file_safe(input, output, int32_t buf_rate=10)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_27decode_file_safe = {"decode_file_safe", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_27decode_file_safe, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_26decode_file_safe};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_27decode_file_safe(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_input = 0;
+  PyObject *__pyx_v_output = 0;
+  int32_t __pyx_v_buf_rate;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[3] = {0,0,0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("decode_file_safe (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_input,&__pyx_n_s_output,&__pyx_n_s_buf_rate,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_input)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 307, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_output)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 307, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("decode_file_safe", 0, 2, 3, 1); __PYX_ERR(0, 307, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_buf_rate);
+          if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 307, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_file_safe") < 0)) __PYX_ERR(0, 307, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_input = values[0];
+    __pyx_v_output = values[1];
+    if (values[2]) {
+      __pyx_v_buf_rate = __Pyx_PyInt_As_int32_t(values[2]); if (unlikely((__pyx_v_buf_rate == ((int32_t)-1)) && PyErr_Occurred())) __PYX_ERR(0, 309, __pyx_L3_error)
+    } else {
+      __pyx_v_buf_rate = ((int32_t)((int32_t)10));
+    }
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("decode_file_safe", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 307, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_file_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_26decode_file_safe(__pyx_self, __pyx_v_input, __pyx_v_output, __pyx_v_buf_rate);
+
+  /* function exit code */
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_26decode_file_safe(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input, PyObject *__pyx_v_output, int32_t __pyx_v_buf_rate) {
+  PyObject *__pyx_v_chunk = NULL;
+  int32_t __pyx_v_current_buf_len;
+  size_t __pyx_v_output_size;
+  char *__pyx_v_output_buf;
+  Py_ssize_t __pyx_v_size;
+  int __pyx_v_count;
+  char const *__pyx_v_chunk_ptr;
+  PyObject *__pyx_v_tmp = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  uint8_t __pyx_t_1;
+  int __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  int __pyx_t_6;
+  PyObject *__pyx_t_7 = NULL;
+  Py_ssize_t __pyx_t_8;
+  int __pyx_t_9;
+  char const *__pyx_t_10;
+  PyObject *__pyx_t_11 = NULL;
+  PyObject *__pyx_t_12 = NULL;
+  PyObject *__pyx_t_13 = NULL;
+  PyObject *__pyx_t_14 = NULL;
+  PyObject *__pyx_t_15 = NULL;
+  PyObject *__pyx_t_16 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("decode_file_safe", 1);
+
+  /* "pybase16384/backends/cython/_core.pyx":310
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ */
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_input); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 310, __pyx_L1_error)
+  __pyx_t_2 = (!(__pyx_t_1 != 0));
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":311
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)             # <<<<<<<<<<<<<<
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 311, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_input_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 311, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 311, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 311, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":310
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):             # <<<<<<<<<<<<<<
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":312
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ */
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_PyFile_Check(__pyx_v_output); if (unlikely(__pyx_t_1 == ((uint8_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 312, __pyx_L1_error)
+  __pyx_t_2 = (!(__pyx_t_1 != 0));
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":313
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)             # <<<<<<<<<<<<<<
+ *     if buf_rate <= 0:
+ *         buf_rate = 1
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_output)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 313, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyUnicode_FormatSafe(__pyx_kp_u_output_except_a_file_like_object, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 313, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 313, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 313, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":312
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ *     if not PyFile_Check(output):             # <<<<<<<<<<<<<<
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":314
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
+ *         buf_rate = 1
+ * 
+ */
+  __pyx_t_2 = (__pyx_v_buf_rate <= 0);
+  if (__pyx_t_2) {
+
+    /* "pybase16384/backends/cython/_core.pyx":315
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:
+ *         buf_rate = 1             # <<<<<<<<<<<<<<
+ * 
+ *     chunk = input.read(1)  # type: bytes
+ */
+    __pyx_v_buf_rate = 1;
+
+    /* "pybase16384/backends/cython/_core.pyx":314
+ *     if not PyFile_Check(output):
+ *         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+ *     if buf_rate <= 0:             # <<<<<<<<<<<<<<
+ *         buf_rate = 1
+ * 
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":317
+ *         buf_rate = 1
+ * 
+ *     chunk = input.read(1)  # type: bytes             # <<<<<<<<<<<<<<
+ *     if not PyBytes_Check(chunk):
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ */
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 317, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = NULL;
+  __pyx_t_6 = 0;
+  #if CYTHON_UNPACK_METHODS
+  if (likely(PyMethod_Check(__pyx_t_4))) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+    if (likely(__pyx_t_5)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+      __Pyx_INCREF(__pyx_t_5);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_4, function);
+      __pyx_t_6 = 1;
+    }
+  }
+  #endif
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_1};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 317, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  }
+  __pyx_v_chunk = __pyx_t_3;
+  __pyx_t_3 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":318
+ * 
+ *     chunk = input.read(1)  # type: bytes
+ *     if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *     if chunk == b"\xfe":  #
+ */
+  __pyx_t_2 = (!PyBytes_Check(__pyx_v_chunk));
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":319
+ *     chunk = input.read(1)  # type: bytes
+ *     if not PyBytes_Check(chunk):
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")             # <<<<<<<<<<<<<<
+ *     if chunk == b"\xfe":  #
+ *         input.read(1)
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(__pyx_v_input)), __pyx_n_s_name_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 319, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 319, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_input_must_be_a_file_like_rb_obj, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 319, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_TypeError, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 319, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_Raise(__pyx_t_4, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __PYX_ERR(0, 319, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":318
+ * 
+ *     chunk = input.read(1)  # type: bytes
+ *     if not PyBytes_Check(chunk):             # <<<<<<<<<<<<<<
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *     if chunk == b"\xfe":  #
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":320
+ *     if not PyBytes_Check(chunk):
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *     if chunk == b"\xfe":  #             # <<<<<<<<<<<<<<
+ *         input.read(1)
+ *     else:
+ */
+  __pyx_t_2 = (__Pyx_PyBytes_Equals(__pyx_v_chunk, __pyx_kp_b__11, Py_EQ)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 320, __pyx_L1_error)
+  if (__pyx_t_2) {
+
+    /* "pybase16384/backends/cython/_core.pyx":321
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *     if chunk == b"\xfe":  #
+ *         input.read(1)             # <<<<<<<<<<<<<<
+ *     else:
+ *         input.seek(0, 0)  #
+ */
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 321, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = NULL;
+    __pyx_t_6 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (likely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_6 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_1};
+      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 321, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+    /* "pybase16384/backends/cython/_core.pyx":320
+ *     if not PyBytes_Check(chunk):
+ *         raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+ *     if chunk == b"\xfe":  #             # <<<<<<<<<<<<<<
+ *         input.read(1)
+ *     else:
+ */
+    goto __pyx_L7;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":323
+ *         input.read(1)
+ *     else:
+ *         input.seek(0, 0)  #             # <<<<<<<<<<<<<<
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 8
+ */
+  /*else*/ {
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 323, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 323, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __pyx_L7:;
+
+  /* "pybase16384/backends/cython/_core.pyx":325
+ *         input.seek(0, 0)  #
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 8             # <<<<<<<<<<<<<<
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ */
+  __pyx_v_current_buf_len = (__pyx_v_buf_rate * 8);
+
+  /* "pybase16384/backends/cython/_core.pyx":326
+ * 
+ *     cdef int32_t current_buf_len = buf_rate * 8
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)             # <<<<<<<<<<<<<<
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ */
+  __pyx_v_output_size = ((size_t)base16384_decode_len(((int)__pyx_v_current_buf_len), 0));
+
+  /* "pybase16384/backends/cython/_core.pyx":327
+ *     cdef int32_t current_buf_len = buf_rate * 8
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)             # <<<<<<<<<<<<<<
+ *     if output_buf == NULL:
+ *         raise MemoryError
+ */
+  __pyx_v_output_buf = ((char *)PyMem_Malloc(__pyx_v_output_size));
+
+  /* "pybase16384/backends/cython/_core.pyx":328
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef Py_ssize_t size
+ */
+  __pyx_t_2 = (__pyx_v_output_buf == NULL);
+  if (unlikely(__pyx_t_2)) {
+
+    /* "pybase16384/backends/cython/_core.pyx":329
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:
+ *         raise MemoryError             # <<<<<<<<<<<<<<
+ *     cdef Py_ssize_t size
+ *     cdef int count = 0
+ */
+    PyErr_NoMemory(); __PYX_ERR(0, 329, __pyx_L1_error)
+
+    /* "pybase16384/backends/cython/_core.pyx":328
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)
+ *     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+ *     if output_buf == NULL:             # <<<<<<<<<<<<<<
+ *         raise MemoryError
+ *     cdef Py_ssize_t size
+ */
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":331
+ *         raise MemoryError
+ *     cdef Py_ssize_t size
+ *     cdef int count = 0             # <<<<<<<<<<<<<<
+ *     cdef const char *chunk_ptr
+ *     try:
+ */
+  __pyx_v_count = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":333
+ *     cdef int count = 0
+ *     cdef const char *chunk_ptr
+ *     try:             # <<<<<<<<<<<<<<
+ *         while True:
+ *             chunk = input.read(current_buf_len)  # 8
+ */
+  /*try:*/ {
+
+    /* "pybase16384/backends/cython/_core.pyx":334
+ *     cdef const char *chunk_ptr
+ *     try:
+ *         while True:             # <<<<<<<<<<<<<<
+ *             chunk = input.read(current_buf_len)  # 8
+ *             size = PyBytes_Size(chunk)
+ */
+    while (1) {
+
+      /* "pybase16384/backends/cython/_core.pyx":335
+ *     try:
+ *         while True:
+ *             chunk = input.read(current_buf_len)  # 8             # <<<<<<<<<<<<<<
+ *             size = PyBytes_Size(chunk)
+ *             if size == 0:
+ */
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 335, __pyx_L10_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_5 = __Pyx_PyInt_From_int32_t(__pyx_v_current_buf_len); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 335, __pyx_L10_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_7 = NULL;
+      __pyx_t_6 = 0;
+      #if CYTHON_UNPACK_METHODS
+      if (likely(PyMethod_Check(__pyx_t_4))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+          __Pyx_INCREF(__pyx_t_7);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_4, function);
+          __pyx_t_6 = 1;
+        }
+      }
+      #endif
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
+        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 335, __pyx_L10_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      }
+      __Pyx_DECREF_SET(__pyx_v_chunk, __pyx_t_3);
+      __pyx_t_3 = 0;
+
+      /* "pybase16384/backends/cython/_core.pyx":336
+ *         while True:
+ *             chunk = input.read(current_buf_len)  # 8
+ *             size = PyBytes_Size(chunk)             # <<<<<<<<<<<<<<
+ *             if size == 0:
+ *                 break
+ */
+      __pyx_t_8 = PyBytes_Size(__pyx_v_chunk); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 336, __pyx_L10_error)
+      __pyx_v_size = __pyx_t_8;
+
+      /* "pybase16384/backends/cython/_core.pyx":337
+ *             chunk = input.read(current_buf_len)  # 8
+ *             size = PyBytes_Size(chunk)
+ *             if size == 0:             # <<<<<<<<<<<<<<
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #
+ */
+      __pyx_t_2 = (__pyx_v_size == 0);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":338
+ *             size = PyBytes_Size(chunk)
+ *             if size == 0:
+ *                 break             # <<<<<<<<<<<<<<
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #
+ */
+        goto __pyx_L13_break;
+
+        /* "pybase16384/backends/cython/_core.pyx":337
+ *             chunk = input.read(current_buf_len)  # 8
+ *             size = PyBytes_Size(chunk)
+ *             if size == 0:             # <<<<<<<<<<<<<<
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #
+ */
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":339
+ *             if size == 0:
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
+ *                 if buf_rate > 1:  #
+ *                     buf_rate = buf_rate / 2  #
+ */
+      __pyx_t_2 = (((int32_t)__pyx_v_size) < __pyx_v_current_buf_len);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":340
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #             # <<<<<<<<<<<<<<
+ *                     buf_rate = buf_rate / 2  #
+ *                     current_buf_len = buf_rate * 8
+ */
+        __pyx_t_2 = (__pyx_v_buf_rate > 1);
+        if (__pyx_t_2) {
+
+          /* "pybase16384/backends/cython/_core.pyx":341
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #
+ *                     buf_rate = buf_rate / 2  #             # <<<<<<<<<<<<<<
+ *                     current_buf_len = buf_rate * 8
+ *                     input.seek(-size, 1)
+ */
+          __pyx_v_buf_rate = (((long)__pyx_v_buf_rate) / 2);
+
+          /* "pybase16384/backends/cython/_core.pyx":342
+ *                 if buf_rate > 1:  #
+ *                     buf_rate = buf_rate / 2  #
+ *                     current_buf_len = buf_rate * 8             # <<<<<<<<<<<<<<
+ *                     input.seek(-size, 1)
+ *                     continue
+ */
+          __pyx_v_current_buf_len = (__pyx_v_buf_rate * 8);
+
+          /* "pybase16384/backends/cython/_core.pyx":343
+ *                     buf_rate = buf_rate / 2  #
+ *                     current_buf_len = buf_rate * 8
+ *                     input.seek(-size, 1)             # <<<<<<<<<<<<<<
+ *                     continue
+ *             tmp = input.read(2)  # type: bytes
+ */
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 343, __pyx_L10_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __pyx_t_5 = PyInt_FromSsize_t((-__pyx_v_size)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 343, __pyx_L10_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __pyx_t_7 = NULL;
+          __pyx_t_6 = 0;
+          #if CYTHON_UNPACK_METHODS
+          if (likely(PyMethod_Check(__pyx_t_4))) {
+            __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
+            if (likely(__pyx_t_7)) {
+              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+              __Pyx_INCREF(__pyx_t_7);
+              __Pyx_INCREF(function);
+              __Pyx_DECREF_SET(__pyx_t_4, function);
+              __pyx_t_6 = 1;
+            }
+          }
+          #endif
+          {
+            PyObject *__pyx_callargs[3] = {__pyx_t_7, __pyx_t_5, __pyx_int_1};
+            __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
+            __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+            if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 343, __pyx_L10_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+          }
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+          /* "pybase16384/backends/cython/_core.pyx":344
+ *                     current_buf_len = buf_rate * 8
+ *                     input.seek(-size, 1)
+ *                     continue             # <<<<<<<<<<<<<<
+ *             tmp = input.read(2)  # type: bytes
+ *             if PyBytes_Size(tmp) == 2:
+ */
+          goto __pyx_L12_continue;
+
+          /* "pybase16384/backends/cython/_core.pyx":340
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #
+ *                 if buf_rate > 1:  #             # <<<<<<<<<<<<<<
+ *                     buf_rate = buf_rate / 2  #
+ *                     current_buf_len = buf_rate * 8
+ */
+        }
+
+        /* "pybase16384/backends/cython/_core.pyx":339
+ *             if size == 0:
+ *                 break
+ *             if <int32_t> size < current_buf_len:  #             # <<<<<<<<<<<<<<
+ *                 if buf_rate > 1:  #
+ *                     buf_rate = buf_rate / 2  #
+ */
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":345
+ *                     input.seek(-size, 1)
+ *                     continue
+ *             tmp = input.read(2)  # type: bytes             # <<<<<<<<<<<<<<
+ *             if PyBytes_Size(tmp) == 2:
+ *                 if tmp[0] == 61:  # = stream   8n+2
+ */
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_read); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 345, __pyx_L10_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_5 = NULL;
+      __pyx_t_6 = 0;
+      #if CYTHON_UNPACK_METHODS
+      if (likely(PyMethod_Check(__pyx_t_4))) {
+        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+        if (likely(__pyx_t_5)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+          __Pyx_INCREF(__pyx_t_5);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_4, function);
+          __pyx_t_6 = 1;
+        }
+      }
+      #endif
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_int_2};
+        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 345, __pyx_L10_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      }
+      __Pyx_XDECREF_SET(__pyx_v_tmp, __pyx_t_3);
+      __pyx_t_3 = 0;
+
+      /* "pybase16384/backends/cython/_core.pyx":346
+ *                     continue
+ *             tmp = input.read(2)  # type: bytes
+ *             if PyBytes_Size(tmp) == 2:             # <<<<<<<<<<<<<<
+ *                 if tmp[0] == 61:  # = stream   8n+2
+ *                     chunk += tmp
+ */
+      __pyx_t_8 = PyBytes_Size(__pyx_v_tmp); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1L))) __PYX_ERR(0, 346, __pyx_L10_error)
+      __pyx_t_2 = (__pyx_t_8 == 2);
+      if (__pyx_t_2) {
+
+        /* "pybase16384/backends/cython/_core.pyx":347
+ *             tmp = input.read(2)  # type: bytes
+ *             if PyBytes_Size(tmp) == 2:
+ *                 if tmp[0] == 61:  # = stream   8n+2             # <<<<<<<<<<<<<<
+ *                     chunk += tmp
+ *                     size += 2
+ */
+        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_tmp, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 347, __pyx_L10_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __pyx_t_2 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_3, __pyx_int_61, 61, 0)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 347, __pyx_L10_error)
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+        if (__pyx_t_2) {
+
+          /* "pybase16384/backends/cython/_core.pyx":348
+ *             if PyBytes_Size(tmp) == 2:
+ *                 if tmp[0] == 61:  # = stream   8n+2
+ *                     chunk += tmp             # <<<<<<<<<<<<<<
+ *                     size += 2
+ *                 else:
+ */
+          __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_chunk, __pyx_v_tmp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 348, __pyx_L10_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF_SET(__pyx_v_chunk, __pyx_t_3);
+          __pyx_t_3 = 0;
+
+          /* "pybase16384/backends/cython/_core.pyx":349
+ *                 if tmp[0] == 61:  # = stream   8n+2
+ *                     chunk += tmp
+ *                     size += 2             # <<<<<<<<<<<<<<
+ *                 else:
+ *                     input.seek(-2, 1)
+ */
+          __pyx_v_size = (__pyx_v_size + 2);
+
+          /* "pybase16384/backends/cython/_core.pyx":347
+ *             tmp = input.read(2)  # type: bytes
+ *             if PyBytes_Size(tmp) == 2:
+ *                 if tmp[0] == 61:  # = stream   8n+2             # <<<<<<<<<<<<<<
+ *                     chunk += tmp
+ *                     size += 2
+ */
+          goto __pyx_L18;
+        }
+
+        /* "pybase16384/backends/cython/_core.pyx":351
+ *                     size += 2
+ *                 else:
+ *                     input.seek(-2, 1)             # <<<<<<<<<<<<<<
+ *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
+ *             with nogil:
+ */
+        /*else*/ {
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_input, __pyx_n_s_seek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 351, __pyx_L10_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 351, __pyx_L10_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        }
+        __pyx_L18:;
+
+        /* "pybase16384/backends/cython/_core.pyx":346
+ *                     continue
+ *             tmp = input.read(2)  # type: bytes
+ *             if PyBytes_Size(tmp) == 2:             # <<<<<<<<<<<<<<
+ *                 if tmp[0] == 61:  # = stream   8n+2
+ *                     chunk += tmp
+ */
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":352
+ *                 else:
+ *                     input.seek(-2, 1)
+ *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)             # <<<<<<<<<<<<<<
+ *             with nogil:
+ *                 count = b14_decode_safe(chunk_ptr, <int> size, output_buf)
+ */
+      __pyx_v_chunk_ptr = ((char const *)PyBytes_AS_STRING(__pyx_v_chunk));
+
+      /* "pybase16384/backends/cython/_core.pyx":353
+ *                     input.seek(-2, 1)
+ *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
+ *             with nogil:             # <<<<<<<<<<<<<<
+ *                 count = b14_decode_safe(chunk_ptr, <int> size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ */
+      {
+          #ifdef WITH_THREAD
+          PyThreadState *_save;
+          _save = NULL;
+          Py_UNBLOCK_THREADS
+          __Pyx_FastGIL_Remember();
+          #endif
+          /*try:*/ {
+
+            /* "pybase16384/backends/cython/_core.pyx":354
+ *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
+ *             with nogil:
+ *                 count = b14_decode_safe(chunk_ptr, <int> size, output_buf)             # <<<<<<<<<<<<<<
+ *             output.write(<bytes>output_buf[:count])
+ *     finally:
+ */
+            __pyx_v_count = base16384_decode_safe(__pyx_v_chunk_ptr, ((int)__pyx_v_size), __pyx_v_output_buf);
+          }
+
+          /* "pybase16384/backends/cython/_core.pyx":353
+ *                     input.seek(-2, 1)
+ *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
+ *             with nogil:             # <<<<<<<<<<<<<<
+ *                 count = b14_decode_safe(chunk_ptr, <int> size, output_buf)
+ *             output.write(<bytes>output_buf[:count])
+ */
+          /*finally:*/ {
+            /*normal exit:*/{
+              #ifdef WITH_THREAD
+              __Pyx_FastGIL_Forget();
+              Py_BLOCK_THREADS
+              #endif
+              goto __pyx_L23;
+            }
+            __pyx_L23:;
+          }
+      }
+
+      /* "pybase16384/backends/cython/_core.pyx":355
+ *             with nogil:
+ *                 count = b14_decode_safe(chunk_ptr, <int> size, output_buf)
+ *             output.write(<bytes>output_buf[:count])             # <<<<<<<<<<<<<<
+ *     finally:
+ *         PyMem_Free(output_buf)
+ */
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_output, __pyx_n_s_write); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 355, __pyx_L10_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_5 = __Pyx_PyBytes_FromStringAndSize(__pyx_v_output_buf + 0, __pyx_v_count - 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 355, __pyx_L10_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_7 = NULL;
+      __pyx_t_6 = 0;
+      #if CYTHON_UNPACK_METHODS
+      if (likely(PyMethod_Check(__pyx_t_3))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+          __Pyx_INCREF(__pyx_t_7);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_3, function);
+          __pyx_t_6 = 1;
+        }
+      }
+      #endif
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
+        __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 355, __pyx_L10_error)
+        __Pyx_GOTREF(__pyx_t_4);
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      }
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __pyx_L12_continue:;
+    }
+    __pyx_L13_break:;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":357
+ *             output.write(<bytes>output_buf[:count])
+ *     finally:
+ *         PyMem_Free(output_buf)             # <<<<<<<<<<<<<<
+ * 
+ * cpdef inline bint is_64bits() nogil:
+ */
+  /*finally:*/ {
+    /*normal exit:*/{
+      PyMem_Free(__pyx_v_output_buf);
+      goto __pyx_L11;
+    }
+    __pyx_L10_error:;
+    /*exception exit:*/{
+      __Pyx_PyThreadState_declare
+      __Pyx_PyThreadState_assign
+      __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (PY_MAJOR_VERSION >= 3) __Pyx_ExceptionSwap(&__pyx_t_14, &__pyx_t_15, &__pyx_t_16);
+      if ((PY_MAJOR_VERSION < 3) || unlikely(__Pyx_GetException(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13) < 0)) __Pyx_ErrFetch(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
+      __Pyx_XGOTREF(__pyx_t_11);
+      __Pyx_XGOTREF(__pyx_t_12);
+      __Pyx_XGOTREF(__pyx_t_13);
+      __Pyx_XGOTREF(__pyx_t_14);
+      __Pyx_XGOTREF(__pyx_t_15);
+      __Pyx_XGOTREF(__pyx_t_16);
+      __pyx_t_6 = __pyx_lineno; __pyx_t_9 = __pyx_clineno; __pyx_t_10 = __pyx_filename;
+      {
+        PyMem_Free(__pyx_v_output_buf);
+      }
+      if (PY_MAJOR_VERSION >= 3) {
+        __Pyx_XGIVEREF(__pyx_t_14);
+        __Pyx_XGIVEREF(__pyx_t_15);
+        __Pyx_XGIVEREF(__pyx_t_16);
+        __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
+      }
+      __Pyx_XGIVEREF(__pyx_t_11);
+      __Pyx_XGIVEREF(__pyx_t_12);
+      __Pyx_XGIVEREF(__pyx_t_13);
+      __Pyx_ErrRestore(__pyx_t_11, __pyx_t_12, __pyx_t_13);
+      __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0;
+      __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_9; __pyx_filename = __pyx_t_10;
+      goto __pyx_L1_error;
+    }
+    __pyx_L11:;
+  }
+
+  /* "pybase16384/backends/cython/_core.pyx":307
+ *         PyMem_Free(output_buf)
+ * 
+ * def decode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ */
+
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_file_safe", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_chunk);
+  __Pyx_XDECREF(__pyx_v_tmp);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pybase16384/backends/cython/_core.pyx":359
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bint is_64bits() nogil:             # <<<<<<<<<<<<<<
  *     return pybase16384_64bits()
  * 
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
 static CYTHON_INLINE int __pyx_f_11pybase16384_8backends_6cython_5_core_is_64bits(CYTHON_UNUSED int __pyx_skip_dispatch) {
   int __pyx_r;
 
-  /* "pybase16384/backends/cython/_core.pyx":207
+  /* "pybase16384/backends/cython/_core.pyx":360
  * 
  * cpdef inline bint is_64bits() nogil:
  *     return pybase16384_64bits()             # <<<<<<<<<<<<<<
  * 
  * cdef inline str err_to_str(base16384_err_t ret):
  */
   __pyx_r = pybase16384_64bits();
   goto __pyx_L0;
 
-  /* "pybase16384/backends/cython/_core.pyx":206
+  /* "pybase16384/backends/cython/_core.pyx":359
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bint is_64bits() nogil:             # <<<<<<<<<<<<<<
  *     return pybase16384_64bits()
  * 
  */
 
   /* function exit code */
   __pyx_L0:;
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_16is_64bits, "is_64bits() -> bool");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_17is_64bits = {"is_64bits", (PyCFunction)__pyx_pw_11pybase16384_8backends_6cython_5_core_17is_64bits, METH_NOARGS, __pyx_doc_11pybase16384_8backends_6cython_5_core_16is_64bits};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_17is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_28is_64bits, "is_64bits() -> bool");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_29is_64bits = {"is_64bits", (PyCFunction)__pyx_pw_11pybase16384_8backends_6cython_5_core_29is_64bits, METH_NOARGS, __pyx_doc_11pybase16384_8backends_6cython_5_core_28is_64bits};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29is_64bits(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("is_64bits (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_16is_64bits(__pyx_self);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_28is_64bits(__pyx_self);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_16is_64bits(CYTHON_UNUSED PyObject *__pyx_self) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_28is_64bits(CYTHON_UNUSED PyObject *__pyx_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("is_64bits", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_is_64bits(0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 206, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_is_64bits(0); if (unlikely(__pyx_t_1 == ((int)-1) && PyErr_Occurred())) __PYX_ERR(0, 359, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 359, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -21790,259 +25055,259 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":209
+/* "pybase16384/backends/cython/_core.pyx":362
  *     return pybase16384_64bits()
  * 
  * cdef inline str err_to_str(base16384_err_t ret):             # <<<<<<<<<<<<<<
  *     if ret == base16384_err_get_file_size:
  *         return "base16384_err_get_file_size"
  */
 
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(base16384_err_t __pyx_v_ret) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("err_to_str", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":210
+  /* "pybase16384/backends/cython/_core.pyx":363
  * 
  * cdef inline str err_to_str(base16384_err_t ret):
  *     if ret == base16384_err_get_file_size:             # <<<<<<<<<<<<<<
  *         return "base16384_err_get_file_size"
  *     elif ret == base16384_err_fopen_output_file:
  */
   switch (__pyx_v_ret) {
     case base16384_err_get_file_size:
 
-    /* "pybase16384/backends/cython/_core.pyx":211
+    /* "pybase16384/backends/cython/_core.pyx":364
  * cdef inline str err_to_str(base16384_err_t ret):
  *     if ret == base16384_err_get_file_size:
  *         return "base16384_err_get_file_size"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_fopen_output_file:
  *         return "base16384_err_fopen_output_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_get_file_size);
     __pyx_r = __pyx_n_u_base16384_err_get_file_size;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":210
+    /* "pybase16384/backends/cython/_core.pyx":363
  * 
  * cdef inline str err_to_str(base16384_err_t ret):
  *     if ret == base16384_err_get_file_size:             # <<<<<<<<<<<<<<
  *         return "base16384_err_get_file_size"
  *     elif ret == base16384_err_fopen_output_file:
  */
     break;
     case base16384_err_fopen_output_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":213
+    /* "pybase16384/backends/cython/_core.pyx":366
  *         return "base16384_err_get_file_size"
  *     elif ret == base16384_err_fopen_output_file:
  *         return "base16384_err_fopen_output_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_fopen_input_file:
  *         return "base16384_err_fopen_input_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_fopen_output_file);
     __pyx_r = __pyx_n_u_base16384_err_fopen_output_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":212
+    /* "pybase16384/backends/cython/_core.pyx":365
  *     if ret == base16384_err_get_file_size:
  *         return "base16384_err_get_file_size"
  *     elif ret == base16384_err_fopen_output_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_fopen_output_file"
  *     elif ret == base16384_err_fopen_input_file:
  */
     break;
     case base16384_err_fopen_input_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":215
+    /* "pybase16384/backends/cython/_core.pyx":368
  *         return "base16384_err_fopen_output_file"
  *     elif ret == base16384_err_fopen_input_file:
  *         return "base16384_err_fopen_input_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_write_file:
  *         return "base16384_err_write_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_fopen_input_file);
     __pyx_r = __pyx_n_u_base16384_err_fopen_input_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":214
+    /* "pybase16384/backends/cython/_core.pyx":367
  *     elif ret == base16384_err_fopen_output_file:
  *         return "base16384_err_fopen_output_file"
  *     elif ret == base16384_err_fopen_input_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_fopen_input_file"
  *     elif ret == base16384_err_write_file:
  */
     break;
     case base16384_err_write_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":217
+    /* "pybase16384/backends/cython/_core.pyx":370
  *         return "base16384_err_fopen_input_file"
  *     elif ret == base16384_err_write_file:
  *         return "base16384_err_write_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_open_input_file:
  *         return "base16384_err_open_input_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_write_file);
     __pyx_r = __pyx_n_u_base16384_err_write_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":216
+    /* "pybase16384/backends/cython/_core.pyx":369
  *     elif ret == base16384_err_fopen_input_file:
  *         return "base16384_err_fopen_input_file"
  *     elif ret == base16384_err_write_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_write_file"
  *     elif ret == base16384_err_open_input_file:
  */
     break;
     case base16384_err_open_input_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":219
+    /* "pybase16384/backends/cython/_core.pyx":372
  *         return "base16384_err_write_file"
  *     elif ret == base16384_err_open_input_file:
  *         return "base16384_err_open_input_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_map_input_file:
  *         return "base16384_err_map_input_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_open_input_file);
     __pyx_r = __pyx_n_u_base16384_err_open_input_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":218
+    /* "pybase16384/backends/cython/_core.pyx":371
  *     elif ret == base16384_err_write_file:
  *         return "base16384_err_write_file"
  *     elif ret == base16384_err_open_input_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_open_input_file"
  *     elif ret == base16384_err_map_input_file:
  */
     break;
     case base16384_err_map_input_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":221
+    /* "pybase16384/backends/cython/_core.pyx":374
  *         return "base16384_err_open_input_file"
  *     elif ret == base16384_err_map_input_file:
  *         return "base16384_err_map_input_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_read_file:
  *         return "base16384_err_read_file"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_map_input_file);
     __pyx_r = __pyx_n_u_base16384_err_map_input_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":220
+    /* "pybase16384/backends/cython/_core.pyx":373
  *     elif ret == base16384_err_open_input_file:
  *         return "base16384_err_open_input_file"
  *     elif ret == base16384_err_map_input_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_map_input_file"
  *     elif ret == base16384_err_read_file:
  */
     break;
     case base16384_err_read_file:
 
-    /* "pybase16384/backends/cython/_core.pyx":223
+    /* "pybase16384/backends/cython/_core.pyx":376
  *         return "base16384_err_map_input_file"
  *     elif ret == base16384_err_read_file:
  *         return "base16384_err_read_file"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_invalid_file_name:
  *         return "base16384_err_invalid_file_name"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_read_file);
     __pyx_r = __pyx_n_u_base16384_err_read_file;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":222
+    /* "pybase16384/backends/cython/_core.pyx":375
  *     elif ret == base16384_err_map_input_file:
  *         return "base16384_err_map_input_file"
  *     elif ret == base16384_err_read_file:             # <<<<<<<<<<<<<<
  *         return "base16384_err_read_file"
  *     elif ret == base16384_err_invalid_file_name:
  */
     break;
     case base16384_err_invalid_file_name:
 
-    /* "pybase16384/backends/cython/_core.pyx":225
+    /* "pybase16384/backends/cython/_core.pyx":378
  *         return "base16384_err_read_file"
  *     elif ret == base16384_err_invalid_file_name:
  *         return "base16384_err_invalid_file_name"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_invalid_commandline_parameter:
  *         return "base16384_err_invalid_commandline_parameter"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_invalid_file_name);
     __pyx_r = __pyx_n_u_base16384_err_invalid_file_name;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":224
+    /* "pybase16384/backends/cython/_core.pyx":377
  *     elif ret == base16384_err_read_file:
  *         return "base16384_err_read_file"
  *     elif ret == base16384_err_invalid_file_name:             # <<<<<<<<<<<<<<
  *         return "base16384_err_invalid_file_name"
  *     elif ret == base16384_err_invalid_commandline_parameter:
  */
     break;
     case base16384_err_invalid_commandline_parameter:
 
-    /* "pybase16384/backends/cython/_core.pyx":227
+    /* "pybase16384/backends/cython/_core.pyx":380
  *         return "base16384_err_invalid_file_name"
  *     elif ret == base16384_err_invalid_commandline_parameter:
  *         return "base16384_err_invalid_commandline_parameter"             # <<<<<<<<<<<<<<
  *     elif ret == base16384_err_invalid_decoding_checksum:
  *         return "base16384_err_invalid_decoding_checksum"
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_invalid_commandlin);
     __pyx_r = __pyx_n_u_base16384_err_invalid_commandlin;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":226
+    /* "pybase16384/backends/cython/_core.pyx":379
  *     elif ret == base16384_err_invalid_file_name:
  *         return "base16384_err_invalid_file_name"
  *     elif ret == base16384_err_invalid_commandline_parameter:             # <<<<<<<<<<<<<<
  *         return "base16384_err_invalid_commandline_parameter"
  *     elif ret == base16384_err_invalid_decoding_checksum:
  */
     break;
     case base16384_err_invalid_decoding_checksum:
 
-    /* "pybase16384/backends/cython/_core.pyx":229
+    /* "pybase16384/backends/cython/_core.pyx":382
  *         return "base16384_err_invalid_commandline_parameter"
  *     elif ret == base16384_err_invalid_decoding_checksum:
  *         return "base16384_err_invalid_decoding_checksum"             # <<<<<<<<<<<<<<
  * 
  * cpdef inline encode_local_file(object inp, object out):
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_n_u_base16384_err_invalid_decoding_c);
     __pyx_r = __pyx_n_u_base16384_err_invalid_decoding_c;
     goto __pyx_L0;
 
-    /* "pybase16384/backends/cython/_core.pyx":228
+    /* "pybase16384/backends/cython/_core.pyx":381
  *     elif ret == base16384_err_invalid_commandline_parameter:
  *         return "base16384_err_invalid_commandline_parameter"
  *     elif ret == base16384_err_invalid_decoding_checksum:             # <<<<<<<<<<<<<<
  *         return "base16384_err_invalid_decoding_checksum"
  * 
  */
     break;
     default: break;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":209
+  /* "pybase16384/backends/cython/_core.pyx":362
  *     return pybase16384_64bits()
  * 
  * cdef inline str err_to_str(base16384_err_t ret):             # <<<<<<<<<<<<<<
  *     if ret == base16384_err_get_file_size:
  *         return "base16384_err_get_file_size"
  */
 
@@ -22050,23 +25315,23 @@
   __pyx_r = ((PyObject*)Py_None); __Pyx_INCREF(Py_None);
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":231
+/* "pybase16384/backends/cython/_core.pyx":384
  *         return "base16384_err_invalid_decoding_checksum"
  * 
  * cpdef inline encode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19encode_local_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file(PyObject *__pyx_v_inp, PyObject *__pyx_v_out, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -22094,159 +25359,159 @@
   PyObject *__pyx_t_13 = NULL;
   PyObject *__pyx_t_14 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_local_file", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":232
+  /* "pybase16384/backends/cython/_core.pyx":385
  * 
  * cpdef inline encode_local_file(object inp, object out):
  *     cdef bytes inp_name = ensure_bytes(inp)             # <<<<<<<<<<<<<<
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 232, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 385, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_inp_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":233
+  /* "pybase16384/backends/cython/_core.pyx":386
  * cpdef inline encode_local_file(object inp, object out):
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)             # <<<<<<<<<<<<<<
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 233, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 386, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_out_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":234
+  /* "pybase16384/backends/cython/_core.pyx":387
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name             # <<<<<<<<<<<<<<
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  */
   if (unlikely(__pyx_v_inp_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 234, __pyx_L1_error)
+    __PYX_ERR(0, 387, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 234, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 387, __pyx_L1_error)
   __pyx_v_inp_name_ptr = ((char const *)__pyx_t_2);
 
-  /* "pybase16384/backends/cython/_core.pyx":235
+  /* "pybase16384/backends/cython/_core.pyx":388
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
   if (unlikely(__pyx_v_out_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 235, __pyx_L1_error)
+    __PYX_ERR(0, 388, __pyx_L1_error)
   }
-  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 235, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 388, __pyx_L1_error)
   __pyx_v_out_name_ptr = ((char const *)__pyx_t_3);
 
-  /* "pybase16384/backends/cython/_core.pyx":236
+  /* "pybase16384/backends/cython/_core.pyx":389
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":237
+  /* "pybase16384/backends/cython/_core.pyx":390
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_4 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":238
+    /* "pybase16384/backends/cython/_core.pyx":391
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 238, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 391, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":237
+    /* "pybase16384/backends/cython/_core.pyx":390
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":239
+  /* "pybase16384/backends/cython/_core.pyx":392
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":240
+  /* "pybase16384/backends/cython/_core.pyx":393
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_4 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":241
+    /* "pybase16384/backends/cython/_core.pyx":394
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":242
+    /* "pybase16384/backends/cython/_core.pyx":395
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 242, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 395, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":240
+    /* "pybase16384/backends/cython/_core.pyx":393
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":244
+  /* "pybase16384/backends/cython/_core.pyx":397
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":245
+    /* "pybase16384/backends/cython/_core.pyx":398
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  */
     {
@@ -22254,25 +25519,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":246
+          /* "pybase16384/backends/cython/_core.pyx":399
  *     try:
  *         with nogil:
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)             # <<<<<<<<<<<<<<
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_encode_file(__pyx_v_inp_name_ptr, __pyx_v_out_name_ptr, __pyx_v_encbuf, __pyx_v_decbuf);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":245
+        /* "pybase16384/backends/cython/_core.pyx":398
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  */
         /*finally:*/ {
@@ -22283,62 +25548,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":247
+    /* "pybase16384/backends/cython/_core.pyx":400
  *         with nogil:
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_4 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_4)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":248
+      /* "pybase16384/backends/cython/_core.pyx":401
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 248, __pyx_L6_error)
+      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 401, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 248, __pyx_L6_error)
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 401, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_Raise(__pyx_t_5, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 248, __pyx_L6_error)
+      __PYX_ERR(0, 401, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":247
+      /* "pybase16384/backends/cython/_core.pyx":400
  *         with nogil:
  *             ret = b14_encode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":250
+  /* "pybase16384/backends/cython/_core.pyx":403
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":251
+      /* "pybase16384/backends/cython/_core.pyx":404
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_local_file(object inp, object out):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -22358,24 +25623,24 @@
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __Pyx_XGOTREF(__pyx_t_13);
       __Pyx_XGOTREF(__pyx_t_14);
       __pyx_t_6 = __pyx_lineno; __pyx_t_7 = __pyx_clineno; __pyx_t_8 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":250
+        /* "pybase16384/backends/cython/_core.pyx":403
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":251
+        /* "pybase16384/backends/cython/_core.pyx":404
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_local_file(object inp, object out):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -22393,15 +25658,15 @@
       __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_7; __pyx_filename = __pyx_t_8;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":231
+  /* "pybase16384/backends/cython/_core.pyx":384
  *         return "base16384_err_invalid_decoding_checksum"
  * 
  * cpdef inline encode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
@@ -22418,24 +25683,24 @@
   __Pyx_XDECREF(__pyx_v_out_name);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19encode_local_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_18encode_local_file, "encode_local_file(inp, out)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_19encode_local_file = {"encode_local_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_19encode_local_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_18encode_local_file};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_19encode_local_file(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_30encode_local_file, "encode_local_file(inp, out)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_31encode_local_file = {"encode_local_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_local_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_30encode_local_file};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_inp = 0;
@@ -22474,79 +25739,79 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 231, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 384, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 231, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 384, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_local_file", 1, 2, 2, 1); __PYX_ERR(0, 231, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_local_file", 1, 2, 2, 1); __PYX_ERR(0, 384, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_local_file") < 0)) __PYX_ERR(0, 231, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_local_file") < 0)) __PYX_ERR(0, 384, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_inp = values[0];
     __pyx_v_out = values[1];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_local_file", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 231, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_local_file", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 384, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_local_file", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_18encode_local_file(__pyx_self, __pyx_v_inp, __pyx_v_out);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_local_file(__pyx_self, __pyx_v_inp, __pyx_v_out);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_18encode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_local_file", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 231, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 384, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -22555,23 +25820,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":253
+/* "pybase16384/backends/cython/_core.pyx":406
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_21decode_local_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file(PyObject *__pyx_v_inp, PyObject *__pyx_v_out, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -22599,159 +25864,159 @@
   PyObject *__pyx_t_13 = NULL;
   PyObject *__pyx_t_14 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_local_file", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":254
+  /* "pybase16384/backends/cython/_core.pyx":407
  * 
  * cpdef inline decode_local_file(object inp, object out):
  *     cdef bytes inp_name = ensure_bytes(inp)             # <<<<<<<<<<<<<<
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 254, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 407, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_inp_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":255
+  /* "pybase16384/backends/cython/_core.pyx":408
  * cpdef inline decode_local_file(object inp, object out):
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)             # <<<<<<<<<<<<<<
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 255, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 408, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_out_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":256
+  /* "pybase16384/backends/cython/_core.pyx":409
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name             # <<<<<<<<<<<<<<
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  */
   if (unlikely(__pyx_v_inp_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 256, __pyx_L1_error)
+    __PYX_ERR(0, 409, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 256, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 409, __pyx_L1_error)
   __pyx_v_inp_name_ptr = ((char const *)__pyx_t_2);
 
-  /* "pybase16384/backends/cython/_core.pyx":257
+  /* "pybase16384/backends/cython/_core.pyx":410
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
   if (unlikely(__pyx_v_out_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 257, __pyx_L1_error)
+    __PYX_ERR(0, 410, __pyx_L1_error)
   }
-  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 257, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 410, __pyx_L1_error)
   __pyx_v_out_name_ptr = ((char const *)__pyx_t_3);
 
-  /* "pybase16384/backends/cython/_core.pyx":258
+  /* "pybase16384/backends/cython/_core.pyx":411
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":259
+  /* "pybase16384/backends/cython/_core.pyx":412
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_4 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":260
+    /* "pybase16384/backends/cython/_core.pyx":413
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 260, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 413, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":259
+    /* "pybase16384/backends/cython/_core.pyx":412
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":261
+  /* "pybase16384/backends/cython/_core.pyx":414
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":262
+  /* "pybase16384/backends/cython/_core.pyx":415
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_4 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":263
+    /* "pybase16384/backends/cython/_core.pyx":416
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":264
+    /* "pybase16384/backends/cython/_core.pyx":417
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 264, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 417, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":262
+    /* "pybase16384/backends/cython/_core.pyx":415
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":266
+  /* "pybase16384/backends/cython/_core.pyx":419
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":267
+    /* "pybase16384/backends/cython/_core.pyx":420
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  */
     {
@@ -22759,25 +26024,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":268
+          /* "pybase16384/backends/cython/_core.pyx":421
  *     try:
  *         with nogil:
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)             # <<<<<<<<<<<<<<
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_decode_file(__pyx_v_inp_name_ptr, __pyx_v_out_name_ptr, __pyx_v_encbuf, __pyx_v_decbuf);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":267
+        /* "pybase16384/backends/cython/_core.pyx":420
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  */
         /*finally:*/ {
@@ -22788,62 +26053,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":269
+    /* "pybase16384/backends/cython/_core.pyx":422
  *         with nogil:
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_4 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_4)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":270
+      /* "pybase16384/backends/cython/_core.pyx":423
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 270, __pyx_L6_error)
+      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 423, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 270, __pyx_L6_error)
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 423, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_Raise(__pyx_t_5, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 270, __pyx_L6_error)
+      __PYX_ERR(0, 423, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":269
+      /* "pybase16384/backends/cython/_core.pyx":422
  *         with nogil:
  *             ret = b14_decode_file(inp_name_ptr, out_name_ptr, encbuf, decbuf)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":272
+  /* "pybase16384/backends/cython/_core.pyx":425
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":273
+      /* "pybase16384/backends/cython/_core.pyx":426
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline encode_fd(int inp, int out):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -22863,24 +26128,24 @@
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __Pyx_XGOTREF(__pyx_t_13);
       __Pyx_XGOTREF(__pyx_t_14);
       __pyx_t_6 = __pyx_lineno; __pyx_t_7 = __pyx_clineno; __pyx_t_8 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":272
+        /* "pybase16384/backends/cython/_core.pyx":425
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":273
+        /* "pybase16384/backends/cython/_core.pyx":426
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline encode_fd(int inp, int out):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -22898,15 +26163,15 @@
       __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_7; __pyx_filename = __pyx_t_8;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":253
+  /* "pybase16384/backends/cython/_core.pyx":406
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
@@ -22923,24 +26188,24 @@
   __Pyx_XDECREF(__pyx_v_out_name);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_21decode_local_file(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_20decode_local_file, "decode_local_file(inp, out)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_21decode_local_file = {"decode_local_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_21decode_local_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_20decode_local_file};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_21decode_local_file(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_32decode_local_file, "decode_local_file(inp, out)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_33decode_local_file = {"decode_local_file", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_local_file, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_32decode_local_file};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_local_file(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_inp = 0;
@@ -22979,79 +26244,79 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 253, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 406, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 253, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 406, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_local_file", 1, 2, 2, 1); __PYX_ERR(0, 253, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_local_file", 1, 2, 2, 1); __PYX_ERR(0, 406, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_local_file") < 0)) __PYX_ERR(0, 253, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_local_file") < 0)) __PYX_ERR(0, 406, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_inp = values[0];
     __pyx_v_out = values[1];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_local_file", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 253, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_local_file", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 406, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_local_file", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_20decode_local_file(__pyx_self, __pyx_v_inp, __pyx_v_out);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_local_file(__pyx_self, __pyx_v_inp, __pyx_v_out);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_20decode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_local_file(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_local_file", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 253, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 406, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -23060,23 +26325,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":275
+/* "pybase16384/backends/cython/_core.pyx":428
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_fd(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_35encode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd(int __pyx_v_inp, int __pyx_v_out, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -23098,107 +26363,107 @@
   PyObject *__pyx_t_11 = NULL;
   PyObject *__pyx_t_12 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_fd", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":276
+  /* "pybase16384/backends/cython/_core.pyx":429
  * 
  * cpdef inline encode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":277
+  /* "pybase16384/backends/cython/_core.pyx":430
  * cpdef inline encode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_1 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":278
+    /* "pybase16384/backends/cython/_core.pyx":431
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 278, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 431, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":277
+    /* "pybase16384/backends/cython/_core.pyx":430
  * cpdef inline encode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":279
+  /* "pybase16384/backends/cython/_core.pyx":432
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":280
+  /* "pybase16384/backends/cython/_core.pyx":433
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_1 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":281
+    /* "pybase16384/backends/cython/_core.pyx":434
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":282
+    /* "pybase16384/backends/cython/_core.pyx":435
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 282, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 435, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":280
+    /* "pybase16384/backends/cython/_core.pyx":433
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":284
+  /* "pybase16384/backends/cython/_core.pyx":437
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":285
+    /* "pybase16384/backends/cython/_core.pyx":438
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  */
     {
@@ -23206,25 +26471,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":286
+          /* "pybase16384/backends/cython/_core.pyx":439
  *     try:
  *         with nogil:
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)             # <<<<<<<<<<<<<<
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_encode_fd(__pyx_v_inp, __pyx_v_out, __pyx_v_encbuf, __pyx_v_decbuf);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":285
+        /* "pybase16384/backends/cython/_core.pyx":438
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  */
         /*finally:*/ {
@@ -23235,62 +26500,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":287
+    /* "pybase16384/backends/cython/_core.pyx":440
  *         with nogil:
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_1 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_1)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":288
+      /* "pybase16384/backends/cython/_core.pyx":441
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 288, __pyx_L6_error)
+      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 441, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 288, __pyx_L6_error)
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 441, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_Raise(__pyx_t_3, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __PYX_ERR(0, 288, __pyx_L6_error)
+      __PYX_ERR(0, 441, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":287
+      /* "pybase16384/backends/cython/_core.pyx":440
  *         with nogil:
  *             ret = b14_encode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":290
+  /* "pybase16384/backends/cython/_core.pyx":443
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":291
+      /* "pybase16384/backends/cython/_core.pyx":444
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_fd(int inp, int out):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -23310,24 +26575,24 @@
       __Pyx_XGOTREF(__pyx_t_9);
       __Pyx_XGOTREF(__pyx_t_10);
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":290
+        /* "pybase16384/backends/cython/_core.pyx":443
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":291
+        /* "pybase16384/backends/cython/_core.pyx":444
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_fd(int inp, int out):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -23345,15 +26610,15 @@
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
       __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":275
+  /* "pybase16384/backends/cython/_core.pyx":428
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
@@ -23368,24 +26633,24 @@
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_fd(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_35encode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_22encode_fd, "encode_fd(int inp, int out)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_23encode_fd = {"encode_fd", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_fd, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_22encode_fd};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_23encode_fd(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_34encode_fd, "encode_fd(int inp, int out)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_35encode_fd = {"encode_fd", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_35encode_fd, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_34encode_fd};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_35encode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   int __pyx_v_inp;
@@ -23424,79 +26689,79 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 275, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 428, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 275, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 428, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_fd", 1, 2, 2, 1); __PYX_ERR(0, 275, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_fd", 1, 2, 2, 1); __PYX_ERR(0, 428, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_fd") < 0)) __PYX_ERR(0, 275, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_fd") < 0)) __PYX_ERR(0, 428, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 275, __pyx_L3_error)
-    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 275, __pyx_L3_error)
+    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 428, __pyx_L3_error)
+    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 428, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_fd", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 275, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_fd", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 428, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_fd", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_fd(__pyx_self, __pyx_v_inp, __pyx_v_out);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_34encode_fd(__pyx_self, __pyx_v_inp, __pyx_v_out);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_22encode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_34encode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_fd", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 275, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 428, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -23505,23 +26770,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":293
+/* "pybase16384/backends/cython/_core.pyx":446
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_fd(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_37decode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd(int __pyx_v_inp, int __pyx_v_out, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -23543,107 +26808,107 @@
   PyObject *__pyx_t_11 = NULL;
   PyObject *__pyx_t_12 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_fd", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":294
+  /* "pybase16384/backends/cython/_core.pyx":447
  * 
  * cpdef inline decode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":295
+  /* "pybase16384/backends/cython/_core.pyx":448
  * cpdef inline decode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_1 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":296
+    /* "pybase16384/backends/cython/_core.pyx":449
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 296, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 449, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":295
+    /* "pybase16384/backends/cython/_core.pyx":448
  * cpdef inline decode_fd(int inp, int out):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":297
+  /* "pybase16384/backends/cython/_core.pyx":450
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":298
+  /* "pybase16384/backends/cython/_core.pyx":451
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_1 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":299
+    /* "pybase16384/backends/cython/_core.pyx":452
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":300
+    /* "pybase16384/backends/cython/_core.pyx":453
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 300, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 453, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":298
+    /* "pybase16384/backends/cython/_core.pyx":451
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":302
+  /* "pybase16384/backends/cython/_core.pyx":455
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":303
+    /* "pybase16384/backends/cython/_core.pyx":456
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  */
     {
@@ -23651,25 +26916,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":304
+          /* "pybase16384/backends/cython/_core.pyx":457
  *     try:
  *         with nogil:
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)             # <<<<<<<<<<<<<<
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_decode_fd(__pyx_v_inp, __pyx_v_out, __pyx_v_encbuf, __pyx_v_decbuf);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":303
+        /* "pybase16384/backends/cython/_core.pyx":456
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  */
         /*finally:*/ {
@@ -23680,62 +26945,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":305
+    /* "pybase16384/backends/cython/_core.pyx":458
  *         with nogil:
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_1 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_1)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":306
+      /* "pybase16384/backends/cython/_core.pyx":459
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 306, __pyx_L6_error)
+      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 459, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 306, __pyx_L6_error)
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 459, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_Raise(__pyx_t_3, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __PYX_ERR(0, 306, __pyx_L6_error)
+      __PYX_ERR(0, 459, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":305
+      /* "pybase16384/backends/cython/_core.pyx":458
  *         with nogil:
  *             ret = b14_decode_fd(inp, out, encbuf, decbuf)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":308
+  /* "pybase16384/backends/cython/_core.pyx":461
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":309
+      /* "pybase16384/backends/cython/_core.pyx":462
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * # detailed
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -23755,24 +27020,24 @@
       __Pyx_XGOTREF(__pyx_t_9);
       __Pyx_XGOTREF(__pyx_t_10);
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":308
+        /* "pybase16384/backends/cython/_core.pyx":461
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":309
+        /* "pybase16384/backends/cython/_core.pyx":462
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * # detailed
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -23790,15 +27055,15 @@
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
       __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":293
+  /* "pybase16384/backends/cython/_core.pyx":446
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
@@ -23813,24 +27078,24 @@
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_fd(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_37decode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_24decode_fd, "decode_fd(int inp, int out)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_25decode_fd = {"decode_fd", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_fd, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_24decode_fd};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_25decode_fd(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_36decode_fd, "decode_fd(int inp, int out)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_37decode_fd = {"decode_fd", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_37decode_fd, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_36decode_fd};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_37decode_fd(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   int __pyx_v_inp;
@@ -23869,79 +27134,79 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 293, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 446, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 293, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 446, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_fd", 1, 2, 2, 1); __PYX_ERR(0, 293, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_fd", 1, 2, 2, 1); __PYX_ERR(0, 446, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_fd") < 0)) __PYX_ERR(0, 293, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_fd") < 0)) __PYX_ERR(0, 446, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 293, __pyx_L3_error)
-    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 293, __pyx_L3_error)
+    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 446, __pyx_L3_error)
+    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 446, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_fd", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 293, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_fd", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 446, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_fd", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_fd(__pyx_self, __pyx_v_inp, __pyx_v_out);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_36decode_fd(__pyx_self, __pyx_v_inp, __pyx_v_out);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_24decode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_36decode_fd(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_fd", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 293, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd(__pyx_v_inp, __pyx_v_out, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 446, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -23950,23 +27215,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":312
+/* "pybase16384/backends/cython/_core.pyx":465
  * 
  * # detailed
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file_detailed(PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -23994,159 +27259,159 @@
   PyObject *__pyx_t_13 = NULL;
   PyObject *__pyx_t_14 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_local_file_detailed", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":313
+  /* "pybase16384/backends/cython/_core.pyx":466
  * # detailed
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):
  *     cdef bytes inp_name = ensure_bytes(inp)             # <<<<<<<<<<<<<<
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 313, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 466, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_inp_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":314
+  /* "pybase16384/backends/cython/_core.pyx":467
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)             # <<<<<<<<<<<<<<
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 314, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 467, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_out_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":315
+  /* "pybase16384/backends/cython/_core.pyx":468
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name             # <<<<<<<<<<<<<<
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  */
   if (unlikely(__pyx_v_inp_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 315, __pyx_L1_error)
+    __PYX_ERR(0, 468, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 315, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 468, __pyx_L1_error)
   __pyx_v_inp_name_ptr = ((char const *)__pyx_t_2);
 
-  /* "pybase16384/backends/cython/_core.pyx":316
+  /* "pybase16384/backends/cython/_core.pyx":469
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
   if (unlikely(__pyx_v_out_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 316, __pyx_L1_error)
+    __PYX_ERR(0, 469, __pyx_L1_error)
   }
-  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 316, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 469, __pyx_L1_error)
   __pyx_v_out_name_ptr = ((char const *)__pyx_t_3);
 
-  /* "pybase16384/backends/cython/_core.pyx":317
+  /* "pybase16384/backends/cython/_core.pyx":470
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":318
+  /* "pybase16384/backends/cython/_core.pyx":471
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_4 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":319
+    /* "pybase16384/backends/cython/_core.pyx":472
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 319, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 472, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":318
+    /* "pybase16384/backends/cython/_core.pyx":471
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":320
+  /* "pybase16384/backends/cython/_core.pyx":473
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":321
+  /* "pybase16384/backends/cython/_core.pyx":474
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_4 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":322
+    /* "pybase16384/backends/cython/_core.pyx":475
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":323
+    /* "pybase16384/backends/cython/_core.pyx":476
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 323, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 476, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":321
+    /* "pybase16384/backends/cython/_core.pyx":474
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":325
+  /* "pybase16384/backends/cython/_core.pyx":478
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":326
+    /* "pybase16384/backends/cython/_core.pyx":479
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  */
     {
@@ -24154,25 +27419,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":327
+          /* "pybase16384/backends/cython/_core.pyx":480
  *     try:
  *         with nogil:
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)             # <<<<<<<<<<<<<<
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_encode_file_detailed(__pyx_v_inp_name_ptr, __pyx_v_out_name_ptr, __pyx_v_encbuf, __pyx_v_decbuf, __pyx_v_flag);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":326
+        /* "pybase16384/backends/cython/_core.pyx":479
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  */
         /*finally:*/ {
@@ -24183,62 +27448,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":328
+    /* "pybase16384/backends/cython/_core.pyx":481
  *         with nogil:
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_4 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_4)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":329
+      /* "pybase16384/backends/cython/_core.pyx":482
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 329, __pyx_L6_error)
+      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 482, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 329, __pyx_L6_error)
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 482, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_Raise(__pyx_t_5, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 329, __pyx_L6_error)
+      __PYX_ERR(0, 482, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":328
+      /* "pybase16384/backends/cython/_core.pyx":481
  *         with nogil:
  *             ret = b14_encode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":331
+  /* "pybase16384/backends/cython/_core.pyx":484
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":332
+      /* "pybase16384/backends/cython/_core.pyx":485
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -24258,24 +27523,24 @@
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __Pyx_XGOTREF(__pyx_t_13);
       __Pyx_XGOTREF(__pyx_t_14);
       __pyx_t_6 = __pyx_lineno; __pyx_t_7 = __pyx_clineno; __pyx_t_8 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":331
+        /* "pybase16384/backends/cython/_core.pyx":484
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":332
+        /* "pybase16384/backends/cython/_core.pyx":485
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -24293,15 +27558,15 @@
       __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_7; __pyx_filename = __pyx_t_8;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":312
+  /* "pybase16384/backends/cython/_core.pyx":465
  * 
  * # detailed
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
@@ -24318,24 +27583,24 @@
   __Pyx_XDECREF(__pyx_v_out_name);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_26encode_local_file_detailed, "encode_local_file_detailed(inp, out, int flag)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed = {"encode_local_file_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_26encode_local_file_detailed};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_38encode_local_file_detailed, "encode_local_file_detailed(inp, out, int flag)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed = {"encode_local_file_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_38encode_local_file_detailed};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_inp = 0;
@@ -24377,91 +27642,91 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 312, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 465, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 312, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 465, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, 1); __PYX_ERR(0, 312, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, 1); __PYX_ERR(0, 465, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_flag)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 312, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 465, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, 2); __PYX_ERR(0, 312, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, 2); __PYX_ERR(0, 465, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_local_file_detailed") < 0)) __PYX_ERR(0, 312, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_local_file_detailed") < 0)) __PYX_ERR(0, 465, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v_inp = values[0];
     __pyx_v_out = values[1];
-    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 312, __pyx_L3_error)
+    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 465, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 312, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_local_file_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 465, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_local_file_detailed", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_26encode_local_file_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_38encode_local_file_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_26encode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_38encode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_local_file_detailed", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 312, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_local_file_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 465, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -24470,23 +27735,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":334
+/* "pybase16384/backends/cython/_core.pyx":487
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file_detailed(PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -24514,159 +27779,159 @@
   PyObject *__pyx_t_13 = NULL;
   PyObject *__pyx_t_14 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_local_file_detailed", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":335
+  /* "pybase16384/backends/cython/_core.pyx":488
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):
  *     cdef bytes inp_name = ensure_bytes(inp)             # <<<<<<<<<<<<<<
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 335, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_inp); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 488, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_inp_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":336
+  /* "pybase16384/backends/cython/_core.pyx":489
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)             # <<<<<<<<<<<<<<
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  */
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 336, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_ensure_bytes(__pyx_v_out); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 489, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_out_name = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":337
+  /* "pybase16384/backends/cython/_core.pyx":490
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name             # <<<<<<<<<<<<<<
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  */
   if (unlikely(__pyx_v_inp_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 337, __pyx_L1_error)
+    __PYX_ERR(0, 490, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 337, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyBytes_AsString(__pyx_v_inp_name); if (unlikely((!__pyx_t_2) && PyErr_Occurred())) __PYX_ERR(0, 490, __pyx_L1_error)
   __pyx_v_inp_name_ptr = ((char const *)__pyx_t_2);
 
-  /* "pybase16384/backends/cython/_core.pyx":338
+  /* "pybase16384/backends/cython/_core.pyx":491
  *     cdef bytes out_name = ensure_bytes(out)
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
   if (unlikely(__pyx_v_out_name == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "expected bytes, NoneType found");
-    __PYX_ERR(0, 338, __pyx_L1_error)
+    __PYX_ERR(0, 491, __pyx_L1_error)
   }
-  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 338, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyBytes_AsString(__pyx_v_out_name); if (unlikely((!__pyx_t_3) && PyErr_Occurred())) __PYX_ERR(0, 491, __pyx_L1_error)
   __pyx_v_out_name_ptr = ((char const *)__pyx_t_3);
 
-  /* "pybase16384/backends/cython/_core.pyx":339
+  /* "pybase16384/backends/cython/_core.pyx":492
  *     cdef const char * inp_name_ptr = <const char *> inp_name
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":340
+  /* "pybase16384/backends/cython/_core.pyx":493
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_4 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":341
+    /* "pybase16384/backends/cython/_core.pyx":494
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 341, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 494, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":340
+    /* "pybase16384/backends/cython/_core.pyx":493
  *     cdef const char * out_name_ptr = <const char *> out_name
  *     cdef char * encbuf = <char*>PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":342
+  /* "pybase16384/backends/cython/_core.pyx":495
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":343
+  /* "pybase16384/backends/cython/_core.pyx":496
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_4 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_4)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":344
+    /* "pybase16384/backends/cython/_core.pyx":497
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":345
+    /* "pybase16384/backends/cython/_core.pyx":498
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 345, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 498, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":343
+    /* "pybase16384/backends/cython/_core.pyx":496
  *         raise MemoryError
  *     cdef char * decbuf = <char*>PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":347
+  /* "pybase16384/backends/cython/_core.pyx":500
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":348
+    /* "pybase16384/backends/cython/_core.pyx":501
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  */
     {
@@ -24674,25 +27939,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":349
+          /* "pybase16384/backends/cython/_core.pyx":502
  *     try:
  *         with nogil:
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)             # <<<<<<<<<<<<<<
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_decode_file_detailed(__pyx_v_inp_name_ptr, __pyx_v_out_name_ptr, __pyx_v_encbuf, __pyx_v_decbuf, __pyx_v_flag);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":348
+        /* "pybase16384/backends/cython/_core.pyx":501
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  */
         /*finally:*/ {
@@ -24703,62 +27968,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":350
+    /* "pybase16384/backends/cython/_core.pyx":503
  *         with nogil:
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_4 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_4)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":351
+      /* "pybase16384/backends/cython/_core.pyx":504
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 351, __pyx_L6_error)
+      __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 504, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 351, __pyx_L6_error)
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 504, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_Raise(__pyx_t_5, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 351, __pyx_L6_error)
+      __PYX_ERR(0, 504, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":350
+      /* "pybase16384/backends/cython/_core.pyx":503
  *         with nogil:
  *             ret = b14_decode_file_detailed(inp_name_ptr, out_name_ptr, encbuf, decbuf, flag)
  *         if ret !=  base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":353
+  /* "pybase16384/backends/cython/_core.pyx":506
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":354
+      /* "pybase16384/backends/cython/_core.pyx":507
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -24778,24 +28043,24 @@
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __Pyx_XGOTREF(__pyx_t_13);
       __Pyx_XGOTREF(__pyx_t_14);
       __pyx_t_6 = __pyx_lineno; __pyx_t_7 = __pyx_clineno; __pyx_t_8 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":353
+        /* "pybase16384/backends/cython/_core.pyx":506
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":354
+        /* "pybase16384/backends/cython/_core.pyx":507
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -24813,15 +28078,15 @@
       __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
       __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_7; __pyx_filename = __pyx_t_8;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":334
+  /* "pybase16384/backends/cython/_core.pyx":487
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
 
@@ -24838,24 +28103,24 @@
   __Pyx_XDECREF(__pyx_v_out_name);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_28decode_local_file_detailed, "decode_local_file_detailed(inp, out, int flag)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed = {"decode_local_file_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_28decode_local_file_detailed};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_40decode_local_file_detailed, "decode_local_file_detailed(inp, out, int flag)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed = {"decode_local_file_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_40decode_local_file_detailed};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_inp = 0;
@@ -24897,91 +28162,91 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 334, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 487, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 334, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 487, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, 1); __PYX_ERR(0, 334, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, 1); __PYX_ERR(0, 487, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_flag)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 334, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 487, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, 2); __PYX_ERR(0, 334, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, 2); __PYX_ERR(0, 487, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_local_file_detailed") < 0)) __PYX_ERR(0, 334, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_local_file_detailed") < 0)) __PYX_ERR(0, 487, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v_inp = values[0];
     __pyx_v_out = values[1];
-    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 334, __pyx_L3_error)
+    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 487, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 334, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_local_file_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 487, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_local_file_detailed", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_28decode_local_file_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_40decode_local_file_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_28decode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_40decode_local_file_detailed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_inp, PyObject *__pyx_v_out, int __pyx_v_flag) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_local_file_detailed", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 334, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_local_file_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 487, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -24990,23 +28255,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":356
+/* "pybase16384/backends/cython/_core.pyx":509
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd_detailed(int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -25028,107 +28293,107 @@
   PyObject *__pyx_t_11 = NULL;
   PyObject *__pyx_t_12 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_fd_detailed", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":357
+  /* "pybase16384/backends/cython/_core.pyx":510
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":358
+  /* "pybase16384/backends/cython/_core.pyx":511
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_1 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":359
+    /* "pybase16384/backends/cython/_core.pyx":512
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 359, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 512, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":358
+    /* "pybase16384/backends/cython/_core.pyx":511
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":360
+  /* "pybase16384/backends/cython/_core.pyx":513
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":361
+  /* "pybase16384/backends/cython/_core.pyx":514
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_1 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":362
+    /* "pybase16384/backends/cython/_core.pyx":515
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":363
+    /* "pybase16384/backends/cython/_core.pyx":516
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 363, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 516, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":361
+    /* "pybase16384/backends/cython/_core.pyx":514
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":365
+  /* "pybase16384/backends/cython/_core.pyx":518
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":366
+    /* "pybase16384/backends/cython/_core.pyx":519
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  */
     {
@@ -25136,25 +28401,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":367
+          /* "pybase16384/backends/cython/_core.pyx":520
  *     try:
  *         with nogil:
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)             # <<<<<<<<<<<<<<
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_encode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_encbuf, __pyx_v_decbuf, __pyx_v_flag);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":366
+        /* "pybase16384/backends/cython/_core.pyx":519
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  */
         /*finally:*/ {
@@ -25165,62 +28430,62 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":368
+    /* "pybase16384/backends/cython/_core.pyx":521
  *         with nogil:
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_1 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_1)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":369
+      /* "pybase16384/backends/cython/_core.pyx":522
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 369, __pyx_L6_error)
+      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 522, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 369, __pyx_L6_error)
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 522, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_Raise(__pyx_t_3, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __PYX_ERR(0, 369, __pyx_L6_error)
+      __PYX_ERR(0, 522, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":368
+      /* "pybase16384/backends/cython/_core.pyx":521
  *         with nogil:
  *             ret = b14_encode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":371
+  /* "pybase16384/backends/cython/_core.pyx":524
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":372
+      /* "pybase16384/backends/cython/_core.pyx":525
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):
  */
       PyMem_Free(__pyx_v_decbuf);
@@ -25240,24 +28505,24 @@
       __Pyx_XGOTREF(__pyx_t_9);
       __Pyx_XGOTREF(__pyx_t_10);
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":371
+        /* "pybase16384/backends/cython/_core.pyx":524
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  * 
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":372
+        /* "pybase16384/backends/cython/_core.pyx":525
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):
  */
         PyMem_Free(__pyx_v_decbuf);
@@ -25275,15 +28540,15 @@
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
       __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":356
+  /* "pybase16384/backends/cython/_core.pyx":509
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
@@ -25298,24 +28563,24 @@
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_30encode_fd_detailed, "encode_fd_detailed(int inp, int out, int flag)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed = {"encode_fd_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_30encode_fd_detailed};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_42encode_fd_detailed, "encode_fd_detailed(int inp, int out, int flag)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed = {"encode_fd_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_42encode_fd_detailed};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   int __pyx_v_inp;
@@ -25357,91 +28622,91 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, 1); __PYX_ERR(0, 356, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, 1); __PYX_ERR(0, 509, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_flag)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, 2); __PYX_ERR(0, 356, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, 2); __PYX_ERR(0, 509, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_fd_detailed") < 0)) __PYX_ERR(0, 356, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode_fd_detailed") < 0)) __PYX_ERR(0, 509, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
-    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
-    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
-    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 356, __pyx_L3_error)
+    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
+    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
+    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 509, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 356, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("encode_fd_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 509, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.encode_fd_detailed", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_fd_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_42encode_fd_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_30encode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_42encode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("encode_fd_detailed", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 356, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_encode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 509, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -25450,23 +28715,23 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pybase16384/backends/cython/_core.pyx":374
+/* "pybase16384/backends/cython/_core.pyx":527
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static CYTHON_INLINE PyObject *__pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd_detailed(int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag, CYTHON_UNUSED int __pyx_skip_dispatch) {
@@ -25488,107 +28753,107 @@
   PyObject *__pyx_t_11 = NULL;
   PyObject *__pyx_t_12 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_fd_detailed", 1);
 
-  /* "pybase16384/backends/cython/_core.pyx":375
+  /* "pybase16384/backends/cython/_core.pyx":528
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)             # <<<<<<<<<<<<<<
  *     if encbuf == NULL:
  *         raise MemoryError
  */
   __pyx_v_encbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_ENCBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":376
+  /* "pybase16384/backends/cython/_core.pyx":529
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   __pyx_t_1 = (__pyx_v_encbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":377
+    /* "pybase16384/backends/cython/_core.pyx":530
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 377, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 530, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":376
+    /* "pybase16384/backends/cython/_core.pyx":529
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":378
+  /* "pybase16384/backends/cython/_core.pyx":531
  *     if encbuf == NULL:
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)             # <<<<<<<<<<<<<<
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  */
   __pyx_v_decbuf = ((char *)PyMem_Malloc(((size_t)BASE16384_DECBUFSZ)));
 
-  /* "pybase16384/backends/cython/_core.pyx":379
+  /* "pybase16384/backends/cython/_core.pyx":532
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   __pyx_t_1 = (__pyx_v_decbuf == NULL);
   if (unlikely(__pyx_t_1)) {
 
-    /* "pybase16384/backends/cython/_core.pyx":380
+    /* "pybase16384/backends/cython/_core.pyx":533
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         raise MemoryError
  *     cdef base16384_err_t ret
  */
     PyMem_Free(__pyx_v_encbuf);
 
-    /* "pybase16384/backends/cython/_core.pyx":381
+    /* "pybase16384/backends/cython/_core.pyx":534
  *     if decbuf == NULL:
  *         PyMem_Free(encbuf)
  *         raise MemoryError             # <<<<<<<<<<<<<<
  *     cdef base16384_err_t ret
  *     try:
  */
-    PyErr_NoMemory(); __PYX_ERR(0, 381, __pyx_L1_error)
+    PyErr_NoMemory(); __PYX_ERR(0, 534, __pyx_L1_error)
 
-    /* "pybase16384/backends/cython/_core.pyx":379
+    /* "pybase16384/backends/cython/_core.pyx":532
  *         raise MemoryError
  *     cdef char * decbuf = <char *> PyMem_Malloc(<size_t>BASE16384_DECBUFSZ)
  *     if decbuf == NULL:             # <<<<<<<<<<<<<<
  *         PyMem_Free(encbuf)
  *         raise MemoryError
  */
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":383
+  /* "pybase16384/backends/cython/_core.pyx":536
  *         raise MemoryError
  *     cdef base16384_err_t ret
  *     try:             # <<<<<<<<<<<<<<
  *         with nogil:
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  */
   /*try:*/ {
 
-    /* "pybase16384/backends/cython/_core.pyx":384
+    /* "pybase16384/backends/cython/_core.pyx":537
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  */
     {
@@ -25596,25 +28861,25 @@
         PyThreadState *_save;
         _save = NULL;
         Py_UNBLOCK_THREADS
         __Pyx_FastGIL_Remember();
         #endif
         /*try:*/ {
 
-          /* "pybase16384/backends/cython/_core.pyx":385
+          /* "pybase16384/backends/cython/_core.pyx":538
  *     try:
  *         with nogil:
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)             # <<<<<<<<<<<<<<
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))
  */
           __pyx_v_ret = base16384_decode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_encbuf, __pyx_v_decbuf, __pyx_v_flag);
         }
 
-        /* "pybase16384/backends/cython/_core.pyx":384
+        /* "pybase16384/backends/cython/_core.pyx":537
  *     cdef base16384_err_t ret
  *     try:
  *         with nogil:             # <<<<<<<<<<<<<<
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  */
         /*finally:*/ {
@@ -25625,61 +28890,61 @@
             #endif
             goto __pyx_L10;
           }
           __pyx_L10:;
         }
     }
 
-    /* "pybase16384/backends/cython/_core.pyx":386
+    /* "pybase16384/backends/cython/_core.pyx":539
  *         with nogil:
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     __pyx_t_1 = (__pyx_v_ret != base16384_err_ok);
     if (unlikely(__pyx_t_1)) {
 
-      /* "pybase16384/backends/cython/_core.pyx":387
+      /* "pybase16384/backends/cython/_core.pyx":540
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:
  *             raise ValueError(err_to_str(ret))             # <<<<<<<<<<<<<<
  *     finally:
  *         PyMem_Free(encbuf)
  */
-      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 387, __pyx_L6_error)
+      __pyx_t_2 = __pyx_f_11pybase16384_8backends_6cython_5_core_err_to_str(__pyx_v_ret); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 540, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 387, __pyx_L6_error)
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 540, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_Raise(__pyx_t_3, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __PYX_ERR(0, 387, __pyx_L6_error)
+      __PYX_ERR(0, 540, __pyx_L6_error)
 
-      /* "pybase16384/backends/cython/_core.pyx":386
+      /* "pybase16384/backends/cython/_core.pyx":539
  *         with nogil:
  *             ret = b14_decode_fd_detailed(inp, out, encbuf, decbuf, flag)
  *         if ret != base16384_err_ok:             # <<<<<<<<<<<<<<
  *             raise ValueError(err_to_str(ret))
  *     finally:
  */
     }
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":389
+  /* "pybase16384/backends/cython/_core.pyx":542
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  */
   /*finally:*/ {
     /*normal exit:*/{
       PyMem_Free(__pyx_v_encbuf);
 
-      /* "pybase16384/backends/cython/_core.pyx":390
+      /* "pybase16384/backends/cython/_core.pyx":543
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  */
       PyMem_Free(__pyx_v_decbuf);
       goto __pyx_L7;
     }
@@ -25697,23 +28962,23 @@
       __Pyx_XGOTREF(__pyx_t_9);
       __Pyx_XGOTREF(__pyx_t_10);
       __Pyx_XGOTREF(__pyx_t_11);
       __Pyx_XGOTREF(__pyx_t_12);
       __pyx_t_4 = __pyx_lineno; __pyx_t_5 = __pyx_clineno; __pyx_t_6 = __pyx_filename;
       {
 
-        /* "pybase16384/backends/cython/_core.pyx":389
+        /* "pybase16384/backends/cython/_core.pyx":542
  *             raise ValueError(err_to_str(ret))
  *     finally:
  *         PyMem_Free(encbuf)             # <<<<<<<<<<<<<<
  *         PyMem_Free(decbuf)
  */
         PyMem_Free(__pyx_v_encbuf);
 
-        /* "pybase16384/backends/cython/_core.pyx":390
+        /* "pybase16384/backends/cython/_core.pyx":543
  *     finally:
  *         PyMem_Free(encbuf)
  *         PyMem_Free(decbuf)             # <<<<<<<<<<<<<<
  */
         PyMem_Free(__pyx_v_decbuf);
       }
       if (PY_MAJOR_VERSION >= 3) {
@@ -25729,15 +28994,15 @@
       __pyx_t_7 = 0; __pyx_t_8 = 0; __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0;
       __pyx_lineno = __pyx_t_4; __pyx_clineno = __pyx_t_5; __pyx_filename = __pyx_t_6;
       goto __pyx_L1_error;
     }
     __pyx_L7:;
   }
 
-  /* "pybase16384/backends/cython/_core.pyx":374
+  /* "pybase16384/backends/cython/_core.pyx":527
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
 
@@ -25752,24 +29017,24 @@
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_32decode_fd_detailed, "decode_fd_detailed(int inp, int out, int flag)");
-static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed = {"decode_fd_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_32decode_fd_detailed};
-static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_11pybase16384_8backends_6cython_5_core_44decode_fd_detailed, "decode_fd_detailed(int inp, int out, int flag)");
+static PyMethodDef __pyx_mdef_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed = {"decode_fd_detailed", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_11pybase16384_8backends_6cython_5_core_44decode_fd_detailed};
+static PyObject *__pyx_pw_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   int __pyx_v_inp;
@@ -25811,91 +29076,91 @@
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_inp)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_out)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, 1); __PYX_ERR(0, 374, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, 1); __PYX_ERR(0, 527, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_flag)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, 2); __PYX_ERR(0, 374, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, 2); __PYX_ERR(0, 527, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_fd_detailed") < 0)) __PYX_ERR(0, 374, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "decode_fd_detailed") < 0)) __PYX_ERR(0, 527, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
-    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
-    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
-    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 374, __pyx_L3_error)
+    __pyx_v_inp = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_inp == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
+    __pyx_v_out = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_out == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
+    __pyx_v_flag = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_flag == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 527, __pyx_L3_error)
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 374, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("decode_fd_detailed", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 527, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_AddTraceback("pybase16384.backends.cython._core.decode_fd_detailed", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_fd_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
+  __pyx_r = __pyx_pf_11pybase16384_8backends_6cython_5_core_44decode_fd_detailed(__pyx_self, __pyx_v_inp, __pyx_v_out, __pyx_v_flag);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_32decode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag) {
+static PyObject *__pyx_pf_11pybase16384_8backends_6cython_5_core_44decode_fd_detailed(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_inp, int __pyx_v_out, int __pyx_v_flag) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("decode_fd_detailed", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 374, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_11pybase16384_8backends_6cython_5_core_decode_fd_detailed(__pyx_v_inp, __pyx_v_out, __pyx_v_flag, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 527, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -26882,14 +30147,15 @@
     {&__pyx_kp_u_Cannot_index_with_type, __pyx_k_Cannot_index_with_type, sizeof(__pyx_k_Cannot_index_with_type), 0, 1, 0, 0},
     {&__pyx_kp_s_Cannot_transpose_memoryview_with, __pyx_k_Cannot_transpose_memoryview_with, sizeof(__pyx_k_Cannot_transpose_memoryview_with), 0, 0, 1, 0},
     {&__pyx_n_s_DECBUFSZ, __pyx_k_DECBUFSZ, sizeof(__pyx_k_DECBUFSZ), 0, 0, 1, 1},
     {&__pyx_kp_s_Dimension_d_is_not_direct, __pyx_k_Dimension_d_is_not_direct, sizeof(__pyx_k_Dimension_d_is_not_direct), 0, 0, 1, 0},
     {&__pyx_n_s_ENCBUFSZ, __pyx_k_ENCBUFSZ, sizeof(__pyx_k_ENCBUFSZ), 0, 0, 1, 1},
     {&__pyx_n_s_Ellipsis, __pyx_k_Ellipsis, sizeof(__pyx_k_Ellipsis), 0, 0, 1, 1},
     {&__pyx_kp_s_Empty_shape_tuple_for_cython_arr, __pyx_k_Empty_shape_tuple_for_cython_arr, sizeof(__pyx_k_Empty_shape_tuple_for_cython_arr), 0, 0, 1, 0},
+    {&__pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY, __pyx_k_FLAG_DO_SUM_CHECK_FORCELY, sizeof(__pyx_k_FLAG_DO_SUM_CHECK_FORCELY), 0, 0, 1, 1},
     {&__pyx_n_s_FLAG_NOHEADER, __pyx_k_FLAG_NOHEADER, sizeof(__pyx_k_FLAG_NOHEADER), 0, 0, 1, 1},
     {&__pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN, __pyx_k_FLAG_SUM_CHECK_ON_REMAIN, sizeof(__pyx_k_FLAG_SUM_CHECK_ON_REMAIN), 0, 0, 1, 1},
     {&__pyx_kp_s_Incompatible_checksums_0x_x_vs_0, __pyx_k_Incompatible_checksums_0x_x_vs_0, sizeof(__pyx_k_Incompatible_checksums_0x_x_vs_0), 0, 0, 1, 0},
     {&__pyx_n_s_IndexError, __pyx_k_IndexError, sizeof(__pyx_k_IndexError), 0, 0, 1, 1},
     {&__pyx_kp_s_Index_out_of_bounds_axis_d, __pyx_k_Index_out_of_bounds_axis_d, sizeof(__pyx_k_Index_out_of_bounds_axis_d), 0, 0, 1, 0},
     {&__pyx_kp_s_Indirect_dimensions_not_supporte, __pyx_k_Indirect_dimensions_not_supporte, sizeof(__pyx_k_Indirect_dimensions_not_supporte), 0, 0, 1, 0},
     {&__pyx_kp_u_Invalid_mode_expected_c_or_fortr, __pyx_k_Invalid_mode_expected_c_or_fortr, sizeof(__pyx_k_Invalid_mode_expected_c_or_fortr), 0, 1, 0, 0},
@@ -26897,26 +30163,25 @@
     {&__pyx_n_s_MemoryError, __pyx_k_MemoryError, sizeof(__pyx_k_MemoryError), 0, 0, 1, 1},
     {&__pyx_kp_s_MemoryView_of_r_at_0x_x, __pyx_k_MemoryView_of_r_at_0x_x, sizeof(__pyx_k_MemoryView_of_r_at_0x_x), 0, 0, 1, 0},
     {&__pyx_kp_s_MemoryView_of_r_object, __pyx_k_MemoryView_of_r_object, sizeof(__pyx_k_MemoryView_of_r_object), 0, 0, 1, 0},
     {&__pyx_n_b_O, __pyx_k_O, sizeof(__pyx_k_O), 0, 0, 0, 1},
     {&__pyx_kp_u_Out_of_bounds_on_buffer_access_a, __pyx_k_Out_of_bounds_on_buffer_access_a, sizeof(__pyx_k_Out_of_bounds_on_buffer_access_a), 0, 1, 0, 0},
     {&__pyx_n_s_Path, __pyx_k_Path, sizeof(__pyx_k_Path), 0, 0, 1, 1},
     {&__pyx_n_s_PickleError, __pyx_k_PickleError, sizeof(__pyx_k_PickleError), 0, 0, 1, 1},
-    {&__pyx_n_s_SIMPLE_SUM_INIT_VALUE, __pyx_k_SIMPLE_SUM_INIT_VALUE, sizeof(__pyx_k_SIMPLE_SUM_INIT_VALUE), 0, 0, 1, 1},
     {&__pyx_n_s_Sequence, __pyx_k_Sequence, sizeof(__pyx_k_Sequence), 0, 0, 1, 1},
     {&__pyx_kp_s_Step_may_not_be_zero_axis_d, __pyx_k_Step_may_not_be_zero_axis_d, sizeof(__pyx_k_Step_may_not_be_zero_axis_d), 0, 0, 1, 0},
     {&__pyx_n_s_TypeError, __pyx_k_TypeError, sizeof(__pyx_k_TypeError), 0, 0, 1, 1},
     {&__pyx_kp_s_Unable_to_convert_item_to_object, __pyx_k_Unable_to_convert_item_to_object, sizeof(__pyx_k_Unable_to_convert_item_to_object), 0, 0, 1, 0},
     {&__pyx_n_s_ValueError, __pyx_k_ValueError, sizeof(__pyx_k_ValueError), 0, 0, 1, 1},
     {&__pyx_n_s_View_MemoryView, __pyx_k_View_MemoryView, sizeof(__pyx_k_View_MemoryView), 0, 0, 1, 1},
     {&__pyx_kp_b__10, __pyx_k__10, sizeof(__pyx_k__10), 0, 0, 0, 0},
     {&__pyx_kp_b__11, __pyx_k__11, sizeof(__pyx_k__11), 0, 0, 0, 0},
     {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
     {&__pyx_n_s__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 0, 1, 1},
-    {&__pyx_n_s__50, __pyx_k__50, sizeof(__pyx_k__50), 0, 0, 1, 1},
+    {&__pyx_n_s__56, __pyx_k__56, sizeof(__pyx_k__56), 0, 0, 1, 1},
     {&__pyx_kp_u__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 1, 0, 0},
     {&__pyx_kp_u__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 1, 0, 0},
     {&__pyx_n_s_abc, __pyx_k_abc, sizeof(__pyx_k_abc), 0, 0, 1, 1},
     {&__pyx_n_s_allocate_buffer, __pyx_k_allocate_buffer, sizeof(__pyx_k_allocate_buffer), 0, 0, 1, 1},
     {&__pyx_kp_u_and, __pyx_k_and, sizeof(__pyx_k_and), 0, 1, 0, 0},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_base, __pyx_k_base, sizeof(__pyx_k_base), 0, 0, 1, 1},
@@ -26945,33 +30210,39 @@
     {&__pyx_n_s_count, __pyx_k_count, sizeof(__pyx_k_count), 0, 0, 1, 1},
     {&__pyx_n_s_current_buf_len, __pyx_k_current_buf_len, sizeof(__pyx_k_current_buf_len), 0, 0, 1, 1},
     {&__pyx_n_s_data, __pyx_k_data, sizeof(__pyx_k_data), 0, 0, 1, 1},
     {&__pyx_n_s_decode, __pyx_k_decode, sizeof(__pyx_k_decode), 0, 0, 1, 1},
     {&__pyx_n_s_decode_fd, __pyx_k_decode_fd, sizeof(__pyx_k_decode_fd), 0, 0, 1, 1},
     {&__pyx_n_s_decode_fd_detailed, __pyx_k_decode_fd_detailed, sizeof(__pyx_k_decode_fd_detailed), 0, 0, 1, 1},
     {&__pyx_n_s_decode_file, __pyx_k_decode_file, sizeof(__pyx_k_decode_file), 0, 0, 1, 1},
+    {&__pyx_n_s_decode_file_safe, __pyx_k_decode_file_safe, sizeof(__pyx_k_decode_file_safe), 0, 0, 1, 1},
     {&__pyx_n_s_decode_into, __pyx_k_decode_into, sizeof(__pyx_k_decode_into), 0, 0, 1, 1},
+    {&__pyx_n_s_decode_into_safe, __pyx_k_decode_into_safe, sizeof(__pyx_k_decode_into_safe), 0, 0, 1, 1},
     {&__pyx_n_s_decode_len, __pyx_k_decode_len, sizeof(__pyx_k_decode_len), 0, 0, 1, 1},
     {&__pyx_n_s_decode_local_file, __pyx_k_decode_local_file, sizeof(__pyx_k_decode_local_file), 0, 0, 1, 1},
     {&__pyx_n_s_decode_local_file_detailed, __pyx_k_decode_local_file_detailed, sizeof(__pyx_k_decode_local_file_detailed), 0, 0, 1, 1},
+    {&__pyx_n_s_decode_safe, __pyx_k_decode_safe, sizeof(__pyx_k_decode_safe), 0, 0, 1, 1},
     {&__pyx_n_s_dest, __pyx_k_dest, sizeof(__pyx_k_dest), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_kp_u_disable, __pyx_k_disable, sizeof(__pyx_k_disable), 0, 1, 0, 0},
     {&__pyx_n_s_dlen, __pyx_k_dlen, sizeof(__pyx_k_dlen), 0, 0, 1, 1},
     {&__pyx_n_s_dtype_is_object, __pyx_k_dtype_is_object, sizeof(__pyx_k_dtype_is_object), 0, 0, 1, 1},
     {&__pyx_kp_u_enable, __pyx_k_enable, sizeof(__pyx_k_enable), 0, 1, 0, 0},
     {&__pyx_n_s_encode, __pyx_k_encode, sizeof(__pyx_k_encode), 0, 0, 1, 1},
     {&__pyx_n_s_encode_2, __pyx_k_encode_2, sizeof(__pyx_k_encode_2), 0, 0, 1, 1},
     {&__pyx_n_s_encode_fd, __pyx_k_encode_fd, sizeof(__pyx_k_encode_fd), 0, 0, 1, 1},
     {&__pyx_n_s_encode_fd_detailed, __pyx_k_encode_fd_detailed, sizeof(__pyx_k_encode_fd_detailed), 0, 0, 1, 1},
     {&__pyx_n_s_encode_file, __pyx_k_encode_file, sizeof(__pyx_k_encode_file), 0, 0, 1, 1},
+    {&__pyx_n_s_encode_file_safe, __pyx_k_encode_file_safe, sizeof(__pyx_k_encode_file_safe), 0, 0, 1, 1},
     {&__pyx_n_s_encode_into, __pyx_k_encode_into, sizeof(__pyx_k_encode_into), 0, 0, 1, 1},
+    {&__pyx_n_s_encode_into_safe, __pyx_k_encode_into_safe, sizeof(__pyx_k_encode_into_safe), 0, 0, 1, 1},
     {&__pyx_n_s_encode_len, __pyx_k_encode_len, sizeof(__pyx_k_encode_len), 0, 0, 1, 1},
     {&__pyx_n_s_encode_local_file, __pyx_k_encode_local_file, sizeof(__pyx_k_encode_local_file), 0, 0, 1, 1},
     {&__pyx_n_s_encode_local_file_detailed, __pyx_k_encode_local_file_detailed, sizeof(__pyx_k_encode_local_file_detailed), 0, 0, 1, 1},
+    {&__pyx_n_s_encode_safe, __pyx_k_encode_safe, sizeof(__pyx_k_encode_safe), 0, 0, 1, 1},
     {&__pyx_n_s_enumerate, __pyx_k_enumerate, sizeof(__pyx_k_enumerate), 0, 0, 1, 1},
     {&__pyx_n_s_error, __pyx_k_error, sizeof(__pyx_k_error), 0, 0, 1, 1},
     {&__pyx_n_s_first_check, __pyx_k_first_check, sizeof(__pyx_k_first_check), 0, 0, 1, 1},
     {&__pyx_n_s_flag, __pyx_k_flag, sizeof(__pyx_k_flag), 0, 0, 1, 1},
     {&__pyx_n_s_flags, __pyx_k_flags, sizeof(__pyx_k_flags), 0, 0, 1, 1},
     {&__pyx_n_s_format, __pyx_k_format, sizeof(__pyx_k_format), 0, 0, 1, 1},
     {&__pyx_n_s_fortran, __pyx_k_fortran, sizeof(__pyx_k_fortran), 0, 0, 1, 1},
@@ -27052,17 +30323,17 @@
     {&__pyx_n_s_write_head, __pyx_k_write_head, sizeof(__pyx_k_write_head), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_MemoryError = __Pyx_GetBuiltinName(__pyx_n_s_MemoryError); if (!__pyx_builtin_MemoryError) __PYX_ERR(0, 57, __pyx_L1_error)
-  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 89, __pyx_L1_error)
-  __pyx_builtin_TypeError = __Pyx_GetBuiltinName(__pyx_n_s_TypeError); if (!__pyx_builtin_TypeError) __PYX_ERR(0, 112, __pyx_L1_error)
+  __pyx_builtin_MemoryError = __Pyx_GetBuiltinName(__pyx_n_s_MemoryError); if (!__pyx_builtin_MemoryError) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 122, __pyx_L1_error)
+  __pyx_builtin_TypeError = __Pyx_GetBuiltinName(__pyx_n_s_TypeError); if (!__pyx_builtin_TypeError) __PYX_ERR(0, 166, __pyx_L1_error)
   __pyx_builtin___import__ = __Pyx_GetBuiltinName(__pyx_n_s_import); if (!__pyx_builtin___import__) __PYX_ERR(1, 100, __pyx_L1_error)
   __pyx_builtin_enumerate = __Pyx_GetBuiltinName(__pyx_n_s_enumerate); if (!__pyx_builtin_enumerate) __PYX_ERR(1, 159, __pyx_L1_error)
   __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(1, 261, __pyx_L1_error)
   __pyx_builtin_AssertionError = __Pyx_GetBuiltinName(__pyx_n_s_AssertionError); if (!__pyx_builtin_AssertionError) __PYX_ERR(1, 373, __pyx_L1_error)
   __pyx_builtin_Ellipsis = __Pyx_GetBuiltinName(__pyx_n_s_Ellipsis); if (!__pyx_builtin_Ellipsis) __PYX_ERR(1, 408, __pyx_L1_error)
   __pyx_builtin_id = __Pyx_GetBuiltinName(__pyx_n_s_id); if (!__pyx_builtin_id) __PYX_ERR(1, 618, __pyx_L1_error)
   __pyx_builtin_IndexError = __Pyx_GetBuiltinName(__pyx_n_s_IndexError); if (!__pyx_builtin_IndexError) __PYX_ERR(1, 914, __pyx_L1_error)
@@ -27108,44 +30379,44 @@
  *         from pickle import PickleError as __pyx_PickleError
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x82a3537, 0x6ae9995, 0xb068931) = (name))" % __pyx_checksum
  */
   __pyx_tuple__8 = PyTuple_Pack(3, __pyx_int_136983863, __pyx_int_112105877, __pyx_int_184977713); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(1, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__8);
   __Pyx_GIVEREF(__pyx_tuple__8);
 
-  /* "pybase16384/backends/cython/_core.pyx":89
+  /* "pybase16384/backends/cython/_core.pyx":122
  *     cdef size_t output_buf_size = dest.shape[0]
  *     if output_buf_size < output_size:
  *         raise ValueError("Buffer is too small to hold result")             # <<<<<<<<<<<<<<
  *     with nogil:
  *         return b14_encode(<const char *> &data[0],
  */
-  __pyx_tuple__9 = PyTuple_Pack(1, __pyx_kp_u_Buffer_is_too_small_to_hold_resu); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 89, __pyx_L1_error)
+  __pyx_tuple__9 = PyTuple_Pack(1, __pyx_kp_u_Buffer_is_too_small_to_hold_resu); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 122, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__9);
   __Pyx_GIVEREF(__pyx_tuple__9);
 
-  /* "pybase16384/backends/cython/_core.pyx":170
+  /* "pybase16384/backends/cython/_core.pyx":271
  *         input.read(1)
  *     else:
  *         input.seek(0, 0)  #             # <<<<<<<<<<<<<<
  * 
  *     cdef int32_t current_buf_len = buf_rate * 8
  */
-  __pyx_tuple__12 = PyTuple_Pack(2, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 170, __pyx_L1_error)
+  __pyx_tuple__12 = PyTuple_Pack(2, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 271, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__12);
   __Pyx_GIVEREF(__pyx_tuple__12);
 
-  /* "pybase16384/backends/cython/_core.pyx":198
+  /* "pybase16384/backends/cython/_core.pyx":299
  *                     size += 2
  *                 else:
  *                     input.seek(-2, 1)             # <<<<<<<<<<<<<<
  *             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
  *             with nogil:
  */
-  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_int_neg_2, __pyx_int_1); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 198, __pyx_L1_error)
+  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_int_neg_2, __pyx_int_1); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 299, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__13);
   __Pyx_GIVEREF(__pyx_tuple__13);
 
   /* "View.MemoryView":100
  * cdef object __pyx_collections_abc_Sequence "__pyx_collections_abc_Sequence"
  * try:
  *     if __import__("sys").version_info >= (3, 3):             # <<<<<<<<<<<<<<
@@ -27242,190 +30513,244 @@
  *     cdef object __pyx_result
  */
   __pyx_tuple__23 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_pyx_PickleError, __pyx_n_s_pyx_result); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(1, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__23);
   __Pyx_GIVEREF(__pyx_tuple__23);
   __pyx_codeobj__24 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__23, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_Enum, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__24)) __PYX_ERR(1, 1, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":46
+  /* "pybase16384/backends/cython/_core.pyx":47
  *     return 0
  * 
  * cpdef inline int encode_len(int dlen) nogil:             # <<<<<<<<<<<<<<
  *     return b14_encode_len(dlen)
  * 
  */
-  __pyx_tuple__25 = PyTuple_Pack(1, __pyx_n_s_dlen); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_tuple__25 = PyTuple_Pack(1, __pyx_n_s_dlen); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__25);
   __Pyx_GIVEREF(__pyx_tuple__25);
-  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_len, 46, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_len, 47, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 47, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":49
+  /* "pybase16384/backends/cython/_core.pyx":50
  *     return b14_encode_len(dlen)
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:             # <<<<<<<<<<<<<<
  *     return b14_decode_len(dlen, offset)
  * 
  */
-  __pyx_tuple__27 = PyTuple_Pack(2, __pyx_n_s_dlen, __pyx_n_s_offset); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__27 = PyTuple_Pack(2, __pyx_n_s_dlen, __pyx_n_s_offset); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__27);
   __Pyx_GIVEREF(__pyx_tuple__27);
-  __pyx_codeobj__28 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__27, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_len, 49, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__28)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_codeobj__28 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__27, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_len, 50, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__28)) __PYX_ERR(0, 50, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":52
+  /* "pybase16384/backends/cython/_core.pyx":53
  *     return b14_decode_len(dlen, offset)
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  */
-  __pyx_tuple__29 = PyTuple_Pack(1, __pyx_n_s_data); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 52, __pyx_L1_error)
+  __pyx_tuple__29 = PyTuple_Pack(1, __pyx_n_s_data); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__29);
   __Pyx_GIVEREF(__pyx_tuple__29);
-  __pyx_codeobj__30 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_2, 52, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__30)) __PYX_ERR(0, 52, __pyx_L1_error)
+  __pyx_codeobj__30 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_2, 53, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__30)) __PYX_ERR(0, 53, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":68
+  /* "pybase16384/backends/cython/_core.pyx":69
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ */
+  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_safe, 69, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 69, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":85
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bytes _decode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  */
-  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode, 68, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 68, __pyx_L1_error)
+  __pyx_codeobj__32 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode, 85, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__32)) __PYX_ERR(0, 85, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":101
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ */
+  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_safe, 101, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 101, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":84
+  /* "pybase16384/backends/cython/_core.pyx":117
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  */
-  __pyx_tuple__32 = PyTuple_Pack(2, __pyx_n_s_data, __pyx_n_s_dest); if (unlikely(!__pyx_tuple__32)) __PYX_ERR(0, 84, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__32);
-  __Pyx_GIVEREF(__pyx_tuple__32);
-  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_into, 84, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_tuple__34 = PyTuple_Pack(2, __pyx_n_s_data, __pyx_n_s_dest); if (unlikely(!__pyx_tuple__34)) __PYX_ERR(0, 117, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__34);
+  __Pyx_GIVEREF(__pyx_tuple__34);
+  __pyx_codeobj__35 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__34, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_into, 117, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__35)) __PYX_ERR(0, 117, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":95
+  /* "pybase16384/backends/cython/_core.pyx":128
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ */
+  __pyx_codeobj__36 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__34, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_into_safe, 128, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__36)) __PYX_ERR(0, 128, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":139
  *                                 <char *> &dest[0])
  * 
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  */
-  __pyx_codeobj__34 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_into, 95, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__34)) __PYX_ERR(0, 95, __pyx_L1_error)
+  __pyx_codeobj__37 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__34, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_into, 139, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__37)) __PYX_ERR(0, 139, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":107
+  /* "pybase16384/backends/cython/_core.pyx":150
+ *                                 <char *> &dest[0])
  * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ */
+  __pyx_codeobj__38 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__34, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_into_safe, 150, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__38)) __PYX_ERR(0, 150, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":161
+ *                                 <char *> &dest[0])
  * 
  * def encode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        bint write_head = False,
  */
-  __pyx_tuple__35 = PyTuple_Pack(12, __pyx_n_s_input, __pyx_n_s_output, __pyx_n_s_write_head, __pyx_n_s_buf_rate, __pyx_n_s_current_buf_len, __pyx_n_s_output_size, __pyx_n_s_output_buf, __pyx_n_s_size, __pyx_n_s_first_check, __pyx_n_s_count, __pyx_n_s_chunk_ptr, __pyx_n_s_chunk); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 107, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__35);
-  __Pyx_GIVEREF(__pyx_tuple__35);
-  __pyx_codeobj__36 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_file, 107, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__36)) __PYX_ERR(0, 107, __pyx_L1_error)
+  __pyx_tuple__39 = PyTuple_Pack(12, __pyx_n_s_input, __pyx_n_s_output, __pyx_n_s_write_head, __pyx_n_s_buf_rate, __pyx_n_s_current_buf_len, __pyx_n_s_output_size, __pyx_n_s_output_buf, __pyx_n_s_size, __pyx_n_s_first_check, __pyx_n_s_count, __pyx_n_s_chunk_ptr, __pyx_n_s_chunk); if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 161, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__39);
+  __Pyx_GIVEREF(__pyx_tuple__39);
+  __pyx_codeobj__40 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__39, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_file, 161, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__40)) __PYX_ERR(0, 161, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":154
+  /* "pybase16384/backends/cython/_core.pyx":208
+ *         PyMem_Free(output_buf)
+ * 
+ * def encode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        bint write_head = False,
+ */
+  __pyx_codeobj__41 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__39, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_file_safe, 208, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__41)) __PYX_ERR(0, 208, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":255
  *         PyMem_Free(output_buf)
  * 
  * def decode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        int32_t buf_rate = 10):
  */
-  __pyx_tuple__37 = PyTuple_Pack(11, __pyx_n_s_input, __pyx_n_s_output, __pyx_n_s_buf_rate, __pyx_n_s_chunk, __pyx_n_s_current_buf_len, __pyx_n_s_output_size, __pyx_n_s_output_buf, __pyx_n_s_size, __pyx_n_s_count, __pyx_n_s_chunk_ptr, __pyx_n_s_tmp); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 154, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__37);
-  __Pyx_GIVEREF(__pyx_tuple__37);
-  __pyx_codeobj__38 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__37, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_file, 154, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__38)) __PYX_ERR(0, 154, __pyx_L1_error)
+  __pyx_tuple__42 = PyTuple_Pack(11, __pyx_n_s_input, __pyx_n_s_output, __pyx_n_s_buf_rate, __pyx_n_s_chunk, __pyx_n_s_current_buf_len, __pyx_n_s_output_size, __pyx_n_s_output_buf, __pyx_n_s_size, __pyx_n_s_count, __pyx_n_s_chunk_ptr, __pyx_n_s_tmp); if (unlikely(!__pyx_tuple__42)) __PYX_ERR(0, 255, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__42);
+  __Pyx_GIVEREF(__pyx_tuple__42);
+  __pyx_codeobj__43 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__42, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_file, 255, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__43)) __PYX_ERR(0, 255, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":206
+  /* "pybase16384/backends/cython/_core.pyx":307
+ *         PyMem_Free(output_buf)
+ * 
+ * def decode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ */
+  __pyx_codeobj__44 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__42, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_file_safe, 307, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__44)) __PYX_ERR(0, 307, __pyx_L1_error)
+
+  /* "pybase16384/backends/cython/_core.pyx":359
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bint is_64bits() nogil:             # <<<<<<<<<<<<<<
  *     return pybase16384_64bits()
  * 
  */
-  __pyx_codeobj__39 = (PyObject*)__Pyx_PyCode_New(0, 0, 0, 0, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_is_64bits, 206, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__39)) __PYX_ERR(0, 206, __pyx_L1_error)
+  __pyx_codeobj__45 = (PyObject*)__Pyx_PyCode_New(0, 0, 0, 0, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_is_64bits, 359, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__45)) __PYX_ERR(0, 359, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":231
+  /* "pybase16384/backends/cython/_core.pyx":384
  *         return "base16384_err_invalid_decoding_checksum"
  * 
  * cpdef inline encode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_tuple__40 = PyTuple_Pack(2, __pyx_n_s_inp, __pyx_n_s_out); if (unlikely(!__pyx_tuple__40)) __PYX_ERR(0, 231, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__40);
-  __Pyx_GIVEREF(__pyx_tuple__40);
-  __pyx_codeobj__41 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__40, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_local_file, 231, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__41)) __PYX_ERR(0, 231, __pyx_L1_error)
+  __pyx_tuple__46 = PyTuple_Pack(2, __pyx_n_s_inp, __pyx_n_s_out); if (unlikely(!__pyx_tuple__46)) __PYX_ERR(0, 384, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__46);
+  __Pyx_GIVEREF(__pyx_tuple__46);
+  __pyx_codeobj__47 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__46, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_local_file, 384, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__47)) __PYX_ERR(0, 384, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":253
+  /* "pybase16384/backends/cython/_core.pyx":406
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_codeobj__42 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__40, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_local_file, 253, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__42)) __PYX_ERR(0, 253, __pyx_L1_error)
+  __pyx_codeobj__48 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__46, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_local_file, 406, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__48)) __PYX_ERR(0, 406, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":275
+  /* "pybase16384/backends/cython/_core.pyx":428
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_codeobj__43 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__40, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_fd, 275, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__43)) __PYX_ERR(0, 275, __pyx_L1_error)
+  __pyx_codeobj__49 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__46, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_fd, 428, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__49)) __PYX_ERR(0, 428, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":293
+  /* "pybase16384/backends/cython/_core.pyx":446
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_codeobj__44 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__40, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_fd, 293, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__44)) __PYX_ERR(0, 293, __pyx_L1_error)
+  __pyx_codeobj__50 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__46, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_fd, 446, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__50)) __PYX_ERR(0, 446, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":312
+  /* "pybase16384/backends/cython/_core.pyx":465
  * 
  * # detailed
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_tuple__45 = PyTuple_Pack(3, __pyx_n_s_inp, __pyx_n_s_out, __pyx_n_s_flag); if (unlikely(!__pyx_tuple__45)) __PYX_ERR(0, 312, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__45);
-  __Pyx_GIVEREF(__pyx_tuple__45);
-  __pyx_codeobj__46 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__45, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_local_file_detailed, 312, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__46)) __PYX_ERR(0, 312, __pyx_L1_error)
+  __pyx_tuple__51 = PyTuple_Pack(3, __pyx_n_s_inp, __pyx_n_s_out, __pyx_n_s_flag); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 465, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__51);
+  __Pyx_GIVEREF(__pyx_tuple__51);
+  __pyx_codeobj__52 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_local_file_detailed, 465, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__52)) __PYX_ERR(0, 465, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":334
+  /* "pybase16384/backends/cython/_core.pyx":487
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_codeobj__47 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__45, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_local_file_detailed, 334, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__47)) __PYX_ERR(0, 334, __pyx_L1_error)
+  __pyx_codeobj__53 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_local_file_detailed, 487, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__53)) __PYX_ERR(0, 487, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":356
+  /* "pybase16384/backends/cython/_core.pyx":509
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_codeobj__48 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__45, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_fd_detailed, 356, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__48)) __PYX_ERR(0, 356, __pyx_L1_error)
+  __pyx_codeobj__54 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_encode_fd_detailed, 509, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__54)) __PYX_ERR(0, 509, __pyx_L1_error)
 
-  /* "pybase16384/backends/cython/_core.pyx":374
+  /* "pybase16384/backends/cython/_core.pyx":527
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_codeobj__49 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__45, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_fd_detailed, 374, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__49)) __PYX_ERR(0, 374, __pyx_L1_error)
+  __pyx_codeobj__55 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pybase16384_backends_cython__cor, __pyx_n_s_decode_fd_detailed, 527, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__55)) __PYX_ERR(0, 527, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -28491,355 +31816,474 @@
  *     cdef object __pyx_result
  */
   __pyx_t_7 = PyCFunction_NewEx(&__pyx_mdef_15View_dot_MemoryView_1__pyx_unpickle_Enum, NULL, __pyx_n_s_View_MemoryView); if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_Enum, __pyx_t_7) < 0) __PYX_ERR(1, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":22
+  /* "pybase16384/backends/cython/_core.pyx":23
  *     base16384_err_write_file, pybase16384_64bits)
  * 
  * from pathlib import Path             # <<<<<<<<<<<<<<
  * 
  * ENCBUFSZ = BASE16384_ENCBUFSZ
  */
-  __pyx_t_7 = PyList_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_t_7 = PyList_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __Pyx_INCREF(__pyx_n_s_Path);
   __Pyx_GIVEREF(__pyx_n_s_Path);
-  if (__Pyx_PyList_SET_ITEM(__pyx_t_7, 0, __pyx_n_s_Path)) __PYX_ERR(0, 22, __pyx_L1_error);
-  __pyx_t_4 = __Pyx_Import(__pyx_n_s_pathlib, __pyx_t_7, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (__Pyx_PyList_SET_ITEM(__pyx_t_7, 0, __pyx_n_s_Path)) __PYX_ERR(0, 23, __pyx_L1_error);
+  __pyx_t_4 = __Pyx_Import(__pyx_n_s_pathlib, __pyx_t_7, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-  __pyx_t_7 = __Pyx_ImportFrom(__pyx_t_4, __pyx_n_s_Path); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_ImportFrom(__pyx_t_4, __pyx_n_s_Path); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Path, __pyx_t_7) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Path, __pyx_t_7) < 0) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":24
+  /* "pybase16384/backends/cython/_core.pyx":25
  * from pathlib import Path
  * 
  * ENCBUFSZ = BASE16384_ENCBUFSZ             # <<<<<<<<<<<<<<
  * DECBUFSZ = BASE16384_DECBUFSZ
  * FLAG_NOHEADER = BASE16384_FLAG_NOHEADER
  */
-  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_ENCBUFSZ); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_ENCBUFSZ); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ENCBUFSZ, __pyx_t_4) < 0) __PYX_ERR(0, 24, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ENCBUFSZ, __pyx_t_4) < 0) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":25
+  /* "pybase16384/backends/cython/_core.pyx":26
  * 
  * ENCBUFSZ = BASE16384_ENCBUFSZ
  * DECBUFSZ = BASE16384_DECBUFSZ             # <<<<<<<<<<<<<<
  * FLAG_NOHEADER = BASE16384_FLAG_NOHEADER
  * FLAG_SUM_CHECK_ON_REMAIN = BASE16384_FLAG_SUM_CHECK_ON_REMAIN
  */
-  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_DECBUFSZ); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_DECBUFSZ); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DECBUFSZ, __pyx_t_4) < 0) __PYX_ERR(0, 25, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DECBUFSZ, __pyx_t_4) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":26
+  /* "pybase16384/backends/cython/_core.pyx":27
  * ENCBUFSZ = BASE16384_ENCBUFSZ
  * DECBUFSZ = BASE16384_DECBUFSZ
  * FLAG_NOHEADER = BASE16384_FLAG_NOHEADER             # <<<<<<<<<<<<<<
  * FLAG_SUM_CHECK_ON_REMAIN = BASE16384_FLAG_SUM_CHECK_ON_REMAIN
- * SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE
+ * FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY
  */
-  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_FLAG_NOHEADER); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_FLAG_NOHEADER); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_FLAG_NOHEADER, __pyx_t_4) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_FLAG_NOHEADER, __pyx_t_4) < 0) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":27
+  /* "pybase16384/backends/cython/_core.pyx":28
  * DECBUFSZ = BASE16384_DECBUFSZ
  * FLAG_NOHEADER = BASE16384_FLAG_NOHEADER
  * FLAG_SUM_CHECK_ON_REMAIN = BASE16384_FLAG_SUM_CHECK_ON_REMAIN             # <<<<<<<<<<<<<<
- * SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE
+ * FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY
  * 
  */
-  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_FLAG_SUM_CHECK_ON_REMAIN); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 27, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_FLAG_SUM_CHECK_ON_REMAIN); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 28, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN, __pyx_t_4) < 0) __PYX_ERR(0, 27, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_FLAG_SUM_CHECK_ON_REMAIN, __pyx_t_4) < 0) __PYX_ERR(0, 28, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":28
+  /* "pybase16384/backends/cython/_core.pyx":29
  * FLAG_NOHEADER = BASE16384_FLAG_NOHEADER
  * FLAG_SUM_CHECK_ON_REMAIN = BASE16384_FLAG_SUM_CHECK_ON_REMAIN
- * SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE             # <<<<<<<<<<<<<<
+ * FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY             # <<<<<<<<<<<<<<
  * 
  * cdef inline bytes ensure_bytes(object inp):
  */
-  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_SIMPLE_SUM_INIT_VALUE); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_From_int(BASE16384_FLAG_DO_SUM_CHECK_FORCELY); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SIMPLE_SUM_INIT_VALUE, __pyx_t_4) < 0) __PYX_ERR(0, 28, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_FLAG_DO_SUM_CHECK_FORCELY, __pyx_t_4) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":46
+  /* "pybase16384/backends/cython/_core.pyx":47
  *     return 0
  * 
  * cpdef inline int encode_len(int dlen) nogil:             # <<<<<<<<<<<<<<
  *     return b14_encode_len(dlen)
  * 
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_1encode_len, 0, __pyx_n_s_encode_len, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_1encode_len, 0, __pyx_n_s_encode_len, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_len, __pyx_t_4) < 0) __PYX_ERR(0, 46, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_len, __pyx_t_4) < 0) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":49
+  /* "pybase16384/backends/cython/_core.pyx":50
  *     return b14_encode_len(dlen)
  * 
  * cpdef inline int decode_len(int dlen, int offset) nogil:             # <<<<<<<<<<<<<<
  *     return b14_decode_len(dlen, offset)
  * 
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_3decode_len, 0, __pyx_n_s_decode_len, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__28)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_3decode_len, 0, __pyx_n_s_decode_len, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__28)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_len, __pyx_t_4) < 0) __PYX_ERR(0, 49, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_len, __pyx_t_4) < 0) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":52
+  /* "pybase16384/backends/cython/_core.pyx":53
  *     return b14_decode_len(dlen, offset)
  * 
  * cpdef inline bytes _encode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int>length) + 16
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_5_encode, 0, __pyx_n_s_encode_2, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__30)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 52, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_5_encode, 0, __pyx_n_s_encode_2, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__30)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_2, __pyx_t_4) < 0) __PYX_ERR(0, 52, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_2, __pyx_t_4) < 0) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":68
+  /* "pybase16384/backends/cython/_core.pyx":69
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _encode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+ */
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_7_encode_safe, 0, __pyx_n_s_encode_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_safe, __pyx_t_4) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":85
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bytes _decode(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
  *     cdef size_t length = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_7_decode, 0, __pyx_n_s_decode, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 68, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_9_decode, 0, __pyx_n_s_decode, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__32)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 85, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode, __pyx_t_4) < 0) __PYX_ERR(0, 85, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":101
+ *         PyMem_Free(output_buf)
+ * 
+ * cpdef inline bytes _decode_safe(const uint8_t[::1] data):             # <<<<<<<<<<<<<<
+ *     cdef size_t length = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+ */
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_11_decode_safe, 0, __pyx_n_s_decode_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 101, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode, __pyx_t_4) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_safe, __pyx_t_4) < 0) __PYX_ERR(0, 101, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":84
+  /* "pybase16384/backends/cython/_core.pyx":117
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_9_encode_into, 0, __pyx_n_s_encode_into, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_13_encode_into, 0, __pyx_n_s_encode_into, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__35)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 117, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_into, __pyx_t_4) < 0) __PYX_ERR(0, 117, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":128
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+ */
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_15_encode_into_safe, 0, __pyx_n_s_encode_into_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 128, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_into, __pyx_t_4) < 0) __PYX_ERR(0, 84, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_into_safe, __pyx_t_4) < 0) __PYX_ERR(0, 128, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":95
+  /* "pybase16384/backends/cython/_core.pyx":139
  *                                 <char *> &dest[0])
  * 
  * cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
  *     cdef size_t input_size = data.shape[0]
  *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
  */
-  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_11_decode_into, 0, __pyx_n_s_decode_into, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__34)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 95, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_17_decode_into, 0, __pyx_n_s_decode_into, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__37)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_into, __pyx_t_4) < 0) __PYX_ERR(0, 95, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_into, __pyx_t_4) < 0) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":109
+  /* "pybase16384/backends/cython/_core.pyx":150
+ *                                 <char *> &dest[0])
+ * 
+ * cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:             # <<<<<<<<<<<<<<
+ *     cdef size_t input_size = data.shape[0]
+ *     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+ */
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_19_decode_into_safe, 0, __pyx_n_s_decode_into_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 150, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_into_safe, __pyx_t_4) < 0) __PYX_ERR(0, 150, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":163
  * def encode_file(object input,
  *                        object output,
  *                        bint write_head = False,             # <<<<<<<<<<<<<<
  *                        int32_t buf_rate = 10):
  *     if not PyFile_Check(input):
  */
-  __pyx_t_4 = __Pyx_PyBool_FromLong(((int)0)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 109, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyBool_FromLong(((int)0)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 163, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
 
-  /* "pybase16384/backends/cython/_core.pyx":110
+  /* "pybase16384/backends/cython/_core.pyx":164
  *                        object output,
  *                        bint write_head = False,
  *                        int32_t buf_rate = 10):             # <<<<<<<<<<<<<<
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  */
-  __pyx_t_7 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 110, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 164, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
 
-  /* "pybase16384/backends/cython/_core.pyx":107
- * 
+  /* "pybase16384/backends/cython/_core.pyx":161
+ *                                 <char *> &dest[0])
  * 
  * def encode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        bint write_head = False,
  */
-  __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 107, __pyx_L1_error)
+  __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 161, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __Pyx_GIVEREF(__pyx_t_4);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4)) __PYX_ERR(0, 107, __pyx_L1_error);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4)) __PYX_ERR(0, 161, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_7);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_7)) __PYX_ERR(0, 107, __pyx_L1_error);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_7)) __PYX_ERR(0, 161, __pyx_L1_error);
   __pyx_t_4 = 0;
   __pyx_t_7 = 0;
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_13encode_file, 0, __pyx_n_s_encode_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 107, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_21encode_file, 0, __pyx_n_s_encode_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__40)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 161, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_t_5);
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_file, __pyx_t_7) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_file, __pyx_t_7) < 0) __PYX_ERR(0, 161, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":156
+  /* "pybase16384/backends/cython/_core.pyx":210
+ * def encode_file_safe(object input,
+ *                        object output,
+ *                        bint write_head = False,             # <<<<<<<<<<<<<<
+ *                        int32_t buf_rate = 10):
+ *     if not PyFile_Check(input):
+ */
+  __pyx_t_7 = __Pyx_PyBool_FromLong(((int)0)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 210, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+
+  /* "pybase16384/backends/cython/_core.pyx":211
+ *                        object output,
+ *                        bint write_head = False,
+ *                        int32_t buf_rate = 10):             # <<<<<<<<<<<<<<
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ */
+  __pyx_t_5 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 211, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+
+  /* "pybase16384/backends/cython/_core.pyx":208
+ *         PyMem_Free(output_buf)
+ * 
+ * def encode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        bint write_head = False,
+ */
+  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 208, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_7);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_7)) __PYX_ERR(0, 208, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_5);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5)) __PYX_ERR(0, 208, __pyx_L1_error);
+  __pyx_t_7 = 0;
+  __pyx_t_5 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_23encode_file_safe, 0, __pyx_n_s_encode_file_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__41)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 208, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_5, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_file_safe, __pyx_t_5) < 0) __PYX_ERR(0, 208, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":257
  * def decode_file(object input,
  *                        object output,
  *                        int32_t buf_rate = 10):             # <<<<<<<<<<<<<<
  *     if not PyFile_Check(input):
  *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
  */
-  __pyx_t_7 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 156, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
+  __pyx_t_5 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 257, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
 
-  /* "pybase16384/backends/cython/_core.pyx":154
+  /* "pybase16384/backends/cython/_core.pyx":255
  *         PyMem_Free(output_buf)
  * 
  * def decode_file(object input,             # <<<<<<<<<<<<<<
  *                        object output,
  *                        int32_t buf_rate = 10):
  */
-  __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 154, __pyx_L1_error)
+  __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 255, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_5);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5)) __PYX_ERR(0, 255, __pyx_L1_error);
+  __pyx_t_5 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_25decode_file, 0, __pyx_n_s_decode_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__43)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 255, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __Pyx_GIVEREF(__pyx_t_7);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_7)) __PYX_ERR(0, 154, __pyx_L1_error);
-  __pyx_t_7 = 0;
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_15decode_file, 0, __pyx_n_s_decode_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 154, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_t_5);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_5, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_file, __pyx_t_5) < 0) __PYX_ERR(0, 255, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_file, __pyx_t_7) < 0) __PYX_ERR(0, 154, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":206
+  /* "pybase16384/backends/cython/_core.pyx":309
+ * def decode_file_safe(object input,
+ *                        object output,
+ *                        int32_t buf_rate = 10):             # <<<<<<<<<<<<<<
+ *     if not PyFile_Check(input):
+ *         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+ */
+  __pyx_t_5 = __Pyx_PyInt_From_int32_t(((int32_t)10)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 309, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+
+  /* "pybase16384/backends/cython/_core.pyx":307
+ *         PyMem_Free(output_buf)
+ * 
+ * def decode_file_safe(object input,             # <<<<<<<<<<<<<<
+ *                        object output,
+ *                        int32_t buf_rate = 10):
+ */
+  __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 307, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_5);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5)) __PYX_ERR(0, 307, __pyx_L1_error);
+  __pyx_t_5 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_27decode_file_safe, 0, __pyx_n_s_decode_file_safe, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__44)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 307, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_5, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_file_safe, __pyx_t_5) < 0) __PYX_ERR(0, 307, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+  /* "pybase16384/backends/cython/_core.pyx":359
  *         PyMem_Free(output_buf)
  * 
  * cpdef inline bint is_64bits() nogil:             # <<<<<<<<<<<<<<
  *     return pybase16384_64bits()
  * 
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_17is_64bits, 0, __pyx_n_s_is_64bits, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__39)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 206, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_is_64bits, __pyx_t_7) < 0) __PYX_ERR(0, 206, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_29is_64bits, 0, __pyx_n_s_is_64bits, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__45)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 359, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_is_64bits, __pyx_t_5) < 0) __PYX_ERR(0, 359, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":231
+  /* "pybase16384/backends/cython/_core.pyx":384
  *         return "base16384_err_invalid_decoding_checksum"
  * 
  * cpdef inline encode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_19encode_local_file, 0, __pyx_n_s_encode_local_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__41)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 231, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_local_file, __pyx_t_7) < 0) __PYX_ERR(0, 231, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_31encode_local_file, 0, __pyx_n_s_encode_local_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__47)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 384, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_local_file, __pyx_t_5) < 0) __PYX_ERR(0, 384, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":253
+  /* "pybase16384/backends/cython/_core.pyx":406
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file(object inp, object out):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_21decode_local_file, 0, __pyx_n_s_decode_local_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__42)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 253, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_local_file, __pyx_t_7) < 0) __PYX_ERR(0, 253, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_33decode_local_file, 0, __pyx_n_s_decode_local_file, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__48)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 406, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_local_file, __pyx_t_5) < 0) __PYX_ERR(0, 406, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":275
+  /* "pybase16384/backends/cython/_core.pyx":428
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_23encode_fd, 0, __pyx_n_s_encode_fd, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__43)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 275, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_fd, __pyx_t_7) < 0) __PYX_ERR(0, 275, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_35encode_fd, 0, __pyx_n_s_encode_fd, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__49)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 428, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_fd, __pyx_t_5) < 0) __PYX_ERR(0, 428, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":293
+  /* "pybase16384/backends/cython/_core.pyx":446
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd(int inp, int out):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_25decode_fd, 0, __pyx_n_s_decode_fd, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__44)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 293, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_fd, __pyx_t_7) < 0) __PYX_ERR(0, 293, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_37decode_fd, 0, __pyx_n_s_decode_fd, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__50)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 446, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_fd, __pyx_t_5) < 0) __PYX_ERR(0, 446, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":312
+  /* "pybase16384/backends/cython/_core.pyx":465
  * 
  * # detailed
  * cpdef inline encode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_27encode_local_file_detailed, 0, __pyx_n_s_encode_local_file_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__46)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 312, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_local_file_detailed, __pyx_t_7) < 0) __PYX_ERR(0, 312, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_39encode_local_file_detailed, 0, __pyx_n_s_encode_local_file_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__52)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 465, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_local_file_detailed, __pyx_t_5) < 0) __PYX_ERR(0, 465, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":334
+  /* "pybase16384/backends/cython/_core.pyx":487
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_local_file_detailed(object inp, object out, int flag):             # <<<<<<<<<<<<<<
  *     cdef bytes inp_name = ensure_bytes(inp)
  *     cdef bytes out_name = ensure_bytes(out)
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_29decode_local_file_detailed, 0, __pyx_n_s_decode_local_file_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__47)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 334, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_local_file_detailed, __pyx_t_7) < 0) __PYX_ERR(0, 334, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_41decode_local_file_detailed, 0, __pyx_n_s_decode_local_file_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__53)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 487, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_local_file_detailed, __pyx_t_5) < 0) __PYX_ERR(0, 487, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":356
+  /* "pybase16384/backends/cython/_core.pyx":509
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline encode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_31encode_fd_detailed, 0, __pyx_n_s_encode_fd_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__48)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 356, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_fd_detailed, __pyx_t_7) < 0) __PYX_ERR(0, 356, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_43encode_fd_detailed, 0, __pyx_n_s_encode_fd_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__54)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 509, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_encode_fd_detailed, __pyx_t_5) < 0) __PYX_ERR(0, 509, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-  /* "pybase16384/backends/cython/_core.pyx":374
+  /* "pybase16384/backends/cython/_core.pyx":527
  *         PyMem_Free(decbuf)
  * 
  * cpdef inline decode_fd_detailed(int inp, int out, int flag):             # <<<<<<<<<<<<<<
  *     cdef char * encbuf = <char *> PyMem_Malloc(<size_t>BASE16384_ENCBUFSZ)
  *     if encbuf == NULL:
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_33decode_fd_detailed, 0, __pyx_n_s_decode_fd_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__49)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 374, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_fd_detailed, __pyx_t_7) < 0) __PYX_ERR(0, 374, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_11pybase16384_8backends_6cython_5_core_45decode_fd_detailed, 0, __pyx_n_s_decode_fd_detailed, NULL, __pyx_n_s_pybase16384_backends_cython__cor_2, __pyx_d, ((PyObject *)__pyx_codeobj__55)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 527, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_decode_fd_detailed, __pyx_t_5) < 0) __PYX_ERR(0, 527, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
   /* "pybase16384/backends/cython/_core.pyx":1
  * # cython: language_level=3             # <<<<<<<<<<<<<<
  * # cython: cdivision=True
  * from cpython.bytes cimport PyBytes_AS_STRING, PyBytes_Check, PyBytes_Size
  */
-  __pyx_t_7 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_7);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_7) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_5 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_5) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
@@ -35975,15 +39419,15 @@
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name_2);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
         Py_XDECREF(name);
-        name = __Pyx_NewRef(__pyx_n_s__50);
+        name = __Pyx_NewRef(__pyx_n_s__56);
     }
     return name;
 }
 #endif
 
 /* CheckBinaryVersion */
   static unsigned long __Pyx_get_runtime_version(void) {
```

## pybase16384/backends/cython/_core.pyx

```diff
@@ -2,34 +2,35 @@
 # cython: cdivision=True
 from cpython.bytes cimport PyBytes_AS_STRING, PyBytes_Check, PyBytes_Size
 from cpython.mem cimport PyMem_Free, PyMem_Malloc
 from cpython.object cimport PyObject_HasAttrString
 from libc.stdint cimport int32_t, uint8_t
 
 from pybase16384.backends.cython.base16384 cimport (
-    BASE16384_DECBUFSZ, BASE16384_ENCBUFSZ, BASE16384_FLAG_NOHEADER,
-    BASE16384_FLAG_SUM_CHECK_ON_REMAIN, BASE16384_SIMPLE_SUM_INIT_VALUE,
-    b14_decode, b14_decode_fd, b14_decode_fd_detailed, b14_decode_file,
-    b14_decode_file_detailed, b14_decode_len, b14_encode, b14_encode_fd,
+    BASE16384_DECBUFSZ, BASE16384_ENCBUFSZ,
+    BASE16384_FLAG_DO_SUM_CHECK_FORCELY, BASE16384_FLAG_NOHEADER,
+    BASE16384_FLAG_SUM_CHECK_ON_REMAIN, b14_decode, b14_decode_fd,
+    b14_decode_fd_detailed, b14_decode_file, b14_decode_file_detailed,
+    b14_decode_len, b14_decode_safe, b14_encode, b14_encode_fd,
     b14_encode_fd_detailed, b14_encode_file, b14_encode_file_detailed,
-    b14_encode_len, base16384_err_fopen_input_file,
+    b14_encode_len, b14_encode_safe, base16384_err_fopen_input_file,
     base16384_err_fopen_output_file, base16384_err_get_file_size,
     base16384_err_invalid_commandline_parameter,
     base16384_err_invalid_decoding_checksum, base16384_err_invalid_file_name,
     base16384_err_map_input_file, base16384_err_ok,
     base16384_err_open_input_file, base16384_err_read_file, base16384_err_t,
     base16384_err_write_file, pybase16384_64bits)
 
 from pathlib import Path
 
 ENCBUFSZ = BASE16384_ENCBUFSZ
 DECBUFSZ = BASE16384_DECBUFSZ
 FLAG_NOHEADER = BASE16384_FLAG_NOHEADER
 FLAG_SUM_CHECK_ON_REMAIN = BASE16384_FLAG_SUM_CHECK_ON_REMAIN
-SIMPLE_SUM_INIT_VALUE = BASE16384_SIMPLE_SUM_INIT_VALUE
+FLAG_DO_SUM_CHECK_FORCELY = BASE16384_FLAG_DO_SUM_CHECK_FORCELY
 
 cdef inline bytes ensure_bytes(object inp):
     if isinstance(inp, unicode):
         return inp.encode()
     elif isinstance(inp, bytes):
         return inp
     elif isinstance(inp, Path):
@@ -61,14 +62,30 @@
                                         <int>length,
                                         output_buf) # encode 整数倍的那个
     try:
         return <bytes>output_buf[:count]
     finally:
         PyMem_Free(output_buf)
 
+cpdef inline bytes _encode_safe(const uint8_t[::1] data):
+    cdef size_t length = data.shape[0]
+    cdef size_t output_size = <size_t> b14_encode_len(<int>length)
+    cdef char *output_buf = <char*>PyMem_Malloc(output_size)
+    if output_buf == NULL:
+        raise MemoryError
+    cdef int count
+    with nogil:
+        count = b14_encode_safe(<const char*> &data[0],
+                                        <int>length,
+                                        output_buf) # encode 整数倍的那个
+    try:
+        return <bytes>output_buf[:count]
+    finally:
+        PyMem_Free(output_buf)
+
 cpdef inline bytes _decode(const uint8_t[::1] data):
     cdef size_t length = data.shape[0]
     cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0) + 16
     cdef char *output_buf = <char *> PyMem_Malloc(output_size)
     if output_buf == NULL:
         raise MemoryError
     cdef int count
@@ -77,36 +94,73 @@
                                         <int> length,
                                         output_buf)  # decode
     try:
         return <bytes> output_buf[:count]
     finally:
         PyMem_Free(output_buf)
 
+cpdef inline bytes _decode_safe(const uint8_t[::1] data):
+    cdef size_t length = data.shape[0]
+    cdef size_t output_size = <size_t> b14_decode_len(<int>length, 0)
+    cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+    if output_buf == NULL:
+        raise MemoryError
+    cdef int count
+    with nogil:
+        count = b14_decode_safe(<const char *> &data[0],
+                                        <int> length,
+                                        output_buf)  # decode
+    try:
+        return <bytes> output_buf[:count]
+    finally:
+        PyMem_Free(output_buf)
+
 cpdef inline int _encode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
     cdef size_t input_size = data.shape[0]
     cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
     cdef size_t output_buf_size = dest.shape[0]
     if output_buf_size < output_size:
         raise ValueError("Buffer is too small to hold result")
     with nogil:
         return b14_encode(<const char *> &data[0],
                                 <int> input_size,
                                 <char *> &dest[0])
 
+cpdef inline int _encode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+    cdef size_t input_size = data.shape[0]
+    cdef size_t output_size = <size_t> b14_encode_len(<int> input_size)
+    cdef size_t output_buf_size = dest.shape[0]
+    if output_buf_size < output_size:
+        raise ValueError("Buffer is too small to hold result")
+    with nogil:
+        return b14_encode_safe(<const char *> &data[0],
+                                <int> input_size,
+                                <char *> &dest[0])
+
 cpdef inline int _decode_into(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
     cdef size_t input_size = data.shape[0]
     cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
     cdef size_t output_buf_size = dest.shape[0]
     if output_buf_size < output_size:
         raise ValueError("Buffer is too small to hold result")
     with nogil:
         return b14_decode(<const char *> &data[0],
                                 <int> input_size,
                                 <char *> &dest[0])
 
+cpdef inline int _decode_into_safe(const uint8_t[::1] data, uint8_t[::1] dest) except -1:
+    cdef size_t input_size = data.shape[0]
+    cdef size_t output_size = <size_t> b14_decode_len(<int> input_size, 0)
+    cdef size_t output_buf_size = dest.shape[0]
+    if output_buf_size < output_size:
+        raise ValueError("Buffer is too small to hold result")
+    with nogil:
+        return b14_decode_safe(<const char *> &data[0],
+                                <int> input_size,
+                                <char *> &dest[0])
 
 def encode_file(object input,
                        object output,
                        bint write_head = False,
                        int32_t buf_rate = 10):
     if not PyFile_Check(input):
         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
@@ -147,14 +201,61 @@
                 count = b14_encode(chunk_ptr, <int>size, output_buf)
             output.write(<bytes>output_buf[:count])
             if size < 7:
                 break
     finally:
         PyMem_Free(output_buf)
 
+def encode_file_safe(object input,
+                       object output,
+                       bint write_head = False,
+                       int32_t buf_rate = 10):
+    if not PyFile_Check(input):
+        raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+    if not PyFile_Check(output):
+        raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+    if buf_rate <= 0:
+        buf_rate = 1
+
+    if write_head:
+        output.write(b'\xfe\xff')
+
+    cdef int32_t current_buf_len = buf_rate * 7  # 一次读取这么多字节
+    cdef size_t output_size = <size_t> b14_encode_len(<int> current_buf_len) # 因为encode_len不是单调的 这16备用
+    cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+    if output_buf == NULL:
+        raise MemoryError
+
+    cdef Py_ssize_t size
+    cdef uint8_t first_check = 1  # 检查一次就行了 怎么可能出现第一次读出来是bytes 以后又变卦了的对象呢 不会吧不会吧
+    cdef int count = 0
+    cdef const char *chunk_ptr
+    try:
+        while True:
+            chunk = input.read(current_buf_len)
+            if first_check:
+                first_check = 0
+                if not PyBytes_Check(chunk):
+                    raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+            size = PyBytes_Size(chunk)
+            if <int32_t> size < current_buf_len:  # 数据不够了 要减小一次读取的量
+                if buf_rate > 1:  # 重新设置一次读取的大小 重新设置流的位置 当然要是已经是一次读取7字节了 那就不能再变小了 直接encode吧
+                    buf_rate = buf_rate / 2
+                    current_buf_len = buf_rate * 7
+                    input.seek(-size, 1)
+                    continue
+            chunk_ptr = <const char*>PyBytes_AS_STRING(chunk)
+            with nogil:
+                count = b14_encode_safe(chunk_ptr, <int>size, output_buf)
+            output.write(<bytes>output_buf[:count])
+            if size < 7:
+                break
+    finally:
+        PyMem_Free(output_buf)
+
 def decode_file(object input,
                        object output,
                        int32_t buf_rate = 10):
     if not PyFile_Check(input):
         raise TypeError("input except a file-like object, got %s" % type(input).__name__)
     if not PyFile_Check(output):
         raise TypeError("output except a file-like object, got %s" % type(output).__name__)
@@ -199,14 +300,66 @@
             chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
             with nogil:
                 count = b14_decode(chunk_ptr, <int> size, output_buf)
             output.write(<bytes>output_buf[:count])
     finally:
         PyMem_Free(output_buf)
 
+def decode_file_safe(object input,
+                       object output,
+                       int32_t buf_rate = 10):
+    if not PyFile_Check(input):
+        raise TypeError("input except a file-like object, got %s" % type(input).__name__)
+    if not PyFile_Check(output):
+        raise TypeError("output except a file-like object, got %s" % type(output).__name__)
+    if buf_rate <= 0:
+        buf_rate = 1
+
+    chunk = input.read(1)  # type: bytes
+    if not PyBytes_Check(chunk):
+        raise TypeError(f"input must be a file-like rb object, got {type(input).__name__}")
+    if chunk == b"\xfe":  # 去头
+        input.read(1)
+    else:
+        input.seek(0, 0)  # 没有头 回到开头
+
+    cdef int32_t current_buf_len = buf_rate * 8
+    cdef size_t output_size = <size_t> b14_decode_len(<int> current_buf_len, 0)
+    cdef char *output_buf = <char *> PyMem_Malloc(output_size)
+    if output_buf == NULL:
+        raise MemoryError
+    cdef Py_ssize_t size
+    cdef int count = 0
+    cdef const char *chunk_ptr
+    try:
+        while True:
+            chunk = input.read(current_buf_len)  # 8的倍数
+            size = PyBytes_Size(chunk)
+            if size == 0:
+                break
+            if <int32_t> size < current_buf_len:  # 长度不够了
+                if buf_rate > 1:  # 还能继续变小
+                    buf_rate = buf_rate / 2  # 重新设置一次读取的大小
+                    current_buf_len = buf_rate * 8
+                    input.seek(-size, 1)
+                    continue
+            tmp = input.read(2)  # type: bytes
+            if PyBytes_Size(tmp) == 2:
+                if tmp[0] == 61:  # = stream完了   一次解码8n+2个字节
+                    chunk += tmp
+                    size += 2
+                else:
+                    input.seek(-2, 1)
+            chunk_ptr = <const char *> PyBytes_AS_STRING(chunk)
+            with nogil:
+                count = b14_decode_safe(chunk_ptr, <int> size, output_buf)
+            output.write(<bytes>output_buf[:count])
+    finally:
+        PyMem_Free(output_buf)
+
 cpdef inline bint is_64bits() nogil:
     return pybase16384_64bits()
 
 cdef inline str err_to_str(base16384_err_t ret):
     if ret == base16384_err_get_file_size:
         return "base16384_err_get_file_size"
     elif ret == base16384_err_fopen_output_file:
```

## pybase16384/backends/cython/base16384.pxd

```diff
@@ -6,15 +6,15 @@
 
 cdef extern from "base16384.h" nogil:
     int BASE16384_ENCBUFSZ
     int BASE16384_DECBUFSZ
 
     int BASE16384_FLAG_NOHEADER
     int BASE16384_FLAG_SUM_CHECK_ON_REMAIN
-    int BASE16384_SIMPLE_SUM_INIT_VALUE
+    int BASE16384_FLAG_DO_SUM_CHECK_FORCELY
 
     ctypedef enum base16384_err_t:
         base16384_err_ok
         base16384_err_get_file_size
         base16384_err_fopen_output_file
         base16384_err_fopen_input_file
         base16384_err_write_file
@@ -25,19 +25,22 @@
         base16384_err_invalid_commandline_parameter
         base16384_err_invalid_decoding_checksum
     # encode_len calc min buf size to fill encode result
     int b14_encode_len "base16384_encode_len" (int dlen)
 # decode_len calc min buf size to fill decode result
     int b14_decode_len "base16384_decode_len" (int dlen, int offset)
 
+    int b14_encode_safe "base16384_encode_safe" (const char * data, int dlen, char * buf)
 # encode data and write result into buf
     int b14_encode "base16384_encode" (const char* data, int dlen, char* buf)
 
     int b14_encode_unsafe "base16384_encode_unsafe" (const char * data, int dlen, char * buf)
 # decode data and write result into buf
+    int b14_decode_safe "base16384_decode_safe" (const char * data, int dlen, char * buf)
+
     int b14_decode "base16384_decode" (const char* data, int dlen, char* buf)
 
     int b14_decode_unsafe "base16384_decode_unsafe"(const char * data, int dlen, char * buf)
 
     base16384_err_t b14_encode_file "base16384_encode_file" (const char * input, const char * output, char * encbuf, char * decbuf)
     base16384_err_t b14_decode_file "base16384_decode_file" (const char * input, const char * output, char * encbuf, char * decbuf)
 
@@ -83,13 +86,13 @@
     #    encbuf & decbuf must be no less than BASE16384_ENCBUFSZ & BASE16384_DECBUFSZ
     base16384_err_t b14_decode_fd_detailed "base16384_decode_fd_detailed" (int input, int output, char* encbuf, char* decbuf, int flag)
 
 
 cdef extern from * nogil:
     """
 #ifdef CPUBIT32
-#define pybase16384_64bits() 0
+#define pybase16384_64bits() (0)
 #else
-#define pybase16384_64bits() 1
+#define pybase16384_64bits() (1)
 #endif
     """
     int32_t pybase16384_64bits()
```

## Comparing `pybase16384-0.3.6.dist-info/LICENSE` & `pybase16384-0.3.7.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pybase16384-0.3.6.dist-info/METADATA` & `pybase16384-0.3.7.dist-info/METADATA`

 * *Files 25% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pybase16384
-Version: 0.3.6
+Version: 0.3.7
 Summary: fast base16384 encode and decode
 Home-page: https://github.com/synodriver/pybase16384
 Author: synodriver
 Author-email: diguohuangjiajinweijun@gmail.com
 License: GPLv3
 Keywords: encode,decode,base16384
 Classifier: Development Status :: 5 - Production/Stable
@@ -74,45 +74,85 @@
     data = f.read()
 for i in range(1):
     pybs.decode_file(BytesIO(data), open("input2.pcm", 'wb'))
 ```
 
 ### 公开函数
 ```python
+from typing import IO
+
 def encode_len(dlen: int) -> int: ...
 
 def decode_len(dlen: int, offset: int) -> int: ...
 
+ENCBUFSZ: int
+DECBUFSZ: int
+FLAG_NOHEADER: int
+FLAG_SUM_CHECK_ON_REMAIN: int
+FLAG_DO_SUM_CHECK_FORCELY: int
+
+def is_64bits() -> bool: ...
+
+def encode_file(input: IO, output: IO, write_head: bool = ..., buf_rate: int = ...): ...
+
+def encode_file_safe(input: IO, output: IO, write_head: bool = ..., buf_rate: int = ...): ...
+
+def decode_file(input: IO, output: IO, buf_rate: int = ...): ...
+
+def decode_file_safe(input: IO, output: IO, buf_rate: int = ...): ...
+
+def ensure_bytes(inp) -> bytes: ...
+
+def encode_local_file(inp, out) -> None: ...
+
+def decode_local_file(inp, out) -> None: ...
+
+def encode_fd(inp: int, out: int) -> None: ...
+
+def decode_fd(inp: int, out: int) -> None: ...
+
+def encode_local_file_detailed(inp, out, flag: int) -> None: ...
+
+def decode_local_file_detailed(inp, out, flag: int) -> None: ...
+
+def encode_fd_detailed(inp: int, out: int, flag: int) -> None: ...
+
+def decode_fd_detailed(inp: int, out: int, flag: int) -> None: ...
+
 def encode(data: bytes) -> bytes: ...
 
+def encode_safe(data: bytes) -> bytes: ...
+
 def decode(data: bytes) -> bytes: ...
 
-def decode_file(input: BinaryIO, output: BinaryIO, buf_rate: int = 10) -> None: ...
+def decode_safe(data: bytes) -> bytes: ...
 
-def encode_file(input: BinaryIO, output: BinaryIO, boolwrite_head: bool = False, buf_rate: int = 10) -> None: ...
+def encode_from_string(data: str, write_head: bool = ...) -> bytes: ...
 
-def encode_from_string(data: str, write_head: bool = False) -> bytes: ...
+def encode_from_string_safe(data: str, write_head: bool = ...) -> bytes: ...
 
 def encode_to_string(data: bytes) -> str: ...
 
+def encode_to_string_safe(data: bytes) -> str: ...
+
 def encode_string(data: str) -> str: ...
 
+def encode_string_safe(data: str) -> str: ...
+
 def decode_from_bytes(data: bytes) -> str: ...
 
-def decode_from_string(data: str) -> bytes: ...
+def decode_from_bytes_safe(data: bytes) -> str: ...
 
-def decode_string(data: str) -> str: ...
+def decode_from_string(data: str) -> bytes: ...
 
-def encode_local_file(inp: Union[str, bytes, Path], out: Union[str, bytes, Path], encsize: int, decsize: int) -> None: ...
+def decode_from_string_safe(data: str) -> bytes: ...
 
-def decode_local_file(inp: Union[str, bytes, Path], out: Union[str, bytes, Path], encsize: int, decsize: int) -> None: ...
+def decode_string(data: str) -> str: ...
 
-def encode_fd(inp: int, out: int) -> None: ...
-    
-def decode_fd(inp: int, out: int) -> None: ...
+def decode_string_safe(data: str) -> str: ...
 ```
 - write_head将显式指明编码出的文本格式(utf16be)，以便文本编辑器(如记事本)能够正确渲染，一般在写入文件时使用。
 
 - buf_rate指定读取文件的策略。当它为n时，则表示一次读取7n或者8n个字节。如果读到的字节长度小于预期，则说明长度不够，
 此时，n将减半，恢复文件指针，重新读取。如果当n=1时长度仍然不够，就地encode/decode处理之。
 
 - ```encode_len```和```decode_len```用于计算输出的长度
@@ -120,20 +160,28 @@
 ### 内部函数
 
 - 他们直接来自底层的C库，高性能，但是一般不需要在外部使用（除非是增加性能）
 
 ```python
 def _encode(data: BufferProtocol) -> bytes: ...
 
+def _encode_safe(data: BufferProtocol) -> bytes: ...
+
 def _decode(data: BufferProtocol) -> bytes: ...
 
+def _decode_safe(data: BufferProtocol) -> bytes: ...
+
 def _encode_into(data: BufferProtocol, dest: BufferProtocol) -> int: ...
 
+def _encode_into_safe(data: BufferProtocol, dest: BufferProtocol) -> int: ...
+
 def _decode_into(data: BufferProtocol, dest: BufferProtocol) -> int: ...
 
+def _decode_into_safe(data: BufferProtocol, dest: BufferProtocol) -> int: ...
+
 def is_64bits() -> bool: ...
 ```
 - ```_decode```在解码```b'='```开头的数据时***不安全***：***解释器异常***
 - ```_encode_into```和```_decode_into```直接操作缓冲区对象的底层指针，0拷贝，当然也和上面一样的问题，他们是没有检查的
 
 ### ✨  v0.3更新 ✨ 
 融合了 [CFFI](https://github.com/synodriver/pybase16384-cffi) 版本的成果，现在一个包可以同时在cpython和pypy上运行
```

### html2text {}

```diff
@@ -1,8 +1,8 @@
-Metadata-Version: 2.1 Name: pybase16384 Version: 0.3.6 Summary: fast base16384
+Metadata-Version: 2.1 Name: pybase16384 Version: 0.3.7 Summary: fast base16384
 encode and decode Home-page: https://github.com/synodriver/pybase16384 Author:
 synodriver Author-email: diguohuangjiajinweijun@gmail.com License: GPLv3
 Keywords: encode,decode,base16384 Classifier: Development Status :: 5 -
 Production/Stable Classifier: Operating System :: OS Independent Classifier:
 License :: OSI Approved :: GNU General Public License v3 (GPLv3) Classifier:
 Topic :: Security :: Cryptography Classifier: Programming Language :: C
 Classifier: Programming Language :: Cython Classifier: Programming Language ::
@@ -26,41 +26,57 @@
 pybase16384 as pybs >>> pybs.encode_string('hello!!') 'æ æç¾¼æ¼¡' >>>
 pybs.decode_string('æ æç¾¼æ¼¡') 'hello!!' ``` - ç¼ç æä»¶ ```python from
 io import BytesIO import pybase16384 as pybs with open("input.pcm", "rb") as f:
 data = f.read() for i in range(1): pybs.encode_file(BytesIO(data), open
 ("output2.pcm", 'wb'), True) ``` - è§£ç æä»¶ ```python from io import
 BytesIO import pybase16384 as pybs with open("output2.pcm", "rb") as f: data =
 f.read() for i in range(1): pybs.decode_file(BytesIO(data), open("input2.pcm",
-'wb')) ``` ### å¬å¼å½æ° ```python def encode_len(dlen: int) -> int: ... def
-decode_len(dlen: int, offset: int) -> int: ... def encode(data: bytes) -
-> bytes: ... def decode(data: bytes) -> bytes: ... def decode_file(input:
-BinaryIO, output: BinaryIO, buf_rate: int = 10) -> None: ... def encode_file
-(input: BinaryIO, output: BinaryIO, boolwrite_head: bool = False, buf_rate: int
-= 10) -> None: ... def encode_from_string(data: str, write_head: bool = False)
--> bytes: ... def encode_to_string(data: bytes) -> str: ... def encode_string
-(data: str) -> str: ... def decode_from_bytes(data: bytes) -> str: ... def
-decode_from_string(data: str) -> bytes: ... def decode_string(data: str) -
-> str: ... def encode_local_file(inp: Union[str, bytes, Path], out: Union[str,
-bytes, Path], encsize: int, decsize: int) -> None: ... def decode_local_file
-(inp: Union[str, bytes, Path], out: Union[str, bytes, Path], encsize: int,
-decsize: int) -> None: ... def encode_fd(inp: int, out: int) -> None: ... def
-decode_fd(inp: int, out: int) -> None: ... ``` -
+'wb')) ``` ### å¬å¼å½æ° ```python from typing import IO def encode_len
+(dlen: int) -> int: ... def decode_len(dlen: int, offset: int) -> int: ...
+ENCBUFSZ: int DECBUFSZ: int FLAG_NOHEADER: int FLAG_SUM_CHECK_ON_REMAIN: int
+FLAG_DO_SUM_CHECK_FORCELY: int def is_64bits() -> bool: ... def encode_file
+(input: IO, output: IO, write_head: bool = ..., buf_rate: int = ...): ... def
+encode_file_safe(input: IO, output: IO, write_head: bool = ..., buf_rate: int =
+...): ... def decode_file(input: IO, output: IO, buf_rate: int = ...): ... def
+decode_file_safe(input: IO, output: IO, buf_rate: int = ...): ... def
+ensure_bytes(inp) -> bytes: ... def encode_local_file(inp, out) -> None: ...
+def decode_local_file(inp, out) -> None: ... def encode_fd(inp: int, out: int)
+-> None: ... def decode_fd(inp: int, out: int) -> None: ... def
+encode_local_file_detailed(inp, out, flag: int) -> None: ... def
+decode_local_file_detailed(inp, out, flag: int) -> None: ... def
+encode_fd_detailed(inp: int, out: int, flag: int) -> None: ... def
+decode_fd_detailed(inp: int, out: int, flag: int) -> None: ... def encode(data:
+bytes) -> bytes: ... def encode_safe(data: bytes) -> bytes: ... def decode
+(data: bytes) -> bytes: ... def decode_safe(data: bytes) -> bytes: ... def
+encode_from_string(data: str, write_head: bool = ...) -> bytes: ... def
+encode_from_string_safe(data: str, write_head: bool = ...) -> bytes: ... def
+encode_to_string(data: bytes) -> str: ... def encode_to_string_safe(data:
+bytes) -> str: ... def encode_string(data: str) -> str: ... def
+encode_string_safe(data: str) -> str: ... def decode_from_bytes(data: bytes) -
+> str: ... def decode_from_bytes_safe(data: bytes) -> str: ... def
+decode_from_string(data: str) -> bytes: ... def decode_from_string_safe(data:
+str) -> bytes: ... def decode_string(data: str) -> str: ... def
+decode_string_safe(data: str) -> str: ... ``` -
 write_headå°æ¾å¼ææç¼ç åºçææ¬æ ¼å¼
 (utf16be)ï¼ä»¥ä¾¿ææ¬ç¼è¾å¨
 (å¦è®°äºæ¬)è½å¤æ­£ç¡®æ¸²æï¼ä¸è¬å¨åå¥æä»¶æ¶ä½¿ç¨ã -
 buf_rateæå®è¯»åæä»¶çç­ç¥ãå½å®ä¸ºnæ¶ï¼åè¡¨ç¤ºä¸æ¬¡è¯»å7næè8nä¸ªå­èãå¦æè¯»å°çå­èé¿åº¦å°äºé¢æï¼åè¯´æé¿åº¦ä¸å¤ï¼
 æ­¤æ¶ï¼nå°ååï¼æ¢å¤æä»¶æéï¼éæ°è¯»åãå¦æå½n=1æ¶é¿åº¦ä»ç¶ä¸å¤ï¼å°±å°encode/
 decodeå¤çä¹ã -
 ```encode_len```å```decode_len```ç¨äºè®¡ç®è¾åºçé¿åº¦ ### åé¨å½æ°
 -
 ä»ä»¬ç´æ¥æ¥èªåºå±çCåºï¼é«æ§è½ï¼ä½æ¯ä¸è¬ä¸éè¦å¨å¤é¨ä½¿ç¨ï¼é¤éæ¯å¢å æ§è½ï¼
-```python def _encode(data: BufferProtocol) -> bytes: ... def _decode(data:
-BufferProtocol) -> bytes: ... def _encode_into(data: BufferProtocol, dest:
-BufferProtocol) -> int: ... def _decode_into(data: BufferProtocol, dest:
-BufferProtocol) -> int: ... def is_64bits() -> bool: ... ``` -
+```python def _encode(data: BufferProtocol) -> bytes: ... def _encode_safe
+(data: BufferProtocol) -> bytes: ... def _decode(data: BufferProtocol) -
+> bytes: ... def _decode_safe(data: BufferProtocol) -> bytes: ... def
+_encode_into(data: BufferProtocol, dest: BufferProtocol) -> int: ... def
+_encode_into_safe(data: BufferProtocol, dest: BufferProtocol) -> int: ... def
+_decode_into(data: BufferProtocol, dest: BufferProtocol) -> int: ... def
+_decode_into_safe(data: BufferProtocol, dest: BufferProtocol) -> int: ... def
+is_64bits() -> bool: ... ``` -
 ```_decode```å¨è§£ç ```b'='```å¼å¤´çæ°æ®æ¶***ä¸å®å¨***ï¼***è§£éå¨å¼å¸¸***
 -
 ```_encode_into```å```_decode_into```ç´æ¥æä½ç¼å²åºå¯¹è±¡çåºå±æéï¼0æ·è´ï¼å½ç¶ä¹åä¸é¢ä¸æ ·çé®é¢ï¼ä»ä»¬æ¯æ²¡ææ£æ¥ç
 ### â¨ v0.3æ´æ° â¨ èåäº [CFFI](https://github.com/synodriver/
 pybase16384-cffi)
 çæ¬çææï¼ç°å¨ä¸ä¸ªåå¯ä»¥åæ¶å¨cpythonåpypyä¸è¿è¡ ###
 æ¬æºç¼è¯ ``` python -m pip install setuptools wheel cython cffi git clone
```

## Comparing `pybase16384-0.3.6.dist-info/RECORD` & `pybase16384-0.3.7.dist-info/RECORD`

 * *Files 22% similar despite different names*

```diff
@@ -1,16 +1,16 @@
-pybase16384/__init__.py,sha256=ORhQHbG_JSqXq78YxjIaWxJpSzv84TVS7rgd2wQKpS0,3062
+pybase16384/__init__.py,sha256=I4fq10U7x38tDhMUUp_K_tzArZfRkU_4M8QvaIER5no,4970
 pybase16384/backends/__init__.py,sha256=9aG9WOI42Hcgaj9QGw99OIvKZTG-sYNlLBUctorc4Kg,56
-pybase16384/backends/cffi/__init__.py,sha256=5Uk7Il3xmAkj9HxhbB1OdXE2Cslc0rDuIYcfDrLQcug,9774
-pybase16384/backends/cffi/_core.pypy39-pp73-win_amd64.pyd,sha256=NcjTO74UJfoDxc9XEuYrpB5kcri3q71y7W57ZMn7ZHw,22016
-pybase16384/backends/cffi/build.py,sha256=DXOVlPcnnjNFt11n3TSeiMd5OUbdcm3bbylDQppy-mo,4539
-pybase16384/backends/cython/__init__.py,sha256=b3qH9k-e72aqwxdZHfR-PipQNzvBFGWq9uiX6v_PfuI,578
-pybase16384/backends/cython/_core.c,sha256=7WXWJg1wJV3E7rMLUsfmSFPdNW7zvMJ6uic7H_zEiTM,1393181
+pybase16384/backends/cffi/__init__.py,sha256=4wLAqQkOhzMU06rHjiP3vsq4tLpA3BSE-ZRWIyXQISk,14451
+pybase16384/backends/cffi/_core.pypy39-pp73-win_amd64.pyd,sha256=YCdRgFPXHs8L_pF4VgfHF03ptBFndVWHPYqgTe036DI,25088
+pybase16384/backends/cffi/build.py,sha256=m585-SvsiRrx4stB6C0nrl2NpLOvn-faTir86PSiEdc,4693
+pybase16384/backends/cython/__init__.py,sha256=sNk05eduO-ErnMqUjnES6X4KnWfdpcCQnd_EYAyFFCg,714
+pybase16384/backends/cython/_core.c,sha256=kn3l1f2RQOuSIMx9CnqGIdWrgOqkbs7cAWnAkxoU5Hc,1538911
 pybase16384/backends/cython/_core.pxi,sha256=SPgwG7QKofRYdJDRrhx2TWRvOuBuwTjRGg2WvGUrQw4,542
-pybase16384/backends/cython/_core.pypy39-pp73-win_amd64.pyd,sha256=ceNwN98CBXmGWjjj0yiqjRd3VtS8zhL3JELgeWIx_Zc,182784
-pybase16384/backends/cython/_core.pyx,sha256=mWb4dr-hEjp1QPI37mU_lyJyUohHYxacCPyPbmAjP5U,15765
-pybase16384/backends/cython/base16384.pxd,sha256=ZIOMla80PKuWAIUZIFsJh4b7rzjfHxxaa-VEQ9CQe5E,4749
-pybase16384-0.3.6.dist-info/LICENSE,sha256=gcuuhKKc5-dwvyvHsXjlC9oM6N5gZ6umYbC8ewW1Yvg,35821
-pybase16384-0.3.6.dist-info/METADATA,sha256=ASRzCwkCUBoHKlPqlv1GT5P1dNjhILV4Yetdp4oM_w8,5539
-pybase16384-0.3.6.dist-info/WHEEL,sha256=QQY0XPJVcbNrDwRnZBTwtxGbMWJnHaWRpMJLfPEPCFM,107
-pybase16384-0.3.6.dist-info/top_level.txt,sha256=kXpl7pWjnjpm74qJP0SJg3JhbiWuwKQApJgkJH0B5Mk,12
-pybase16384-0.3.6.dist-info/RECORD,,
+pybase16384/backends/cython/_core.pypy39-pp73-win_amd64.pyd,sha256=Zdjq13Kn56cFOCltRzx23RJWoFJVFcwXTcvt6O7ZFoI,206336
+pybase16384/backends/cython/_core.pyx,sha256=p4p59Yqlmo-_2bG0T-f_0yyjUIE9S4XgGF14q2OsF0U,22414
+pybase16384/backends/cython/base16384.pxd,sha256=6KgB5vEipJXw1v1nZPE3JgQapxDtO6yHoGz0FPP7JDE,4941
+pybase16384-0.3.7.dist-info/LICENSE,sha256=gcuuhKKc5-dwvyvHsXjlC9oM6N5gZ6umYbC8ewW1Yvg,35821
+pybase16384-0.3.7.dist-info/METADATA,sha256=dUK9Dwj9bE6KH2tZGan1kv5KaaQnAKRztTYzK0UvUJs,6699
+pybase16384-0.3.7.dist-info/WHEEL,sha256=QQY0XPJVcbNrDwRnZBTwtxGbMWJnHaWRpMJLfPEPCFM,107
+pybase16384-0.3.7.dist-info/top_level.txt,sha256=kXpl7pWjnjpm74qJP0SJg3JhbiWuwKQApJgkJH0B5Mk,12
+pybase16384-0.3.7.dist-info/RECORD,,
```

